import{d as W,C as Y,r as y,c as _,a as m,o as u,b as t,u as e,m as Z,w as r,e as o,P as F,f as n,j as ee,F as b,i as $,n as D,h as x,t as d,g as w}from"./app-De5aCyOy.js";import{f as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as A}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as V}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as j}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as N}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as C}from"./index-CNloWqrH.js";import{_ as te}from"./Switch.vue_vue_type_script_setup_true_lang-Cp6QCENU.js";import{_ as le}from"./Checkbox.vue_vue_type_script_setup_true_lang-CJs0Ik0y.js";import{_ as oe,a as re,b as ie,c as ae,d as z}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{A as ne}from"./arrow-left-kG5YrchA.js";import{B as de}from"./book-open-pPANAQ7D.js";import{S as O}from"./search-Cw3ar56u.js";import{C as ue}from"./circle-check-big-BYC-wlwA.js";import{C as me}from"./clock-BXDw5ZYb.js";import{U as P,X as ce}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import{F as fe}from"./filter-Ihqwk31P.js";import{U as _e}from"./user-plus-DsRwCIIh.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./useForwardExpose-Cyi8rQxf.js";import"./VisuallyHidden-9kO_gd9f.js";import"./VisuallyHiddenInput-CPW02NT0.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";const pe={class:"max-w-6xl mx-auto space-y-6"},ge={class:"flex items-center gap-4"},ve={class:"relative"},xe={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},he=["onClick"],ye={class:"flex items-start justify-between mb-3"},be={class:"font-semibold text-sm line-clamp-2"},we={key:0,class:"w-5 h-5 rounded-full bg-primary text-primary-foreground flex items-center justify-center flex-shrink-0 ml-2"},Ce={class:"text-xs text-muted-foreground mb-3 line-clamp-2"},ke={class:"space-y-2"},Se={class:"flex items-center justify-between"},Ue={class:"flex items-center gap-1 text-xs text-muted-foreground"},$e={class:"flex items-center justify-between text-xs text-muted-foreground"},Ae={class:"flex items-center justify-between"},Ve={class:"space-y-3 p-4 bg-muted/50 rounded-lg"},Le={class:"flex items-center justify-between"},je={class:"flex items-center gap-2"},Be={class:"grid gap-3 md:grid-cols-2"},Fe={class:"space-y-2"},De={class:"flex items-center space-x-2"},Ie={class:"space-y-2 max-h-96 overflow-y-auto"},Ne={class:"flex-1"},ze={class:"font-medium"},Oe={class:"text-sm text-muted-foreground"},Pe={class:"text-xs text-muted-foreground mt-1"},Ee={key:0,class:"text-center py-8 text-muted-foreground"},Me={class:"flex items-center justify-between"},Te={class:"space-y-1"},Xe={class:"flex justify-between items-center py-6"},Ls=W({__name:"Create",props:{courses:{},users:{},departments:{},selectedCourseId:{},selectedUserIds:{}},setup(E){const c=E,M=[{title:"Course Assignments",href:"/admin/course-assignments"},{title:"Assign Courses",href:"/admin/course-assignments/create"}],a=Y({course_id:c.selectedCourseId||"",user_ids:c.selectedUserIds||[],send_notification:!0}),p=y(""),g=y(""),f=y(null),k=y(!1),v=_(()=>{let i=c.users;if(g.value){const s=g.value.toLowerCase();i=i.filter(l=>l.name.toLowerCase().includes(s)||l.email.toLowerCase().includes(s)||l.department_name.toLowerCase().includes(s))}if(f.value){const s=parseInt(f.value);i=i.filter(l=>l.department_id===s)}return k.value&&a.course_id&&(i=i.filter(s=>!(s.active_assignments>0))),i}),T=_(()=>p.value?c.courses.filter(i=>i.name.toLowerCase().includes(p.value.toLowerCase())||i.description.toLowerCase().includes(p.value.toLowerCase())):c.courses);_(()=>c.courses.find(i=>i.id.toString()===a.course_id.toString()));const S=_(()=>a.user_ids.length),X=_(()=>a.course_id&&a.user_ids.length>0),U=_(()=>{let i=0;return f.value&&i++,k.value&&i++,i}),q=i=>{a.course_id=i.toString()},G=i=>{const s=a.user_ids.indexOf(i);s>-1?a.user_ids.splice(s,1):a.user_ids.push(i)},H=()=>{a.user_ids.length===v.value.length?a.user_ids=[]:a.user_ids=v.value.map(i=>i.id)},J=()=>{f.value=null,k.value=!1,g.value=""},K=i=>{switch(i){case"beginner":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"intermediate":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"advanced":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},Q=()=>{a.post("/admin/course-assignments")};return(i,s)=>(u(),m(b,null,[t(e(Z),{title:"Assign Courses"}),t(se,{breadcrumbs:M},{default:r(()=>[o("div",pe,[o("div",ge,[t(e(h),{"as-child":"",variant:"ghost"},{default:r(()=>[t(e(F),{href:"/admin/course-assignments"},{default:r(()=>[t(e(ne),{class:"h-4 w-4 mr-2"}),s[4]||(s[4]=n(" Back to Assignments "))]),_:1})]),_:1}),s[5]||(s[5]=o("div",null,[o("h1",{class:"text-3xl font-bold"},"Assign Courses to Users"),o("p",{class:"text-muted-foreground"},"Select a course and assign it to multiple users at once")],-1))]),o("form",{onSubmit:ee(Q,["prevent"]),class:"space-y-6"},[t(e(A),null,{default:r(()=>[t(e(j),null,{default:r(()=>[t(e(B),{class:"flex items-center gap-2"},{default:r(()=>[t(e(de),{class:"h-5 w-5 text-primary"}),s[6]||(s[6]=n(" Select Course "))]),_:1}),t(e(L),null,{default:r(()=>s[7]||(s[7]=[n("Choose the course you want to assign to users")])),_:1})]),_:1}),t(e(V),{class:"space-y-4"},{default:r(()=>[o("div",ve,[t(e(O),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),t(e(I),{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=l=>p.value=l),placeholder:"Search courses...",class:"pl-10"},null,8,["modelValue"])]),o("div",xe,[(u(!0),m(b,null,$(T.value,l=>(u(),m("div",{key:l.id,onClick:R=>q(l.id),class:D(["border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md",e(a).course_id.toString()===l.id.toString()?"border-primary bg-primary/5":"border-border hover:border-primary/50"])},[o("div",ye,[o("h3",be,d(l.name),1),e(a).course_id.toString()===l.id.toString()?(u(),m("div",we,[t(e(ue),{class:"w-3 h-3"})])):x("",!0)]),o("p",Ce,d(l.description),1),o("div",ke,[o("div",Se,[t(e(C),{class:D([K(l.difficulty_level),"text-xs"])},{default:r(()=>[n(d(l.difficulty_level),1)]),_:2},1032,["class"]),o("div",Ue,[t(e(me),{class:"w-3 h-3"}),n(" "+d(l.estimated_duration)+" min ",1)])]),o("div",$e,[o("span",null,d(l.modules_count)+" modules",1),o("span",null,d(l.current_assignments)+" assigned",1)])])],10,he))),128))])]),_:1})]),_:1}),t(e(A),null,{default:r(()=>[t(e(j),null,{default:r(()=>[o("div",Ae,[o("div",null,[t(e(B),{class:"flex items-center gap-2"},{default:r(()=>[t(e(P),{class:"h-5 w-5 text-primary"}),s[8]||(s[8]=n(" Select Users ")),S.value>0?(u(),w(e(C),{key:0,variant:"secondary"},{default:r(()=>[n(d(S.value)+" selected ",1)]),_:1})):x("",!0)]),_:1}),t(e(L),null,{default:r(()=>s[9]||(s[9]=[n("Choose which users to assign this course to")])),_:1})]),t(e(h),{type:"button",variant:"outline",size:"sm",onClick:H},{default:r(()=>[n(d(e(a).user_ids.length===v.value.length?"Deselect All":"Select All"),1)]),_:1})])]),_:1}),t(e(V),{class:"space-y-4"},{default:r(()=>[o("div",Ve,[o("div",Le,[o("div",je,[t(e(fe),{class:"h-4 w-4 text-muted-foreground"}),s[10]||(s[10]=o("span",{class:"font-medium text-sm"},"Filters",-1)),U.value>0?(u(),w(e(C),{key:0,variant:"secondary",class:"h-5"},{default:r(()=>[n(d(U.value),1)]),_:1})):x("",!0)]),U.value>0?(u(),w(e(h),{key:0,type:"button",variant:"ghost",size:"sm",onClick:J},{default:r(()=>[t(e(ce),{class:"h-3 w-3 mr-1"}),s[11]||(s[11]=n(" Clear "))]),_:1})):x("",!0)]),o("div",Be,[o("div",Fe,[t(e(N),null,{default:r(()=>s[12]||(s[12]=[n("Filter by Department")])),_:1}),t(e(oe),{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=l=>f.value=l)},{default:r(()=>[t(e(re),null,{default:r(()=>[t(e(ie),{placeholder:"All Departments"})]),_:1}),t(e(ae),null,{default:r(()=>[t(e(z),{value:null},{default:r(()=>s[13]||(s[13]=[n("All Departments")])),_:1}),(u(!0),m(b,null,$(i.departments,l=>(u(),w(e(z),{key:l.id,value:l.id.toString()},{default:r(()=>[n(d(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),o("div",De,[t(e(O),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),t(e(I),{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=l=>g.value=l),placeholder:"Search users by name, email, or department...",class:"pl-10"},null,8,["modelValue"])])])]),s[15]||(s[15]=o("div",{class:"relative"},null,-1)),o("div",Ie,[(u(!0),m(b,null,$(v.value,l=>(u(),m("div",{key:l.id,class:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-accent/50 transition-colors"},[t(e(le),{checked:e(a).user_ids.includes(l.id),"onUpdate:checked":R=>G(l.id)},null,8,["checked","onUpdate:checked"]),o("div",Ne,[o("div",ze,d(l.name),1),o("div",Oe,d(l.email),1),o("div",Pe,[t(e(C),{variant:"outline",class:"mr-2"},{default:r(()=>[n(d(l.department_name),1)]),_:2},1024),n(" "+d(l.active_assignments)+" active assignments ",1)])])]))),128)),v.value.length===0?(u(),m("div",Ee,[t(e(P),{class:"h-12 w-12 mx-auto mb-2 opacity-50"}),s[14]||(s[14]=o("p",null,"No users found matching your filters",-1))])):x("",!0)])]),_:1})]),_:1}),t(e(A),null,{default:r(()=>[t(e(j),null,{default:r(()=>[t(e(B),null,{default:r(()=>s[16]||(s[16]=[n("Assignment Settings")])),_:1}),t(e(L),null,{default:r(()=>s[17]||(s[17]=[n("Configure how the assignment will be handled")])),_:1})]),_:1}),t(e(V),null,{default:r(()=>[o("div",Me,[o("div",Te,[t(e(N),null,{default:r(()=>s[18]||(s[18]=[n("Email Notifications")])),_:1}),s[19]||(s[19]=o("div",{class:"text-sm text-muted-foreground"}," Send email notifications to users about their new course assignment ",-1))]),t(e(te),{checked:e(a).send_notification,"onUpdate:checked":s[3]||(s[3]=l=>e(a).send_notification=l)},null,8,["checked"])])]),_:1})]),_:1}),o("div",Xe,[t(e(h),{"as-child":"",variant:"outline"},{default:r(()=>[t(e(F),{href:"/admin/course-assignments"},{default:r(()=>s[20]||(s[20]=[n("Cancel")])),_:1})]),_:1}),t(e(h),{type:"submit",disabled:e(a).processing||!X.value,class:"min-w-48"},{default:r(()=>[t(e(_e),{class:"h-4 w-4 mr-2"}),n(" "+d(e(a).processing?"Assigning Courses...":`Assign Course to ${S.value} Users`),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ls as default};
