import{r as $,B as K,p as X,c as q,W as B,g as h,o as u,w as l,e as t,b as s,h as g,a as f,u as e,t as n,f as m,n as S,j as Z,F as T,i as j,P as ee}from"./app-De5aCyOy.js";import{f as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as V}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as p}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as se}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as P}from"./index-CNloWqrH.js";import{_ as A}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as ae}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as le}from"./Checkbox.vue_vue_type_script_setup_true_lang-CJs0Ik0y.js";import{_ as re,a as ie}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-DEgpz9bD.js";import{_ as U}from"./Progress.vue_vue_type_script_setup_true_lang-XKk6VJsB.js";import{_ as D,a as F}from"./index-Bl7hX8X-.js";import{T as ne}from"./target-CkYXQ-0W.js";import{F as oe}from"./file-text-BOOsEpvl.js";import{C as O}from"./circle-help-BeDrtfy1.js";import{T as ue}from"./timer-Dxqjdf0U.js";import{C as Y}from"./clock-BXDw5ZYb.js";import{T as L}from"./triangle-alert-QBZ4KeJk.js";import{C as de}from"./circle-check-big-BYC-wlwA.js";import{S as me}from"./save-Cj1WR6gV.js";import{S as ce}from"./send-fhPUJJ3W.js";import{A as fe}from"./arrow-left-kG5YrchA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./check-DTkWFW74.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./useForwardExpose-Cyi8rQxf.js";import"./RovingFocusItem-B6yBawHL.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./VisuallyHidden-9kO_gd9f.js";import"./VisuallyHiddenInput-CPW02NT0.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./circle-PDixcOb7.js";import"./nullish-CHIgUVhi.js";const ve={class:"min-h-screen bg-gradient-to-br from-background to-secondary/20"},_e={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},pe={class:"flex items-start justify-between"},xe={class:"flex-1"},he={class:"text-3xl font-bold mb-2"},be={class:"text-muted-foreground mb-4"},ge={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},we={class:"flex items-center gap-2 mb-1"},ye={class:"font-semibold"},ze={class:"flex items-center gap-2 mb-1"},ke={class:"font-semibold"},$e={class:"flex items-center gap-2 mb-1"},Ae={class:"font-semibold"},Ce={class:"flex items-center gap-2 mb-1"},qe={class:"font-semibold"},Se={class:"ml-6"},Te={class:"flex items-center justify-between"},je={class:"flex items-center"},Ve={class:"flex items-center"},Qe={class:"mt-2"},Ne={class:"flex items-center justify-between mb-2"},Be={class:"text-sm text-muted-foreground"},Ee={key:2,class:"space-y-6"},Pe={class:"flex items-center justify-between"},Ue={class:"flex items-center"},De={class:"w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold mr-3"},Fe={class:"flex items-center space-x-2"},Oe={class:"text-foreground mb-6 text-base leading-relaxed"},Ye={key:0,class:"space-y-3"},Le={key:1,class:"space-y-3"},Me={key:2},Re={class:"mt-2 text-xs text-muted-foreground"},We={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},He={class:"flex items-center space-x-6 text-sm text-muted-foreground"},Ge={class:"flex items-center"},Ie={class:"flex items-center"},Je={class:"flex items-center space-x-3"},Ke={key:1,class:"w-4 h-4 mr-2 animate-spin rounded-full border-b-2 border-current"},Xe={key:1,class:"w-4 h-4 mr-2 animate-spin rounded-full border-b-2 border-current"},Ze={class:"font-medium"},et={class:"mx-auto w-24 h-24 bg-accent rounded-full flex items-center justify-center mb-4"},Lt={__name:"Show",props:{quiz:{type:Object,required:!0},questions:{type:Array,default:()=>[]},hasExistingAttempt:{type:Boolean,default:!1}},setup(o){const v=o,d=$({answers:{}}),w=$(!1),k=$(!1),x=$(v.quiz.time_limit_minutes?v.quiz.time_limit_minutes*60:0),C=$(null);K(()=>{v.questions.forEach(r=>{r.type==="checkbox"?d.value.answers[r.id]=[]:d.value.answers[r.id]=""}),v.quiz.time_limit_minutes&&x.value>0&&(C.value=setInterval(()=>{x.value--,x.value<=0&&(clearInterval(C.value),N())},1e3))}),X(()=>{C.value&&clearInterval(C.value)});const y=q(()=>Object.values(d.value.answers).filter(r=>Array.isArray(r)?r.length>0:r&&r.trim()!=="").length),M=q(()=>v.questions.length===0?0:y.value/v.questions.length*100),Q=q(()=>y.value===v.questions.length),R=q(()=>{var r;return[{name:"Quizzes",route:"quizzes.index"},{name:((r=v.quiz)==null?void 0:r.title)||"Quiz",route:null}]}),W=r=>{const a=d.value.answers[r];return Array.isArray(a)?a.length>0:a&&a.trim()!==""},H=r=>{const a=Math.floor(r/60),i=r%60;return`${a}:${i.toString().padStart(2,"0")}`},G=async()=>{k.value=!0;try{await B.post(route("quizzes.draft",v.quiz.id),{answers:Object.entries(d.value.answers).map(([r,a])=>({question_id:parseInt(r),answer:a}))})}catch(r){console.error("Draft save error:",r)}finally{k.value=!1}},N=async()=>{w.value=!0;try{await B.post(route("quizzes.store",v.quiz.id),{answers:Object.entries(d.value.answers).map(([r,a])=>({question_id:parseInt(r),answer:a}))})}catch(r){console.error("Submission error:",r)}finally{w.value=!1}},I=(r,a,i)=>{const z=d.value.answers[r]||[];i?z.includes(a)||(d.value.answers[r]=[...z,a]):d.value.answers[r]=z.filter(c=>c!==a)};return(r,a)=>(u(),h(te,{breadcrumbs:R.value},{default:l(()=>[t("div",ve,[t("div",_e,[s(e(_),{class:"mb-6"},{default:l(()=>[s(e(p),{class:"p-6"},{default:l(()=>[t("div",pe,[t("div",xe,[t("h1",he,n(o.quiz.title),1),t("p",be,n(o.quiz.description||"No description available"),1),t("div",ge,[s(e(_),{class:"bg-accent/50"},{default:l(()=>[s(e(p),{class:"p-3"},{default:l(()=>[t("div",we,[s(e(ne),{class:"h-4 w-4 text-primary"}),a[0]||(a[0]=t("p",{class:"text-muted-foreground"},"Pass Threshold",-1))]),t("p",ye,n(o.quiz.pass_threshold)+"%",1)]),_:1})]),_:1}),s(e(_),{class:"bg-accent/50"},{default:l(()=>[s(e(p),{class:"p-3"},{default:l(()=>[t("div",ze,[s(e(oe),{class:"h-4 w-4 text-green-600"}),a[1]||(a[1]=t("p",{class:"text-muted-foreground"},"Total Points",-1))]),t("p",ke,n(o.quiz.total_points||"N/A"),1)]),_:1})]),_:1}),s(e(_),{class:"bg-accent/50"},{default:l(()=>[s(e(p),{class:"p-3"},{default:l(()=>[t("div",$e,[s(e(O),{class:"h-4 w-4 text-blue-600"}),a[2]||(a[2]=t("p",{class:"text-muted-foreground"},"Questions",-1))]),t("p",Ae,n(o.questions.length),1)]),_:1})]),_:1}),s(e(_),{class:"bg-accent/50"},{default:l(()=>[s(e(p),{class:"p-3"},{default:l(()=>[t("div",Ce,[s(e(ue),{class:"h-4 w-4 text-orange-600"}),a[3]||(a[3]=t("p",{class:"text-muted-foreground"},"Time Limit",-1))]),t("p",qe,n(o.quiz.time_limit_minutes?`${o.quiz.time_limit_minutes} min`:"No limit"),1)]),_:1})]),_:1})])]),t("div",Se,[s(e(P),{variant:o.hasExistingAttempt?"secondary":"default"},{default:l(()=>[m(n(o.hasExistingAttempt?"Continuing Attempt":"New Attempt"),1)]),_:1},8,["variant"])])])]),_:1})]),_:1}),o.quiz.time_limit_minutes&&x.value>0?(u(),h(e(_),{key:0,class:"mb-6"},{default:l(()=>[s(e(p),{class:"p-4"},{default:l(()=>[t("div",Te,[t("div",je,[s(e(Y),{class:S(["h-5 w-5 mr-2",x.value<300?"text-destructive":"text-orange-500"])},null,8,["class"]),a[4]||(a[4]=t("span",{class:"text-sm font-medium"},"Time Remaining",-1))]),t("div",Ve,[t("span",{class:S(["text-lg font-bold",x.value<300?"text-destructive":"text-foreground"])},n(H(x.value)),3)])]),t("div",Qe,[s(e(U),{value:x.value/(o.quiz.time_limit_minutes*60)*100,class:S(x.value<300?"text-destructive":"text-primary")},null,8,["value","class"])])]),_:1})]),_:1})):g("",!0),o.hasExistingAttempt?(u(),h(e(D),{key:1,class:"mb-6"},{default:l(()=>[s(e(L),{class:"h-4 w-4"}),s(e(F),null,{default:l(()=>a[5]||(a[5]=[t("div",null,[t("h3",{class:"font-semibold mb-1"},"Continuing Previous Attempt"),t("p",null,"You have an incomplete attempt for this quiz. Your previous answers have been saved. You can modify them before final submission.")],-1)])),_:1})]),_:1})):g("",!0),s(e(_),{class:"mb-6"},{default:l(()=>[s(e(p),{class:"p-4"},{default:l(()=>[t("div",Ne,[a[6]||(a[6]=t("span",{class:"text-sm font-medium"},"Progress",-1)),t("span",Be,n(y.value)+"/"+n(o.questions.length)+" answered",1)]),s(e(U),{value:M.value,class:"w-full"},null,8,["value"])]),_:1})]),_:1}),o.questions.length?(u(),f("div",Ee,[t("form",{onSubmit:Z(N,["prevent"])},[(u(!0),f(T,null,j(o.questions,(i,z)=>(u(),h(e(_),{key:i.id,class:"overflow-hidden"},{default:l(()=>[s(e(se),{class:"bg-gradient-to-r from-accent to-accent/50"},{default:l(()=>[t("div",Pe,[t("div",Ue,[t("div",De,n(z+1),1),s(e(E),{class:"text-lg"},{default:l(()=>[m(" Question "+n(z+1),1)]),_:2},1024)]),t("div",Fe,[s(e(P),{variant:"secondary"},{default:l(()=>[m(n(i.points||"N/A")+" points ",1)]),_:2},1024),t("div",{class:S(["w-3 h-3 rounded-full",W(i.id)?"bg-green-500":"bg-muted"])},null,2)])])]),_:2},1024),s(e(p),{class:"p-6"},{default:l(()=>[t("p",Oe,n(i.question_text),1),i.type==="radio"?(u(),f("div",Ye,[s(e(A),{class:"text-sm font-medium"},{default:l(()=>a[7]||(a[7]=[m("Select one answer:")])),_:1}),s(e(re),{modelValue:d.value.answers[i.id],"onUpdate:modelValue":c=>d.value.answers[i.id]=c,class:"space-y-2"},{default:l(()=>[(u(!0),f(T,null,j(i.options,(c,b)=>(u(),f("div",{key:b,class:"flex items-start space-x-3 p-3 rounded-lg border hover:border-primary hover:bg-accent/50 transition-colors cursor-pointer"},[s(e(ie),{id:`answer-${i.id}-${b}`,value:c,class:"mt-1"},null,8,["id","value"]),s(e(A),{for:`answer-${i.id}-${b}`,class:"text-sm cursor-pointer flex-1"},{default:l(()=>[m(n(c),1)]),_:2},1032,["for"])]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):g("",!0),i.type==="checkbox"?(u(),f("div",Le,[s(e(A),{class:"text-sm font-medium"},{default:l(()=>a[8]||(a[8]=[m("Select all that apply:")])),_:1}),(u(!0),f(T,null,j(i.options,(c,b)=>(u(),f("div",{key:b,class:"flex items-start space-x-3 p-3 rounded-lg border hover:border-primary hover:bg-accent/50 transition-colors cursor-pointer"},[s(e(le),{id:`answer-${i.id}-${b}`,checked:(d.value.answers[i.id]||[]).includes(c),"onUpdate:checked":J=>I(i.id,c,J),class:"mt-1"},null,8,["id","checked","onUpdate:checked"]),s(e(A),{for:`answer-${i.id}-${b}`,class:"text-sm cursor-pointer flex-1"},{default:l(()=>[m(n(c),1)]),_:2},1032,["for"])]))),128))])):g("",!0),i.type==="text"?(u(),f("div",Me,[s(e(A),{class:"text-sm font-medium mb-3"},{default:l(()=>a[9]||(a[9]=[m("Your answer:")])),_:1}),s(e(ae),{modelValue:d.value.answers[i.id],"onUpdate:modelValue":c=>d.value.answers[i.id]=c,rows:"5",placeholder:"Type your answer here...",required:""},null,8,["modelValue","onUpdate:modelValue"]),t("div",Re," Character count: "+n((d.value.answers[i.id]||"").length),1)])):g("",!0)]),_:2},1024)]),_:2},1024))),128)),s(e(_),{class:"mt-8"},{default:l(()=>[s(e(p),{class:"p-6"},{default:l(()=>[t("div",We,[t("div",He,[t("div",Ge,[s(e(de),{class:"w-4 h-4 mr-1 text-green-500"}),t("span",null,n(y.value)+" answered",1)]),t("div",Ie,[s(e(Y),{class:"w-4 h-4 mr-1 text-muted-foreground"}),t("span",null,n(o.questions.length-y.value)+" remaining",1)])]),t("div",Je,[o.hasExistingAttempt?g("",!0):(u(),h(e(V),{key:0,type:"button",onClick:G,disabled:w.value||k.value,variant:"outline"},{default:l(()=>[k.value?(u(),f("div",Ke)):(u(),h(e(me),{key:0,class:"w-4 h-4 mr-2"})),m(" "+n(k.value?"Saving...":"Save Draft"),1)]),_:1},8,["disabled"])),s(e(V),{type:"submit",disabled:w.value||!Q.value},{default:l(()=>[w.value?(u(),f("div",Xe)):(u(),h(e(ce),{key:0,class:"w-4 h-4 mr-2"})),m(" "+n(w.value?"Submitting...":o.hasExistingAttempt?"Complete Quiz":"Submit Quiz"),1)]),_:1},8,["disabled"])])]),Q.value?g("",!0):(u(),h(e(D),{key:0,class:"mt-4",variant:"destructive"},{default:l(()=>[s(e(L),{class:"h-4 w-4"}),s(e(F),null,{default:l(()=>[t("p",null,[a[10]||(a[10]=m(" Please answer all questions before submitting. ")),t("span",Ze,n(o.questions.length-y.value)+" question(s) remaining.",1)])]),_:1})]),_:1}))]),_:1})]),_:1})],32)])):(u(),h(e(_),{key:3,class:"text-center py-16"},{default:l(()=>[s(e(p),null,{default:l(()=>[t("div",et,[s(e(O),{class:"w-12 h-12 text-muted-foreground"})]),s(e(E),{class:"mb-2"},{default:l(()=>a[11]||(a[11]=[m("No Questions Available")])),_:1}),a[13]||(a[13]=t("p",{class:"text-muted-foreground mb-4"},"This quiz doesn't have any questions yet.",-1)),s(e(V),{asChild:""},{default:l(()=>[s(e(ee),{href:r.route("quizzes.index")},{default:l(()=>[s(e(fe),{class:"w-4 h-4 mr-2"}),a[12]||(a[12]=m(" Back to Quizzes "))]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}))])])]),_:1},8,["breadcrumbs"]))}};export{Lt as default};
