import{C as D,r as q,g as V,o as i,w as _,b as y,e,u as r,m as U,a as d,h as l,t as n,j as N,s as m,f as c,F as f,i as b,v as h,H as $,D as w,P as B,W as M}from"./app-De5aCyOy.js";import{_ as Q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as I}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";const P={class:"py-12 dark"},j={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-card overflow-hidden shadow-sm sm:rounded-lg"},H={class:"p-6"},W={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},E={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},L={class:"mb-6"},R=["value"],T={key:0,class:"text-red-500 text-sm mt-1"},G={class:"mb-6"},J=["value"],K={class:"mb-6"},O={class:"border border-border rounded-md p-4 max-h-96 overflow-y-auto bg-accent"},X={key:0,class:"text-muted-foreground text-center py-4"},Y={key:1,class:"space-y-2"},Z=["id","value"],ee=["for"],te={class:"text-sm font-medium"},se={class:"text-xs text-muted-foreground"},oe={key:0,class:"ml-2"},re={key:0,class:"text-red-500 text-sm mt-1"},ie={class:"text-sm text-muted-foreground mt-2"},de={class:"mb-6"},ne={class:"space-y-2"},le={class:"flex items-center"},ae={class:"flex items-center"},ue={key:0,class:"text-red-500 text-sm mt-1"},me={key:0,class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-md"},ce={class:"flex justify-end space-x-3"},pe=["disabled"],fe={__name:"Create",props:{departments:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]},quizzes:{type:Array,default:()=>[]},selectedDepartmentId:{type:[Number,String,null],default:null}},setup(u){const g=u,o=D({quiz_id:"",user_ids:[],send_notification:"none"}),p=q(g.selectedDepartmentId||""),k=()=>{M.get(route("admin.quiz-assignments.create"),{department_id:p.value},{preserveState:!0,preserveScroll:!0})},z=()=>{o.user_ids=g.users.map(a=>a.id)},A=()=>{o.user_ids=[]},C=()=>{o.post(route("admin.quiz-assignments.store"),{preserveScroll:!0,onSuccess:()=>{o.reset("user_ids","send_notification")}})};return(a,t)=>(i(),V(Q,null,{default:_(()=>{var x,v;return[y(r(U),{title:"Assign Quiz to Users"}),e("div",P,[e("div",j,[e("div",F,[e("div",H,[t[15]||(t[15]=e("h2",{class:"text-2xl font-semibold mb-6 text-foreground"},"Assign Quiz to Users",-1)),(x=a.$page.props.flash)!=null&&x.success?(i(),d("div",W,n(a.$page.props.flash.success),1)):l("",!0),(v=a.$page.props.flash)!=null&&v.error?(i(),d("div",E,n(a.$page.props.flash.error),1)):l("",!0),e("form",{onSubmit:N(C,["prevent"])},[e("div",L,[t[6]||(t[6]=e("label",{for:"quiz",class:"block text-sm font-medium text-foreground mb-2"},[c(" Select Quiz "),e("span",{class:"text-red-500"},"*")],-1)),m(e("select",{id:"quiz","onUpdate:modelValue":t[0]||(t[0]=s=>r(o).quiz_id=s),class:"w-full border-border rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 bg-card text-foreground"},[t[5]||(t[5]=e("option",{value:""},"-- Select a Quiz --",-1)),(i(!0),d(f,null,b(u.quizzes,s=>(i(),d("option",{key:s.id,value:s.id},n(s.title),9,R))),128))],512),[[h,r(o).quiz_id]]),r(o).errors.quiz_id?(i(),d("div",T,n(r(o).errors.quiz_id),1)):l("",!0)]),e("div",G,[t[8]||(t[8]=e("label",{for:"department",class:"block text-sm font-medium text-foreground mb-2"}," Filter by Department ",-1)),m(e("select",{id:"department","onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),onChange:k,class:"w-full border-border rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 bg-card text-foreground"},[t[7]||(t[7]=e("option",{value:""},"-- All Departments --",-1)),(i(!0),d(f,null,b(u.departments,s=>(i(),d("option",{key:s.id,value:s.id},n(s.name),9,J))),128))],544),[[h,p.value]])]),e("div",K,[e("div",{class:"flex justify-between items-center mb-2"},[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-foreground"},[c(" Select Users "),e("span",{class:"text-red-500"},"*")],-1)),e("div",{class:"text-sm"},[e("button",{type:"button",onClick:z,class:"text-indigo-600 hover:text-indigo-800 mr-3"}," Select All "),e("button",{type:"button",onClick:A,class:"text-indigo-600 hover:text-indigo-800"}," Deselect All ")])]),e("div",O,[u.users.length===0?(i(),d("div",X," No users found. Please select a department or check your filters. ")):(i(),d("div",Y,[(i(!0),d(f,null,b(u.users,s=>(i(),d("div",{key:s.id,class:"flex items-center p-2 hover:bg-muted rounded cursor-pointer"},[m(e("input",{id:`user-${s.id}`,type:"checkbox",value:s.id,"onUpdate:modelValue":t[2]||(t[2]=S=>r(o).user_ids=S),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-border rounded"},null,8,Z),[[$,r(o).user_ids]]),e("label",{for:`user-${s.id}`,class:"ml-3 flex-grow cursor-pointer text-foreground"},[e("div",te,n(s.name),1),e("div",se,[c(n(s.email)+" ",1),s.department?(i(),d("span",oe," ("+n(s.department.name)+") ",1)):l("",!0)])],8,ee)]))),128))]))]),r(o).errors.user_ids?(i(),d("div",re,n(r(o).errors.user_ids),1)):l("",!0),e("div",ie,n(r(o).user_ids.length)+" user(s) selected ",1)]),e("div",de,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},[c(" Notification "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ne,[e("div",le,[m(e("input",{id:"notify-none",type:"radio",value:"none","onUpdate:modelValue":t[3]||(t[3]=s=>r(o).send_notification=s),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-border"},null,512),[[w,r(o).send_notification]]),t[10]||(t[10]=e("label",{for:"notify-none",class:"ml-3 text-sm text-foreground cursor-pointer"}," Don't send notification (assign only) ",-1))]),e("div",ae,[m(e("input",{id:"notify-email",type:"radio",value:"email_now","onUpdate:modelValue":t[4]||(t[4]=s=>r(o).send_notification=s),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-border"},null,512),[[w,r(o).send_notification]]),t[11]||(t[11]=e("label",{for:"notify-email",class:"ml-3 text-sm text-foreground cursor-pointer"}," Send email notification now ",-1))])]),r(o).errors.send_notification?(i(),d("div",ue,n(r(o).errors.send_notification),1)):l("",!0)]),r(o).processing?(i(),d("div",me,t[13]||(t[13]=[e("div",{class:"flex items-center"},[e("svg",{class:"animate-spin h-5 w-5 text-blue-600 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-blue-700"},"Processing assignment...")],-1)]))):l("",!0),e("div",ce,[y(r(B),{href:"/admin/quiz-assignments",class:"px-4 py-2 border border-border rounded-md text-foreground hover:bg-muted"},{default:_(()=>t[14]||(t[14]=[c(" Cancel ")])),_:1}),e("button",{type:"submit",disabled:r(o).processing,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},n(r(o).processing?"Assigning...":"Assign Quiz"),9,pe)])],32)])])])])]}),_:1}))}},ze=I(fe,[["__scopeId","data-v-09bb2cdb"]]);export{ze as default};
