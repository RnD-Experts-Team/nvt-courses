import{d as Pe,c as k,r as N,C as Fe,l as te,bU as ce,p as Ie,bp as je,g as h,o as d,w as o,e as s,b as l,u as t,P as ve,f as _,j as Ne,a as c,h as f,F as O,i as q,t as u,n as z,s as Ae}from"./app-De5aCyOy.js";import{_ as Ce}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as R}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as Re}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as fe}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as P}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as G}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as H}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as se}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as le}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as re,a as oe,b as ie,c as ne,d as B}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as Be,a as Me}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-DEgpz9bD.js";import{_ as L}from"./index-CNloWqrH.js";import{_ as Oe,a as qe,b as ze,c as Ge}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DykgtCUG.js";import{_ as He}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CQOeOJ-N.js";import{_ as Je}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BoeL_UG-.js";import{_ as Q,a as W}from"./index-Bl7hX8X-.js";import{_ as Ke}from"./Progress.vue_vue_type_script_setup_true_lang-XKk6VJsB.js";import{R as pe}from"./rotate-ccw-D8-XKrTw.js";import{U as Qe}from"./user-D0HtPb4E.js";import{L as X}from"./loader-circle-DgBH8UyT.js";import{C as ue}from"./circle-check-big-BYC-wlwA.js";import{T as We}from"./target-CkYXQ-0W.js";import{T as ge}from"./trending-up-C922m79C.js";import{A as xe}from"./award-CCJqRf4Z.js";import{S as Xe}from"./send-fhPUJJ3W.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";import"./RovingFocusItem-B6yBawHL.js";import"./VisuallyHiddenInput-CPW02NT0.js";import"./circle-PDixcOb7.js";const Ye={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8 space-y-8"},Ze={class:"flex items-center justify-between"},et={class:"flex gap-2"},tt={class:"flex items-center"},st={class:"shrink-0 mr-4"},lt={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-primary/10"},at={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},rt={class:"space-y-2"},ot={class:"space-y-2"},it={class:"relative"},nt={key:0,class:"absolute right-8 top-2.5"},ut={key:0,class:"text-xs text-muted-foreground"},dt={key:1,class:"text-xs text-destructive"},mt={key:2,class:"text-sm text-destructive"},_t={class:"space-y-2"},ct={class:"relative"},vt={key:0,class:"absolute right-8 top-2.5"},ft={key:0,class:"text-xs text-muted-foreground"},pt={key:1,class:"text-xs text-destructive"},gt={key:2,class:"text-sm text-destructive"},xt={class:"space-y-2"},yt={key:0,class:"text-sm text-destructive"},bt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 text-sm"},ht={key:0},kt={key:1},wt={key:2},$t={key:3},St={key:4},Lt={key:5},Tt={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},Dt={class:"flex items-center"},Ut={class:"text-yellow-800 text-sm"},Et={key:0,class:"space-y-6"},Vt={class:"flex items-center justify-between"},Pt={class:"grid gap-6"},Ft={class:"flex items-start justify-between"},It={class:"flex-1"},jt={class:"flex items-center space-x-3 mb-2"},Nt={key:0,class:"text-right"},At={class:"text-2xl font-bold text-foreground"},Ct={class:"text-xs text-muted-foreground"},Rt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Bt={class:"space-y-4"},Mt={class:"flex-1 flex items-center justify-between"},Ot={class:"text-sm text-muted-foreground"},qt={key:0,class:"text-sm text-destructive"},zt={key:0,class:"space-y-4"},Gt={class:"space-y-3"},Ht={class:"flex items-center justify-between"},Jt={class:"flex items-center justify-between"},Kt={class:"text-sm font-bold"},Qt={class:"mt-6 space-y-2"},Wt={key:0,class:"text-sm text-destructive"},Xt={class:"flex items-center"},Yt={class:"shrink-0 mr-4"},Zt={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-green-100"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},ts={class:"flex items-center"},ss={class:"flex items-center"},ls={key:1,class:"text-xl font-bold text-gray-600"},as={class:"grid grid-cols-2 gap-4 text-sm text-blue-700"},rs={class:"col-span-2"},os={class:"space-y-2"},is={key:0,class:"text-sm text-destructive"},ns={key:2,class:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4"},us={key:2},ds={key:3},ms={class:"flex items-start"},_s={class:"shrink-0 mr-4"},cs={class:"flex items-center justify-center h-12 w-12 rounded-full bg-green-100"},vs={class:"flex-1"},fs={class:"font-semibold"},ps={class:"grid grid-cols-2 gap-4 text-sm"},gs={class:"font-medium"},xs={class:"font-medium"},ys={class:"font-medium"},bs={class:"font-medium"},hs={class:"font-medium"},ks={key:0},ws={class:"font-medium"},$s={key:1},hl=Pe({__name:"UserEvaluation",props:{users:{},categories:{},departments:{},courses:{},incentives:{},performanceLevels:{},userLevels:{}},setup(ye){const E=ye,J=k(()=>E.users||[]),w=k(()=>E.categories||[]),be=k(()=>E.departments||[]),M=k(()=>E.courses||[]),F=k(()=>E.incentives||[]);k(()=>E.userLevels||[]);const Y=k(()=>E.performanceLevels||[]),A=N(!1),Z=N(!1),T=N(J.value),D=N(M.value),I=N(!1),j=N(!1),U=N(!0),i=Fe({user_id:null,course_id:null,department_id:null,evaluation_date:new Date().toISOString().split("T")[0],notes:"",categories:[]}),ee=()=>{i.categories=w.value.map(r=>({category_id:r.id,evaluation_type_id:null,comments:""}))};te(()=>E.categories,()=>{ee()},{immediate:!0});const he=r=>{U.value&&(i.department_id=r==="none"?null:parseInt(r))},ke=r=>{U.value&&(i.user_id=r==="none"?null:parseInt(r))},we=r=>{U.value&&(i.course_id=r==="none"?null:parseInt(r))};te(()=>i.department_id,async r=>{if(U.value){if(r){I.value=!0;try{const e=route("admin.evaluations.users-by-department"),n={department_id:r};console.log("Fetching users for department:",r);const a=await ce.get(e,{params:n});T.value=a.data.users||[]}catch(e){console.error("Error fetching users by department:",e),T.value=[]}finally{I.value=!1}}else T.value=J.value;i.user_id=null,i.course_id=null,D.value=M.value}}),te(()=>i.user_id,async r=>{if(U.value){if(r){j.value=!0;try{const e=route("admin.evaluations.user-courses"),n={user_id:r},a=await ce.get(e,{params:n});D.value=a.data.courses||[]}catch(e){console.error("Error fetching user courses:",e);const n=T.value.find(a=>a.id===r);D.value=(n==null?void 0:n.completed_courses)||[]}finally{j.value=!1}}else D.value=M.value;i.course_id=null}});const p=k(()=>i.user_id&&T.value.find(r=>r.id===i.user_id)||null),S=k(()=>i.course_id&&D.value.find(r=>r.id===i.course_id)||null),V=(r,e)=>{if(!e)return null;const n=w.value.find(a=>a.id===r);return n&&n.types.find(a=>a.id===e)||null},v=k(()=>i.categories.reduce((r,e)=>{const n=V(e.category_id,e.evaluation_type_id);return r+((n==null?void 0:n.score_value)||0)},0)),b=k(()=>{if(!v.value||v.value===0)return null;const r=de(v.value);if(Y.value.length>0){const e=Y.value.find(n=>n.level===r);if(e)return e}if(r){let e,n,a,y,g,m;switch(r){case 1:e="Outstanding",n="green",a="badge-success",y=13,g=15,m="Consistently exceeds expectations";break;case 2:e="Reliable",n="blue",a="badge-info",y=10,g=12,m="Meets expectations consistently";break;case 3:e="Developing",n="yellow",a="badge-warning",y=7,g=9,m="Meets some expectations, needs improvement";break;case 4:e="Underperforming",n="red",a="badge-danger",y=0,g=6,m="Does not meet expectations";break}return{level:r,label:e,color:n,badge_class:a,min_score:y,max_score:g,description:m}}return null});k(()=>{if(v.value===0||!p.value)return 0;const r=p.value;if(r.user_level&&r.user_level_tier){const n=F.value.find(a=>a.user_level_id===r.user_level.id&&a.user_level_tier_id===r.user_level_tier.id&&v.value>=a.min_score&&v.value<=a.max_score);if(n)return parseFloat(n.incentive_amount.toString())}if(r.user_level){const n=F.value.find(a=>a.user_level_id===r.user_level.id&&!a.user_level_tier_id&&v.value>=a.min_score&&v.value<=a.max_score);if(n)return parseFloat(n.incentive_amount.toString())}const e=F.value.find(n=>!n.user_level_id&&!n.user_level_tier_id&&v.value>=n.min_score&&v.value<=n.max_score);return e?parseFloat(e.incentive_amount.toString()):0}),k(()=>{if(v.value===0||!p.value)return null;const r=p.value;let e=null;return r.user_level&&r.user_level_tier&&(e=F.value.find(n=>n.user_level_id===r.user_level.id&&n.user_level_tier_id===r.user_level_tier.id&&v.value>=n.min_score&&v.value<=n.max_score)),!e&&r.user_level&&(e=F.value.find(n=>n.user_level_id===r.user_level.id&&!n.user_level_tier_id&&v.value>=n.min_score&&v.value<=n.max_score)),e||(e=F.value.find(n=>!n.user_level_id&&!n.user_level_tier_id&&v.value>=n.min_score&&v.value<=n.max_score)),e?{range:`${e.min_score}-${e.max_score}`,amount:parseFloat(e.incentive_amount.toString()),tier:$e(e),level_info:e.user_level?e.user_level.name:"Global",tier_info:e.user_level_tier?e.user_level_tier.tier_name:null}:null});const $e=(r,e)=>{if(r.user_level&&r.user_level_tier)return`${r.user_level.code} - ${r.user_level_tier.tier_name}`;if(r.user_level)return`${r.user_level.name} Level`;const a=[...F.value].filter(g=>!g.user_level_id&&!g.user_level_tier_id).sort((g,m)=>m.min_score-g.min_score).findIndex(g=>g.min_score===r.min_score&&g.max_score===r.max_score),y=["Exceptional Tier","Excellent Tier","Good Tier","Average Tier","Below Average Tier","Poor Tier","Very Poor Tier"];return a<y.length?y[a]:`Tier ${a+1}`},de=r=>r>=13&&r<=15?1:r>=10&&r<=12?2:r>=7&&r<=9?3:r<7?4:null,Se=r=>{const e=de(r),n=Y.value.find(a=>a.level===e);return n?{label:n.label,variant:n.badge_class.replace("badge-","")||"default",color:n.color}:r>=13?{label:"Outstanding",variant:"success",color:"green"}:r>=10?{label:"Reliable",variant:"info",color:"blue"}:r>=7?{label:"Developing",variant:"warning",color:"yellow"}:r<7?{label:"Underperforming",variant:"destructive",color:"red"}:{label:"No Score",variant:"secondary",color:"gray"}},Le=(r,e)=>{const n=r/e*100;return n>=90?"default":n>=80?"secondary":n>=70?"outline":n>=60?"secondary":"destructive"},Te=(r,e)=>{if(!U.value)return;const n=i.categories.findIndex(a=>a.category_id===r);n!==-1&&(i.categories[n].evaluation_type_id=parseInt(e),me())},me=()=>{Z.value=!!(i.user_id&&i.course_id&&i.evaluation_date&&i.categories.length>0&&i.categories.every(r=>r.evaluation_type_id!==null))};function De(){me(),Z.value&&(A.value=!0)}function Ue(){U.value&&i.post(route("admin.evaluations.user-evaluation.store"),{onSuccess:()=>{A.value=!1,i.reset(),T.value=J.value,D.value=M.value,ee()},onError:r=>{A.value=!1,console.error("Validation errors:",r)}})}function Ee(){U.value&&(i.reset(),T.value=J.value,D.value=M.value,ee())}const Ve=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"User Evaluation",href:null}];return Ie(()=>{U.value=!1}),(r,e)=>{const n=je('else"');return d(),h(Ce,{breadcrumbs:Ve},{default:o(()=>[s("div",Ye,[s("div",null,[s("div",Ze,[e[6]||(e[6]=s("div",null,[s("h1",{class:"text-3xl font-bold text-foreground"},"User Performance Evaluation"),s("p",{class:"mt-2 text-sm text-muted-foreground"},"Assess employee performance with Level + Tier based incentive calculations.")],-1)),s("div",et,[l(t(R),{as:t(ve),href:r.route("admin.evaluations.online.index"),variant:"outline"},{default:o(()=>e[4]||(e[4]=[_(" Online Courses ")])),_:1},8,["as","href"]),l(t(R),{as:t(ve),href:r.route("admin.evaluations.index"),variant:"outline"},{default:o(()=>[l(t(pe),{class:"mr-2 h-4 w-4"}),e[5]||(e[5]=_(" Back to Evaluations "))]),_:1},8,["as","href"])])])]),s("form",{onSubmit:Ne(De,["prevent"]),class:"space-y-8"},[l(t(G),null,{default:o(()=>[l(t(le),null,{default:o(()=>[s("div",tt,[s("div",st,[s("div",lt,[l(t(Qe),{class:"h-6 w-6 text-primary"})])]),s("div",null,[l(t(ae),null,{default:o(()=>e[7]||(e[7]=[_("Select Department, Employee & Course")])),_:1}),l(t(se),null,{default:o(()=>e[8]||(e[8]=[_("Choose department first, then employee, and finally their assigned course")])),_:1})])])]),_:1}),l(t(H),null,{default:o(()=>{var a,y,g;return[s("div",at,[s("div",rt,[l(t(P),{for:"department"},{default:o(()=>e[9]||(e[9]=[_("Select Department")])),_:1}),l(t(re),{"model-value":((a=t(i).department_id)==null?void 0:a.toString())||"none","onUpdate:modelValue":he,disabled:t(i).processing},{default:o(()=>[l(t(oe),{id:"department"},{default:o(()=>[l(t(ie),{placeholder:"All Departments"})]),_:1}),l(t(ne),null,{default:o(()=>[l(t(B),{value:"none"},{default:o(()=>e[10]||(e[10]=[_("All Departments")])),_:1}),(d(!0),c(O,null,q(be.value,m=>(d(),h(t(B),{key:m.id,value:m.id.toString()},{default:o(()=>[_(u(m.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),e[11]||(e[11]=s("p",{class:"text-xs text-muted-foreground"},"Filter employees by department",-1))]),s("div",ot,[l(t(P),{for:"user"},{default:o(()=>e[12]||(e[12]=[_("Select Employee *")])),_:1}),s("div",it,[l(t(re),{"model-value":((y=t(i).user_id)==null?void 0:y.toString())||"none","onUpdate:modelValue":ke,disabled:t(i).processing||I.value},{default:o(()=>[l(t(oe),{id:"user"},{default:o(()=>[l(t(ie),{placeholder:I.value?"Loading users...":"Choose an employee..."},null,8,["placeholder"])]),_:1}),l(t(ne),null,{default:o(()=>[l(t(B),{value:"none"},{default:o(()=>[_(u(I.value?"Loading users...":"Choose an employee..."),1)]),_:1}),(d(!0),c(O,null,q(T.value,m=>(d(),h(t(B),{key:m.id,value:m.id.toString()},{default:o(()=>[_(u(m.name)+" "+u(m.department?`(${m.department.name})`:""),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),I.value?(d(),c("div",nt,[l(t(X),{class:"h-4 w-4 animate-spin text-primary"})])):f("",!0)]),t(i).department_id?T.value.length===0&&!I.value?(d(),c("p",dt,"No employees found in this department")):f("",!0):(d(),c("p",ut,"Showing all employees")),t(i).errors.user_id?(d(),c("span",mt,u(t(i).errors.user_id),1)):f("",!0)]),s("div",_t,[l(t(P),{for:"course"},{default:o(()=>e[13]||(e[13]=[_("Select Assigned Course *")])),_:1}),s("div",ct,[l(t(re),{"model-value":((g=t(i).course_id)==null?void 0:g.toString())||"none","onUpdate:modelValue":we,disabled:t(i).processing||!t(i).user_id||j.value},{default:o(()=>[l(t(oe),{id:"course"},{default:o(()=>[l(t(ie),{placeholder:t(i).user_id?j.value?"Loading courses...":"Choose an assigned course...":"Select employee first..."},null,8,["placeholder"])]),_:1}),l(t(ne),null,{default:o(()=>[l(t(B),{value:"none"},{default:o(()=>[_(u(t(i).user_id?j.value?"Loading courses...":"Choose an assigned course...":"Select employee first..."),1)]),_:1}),(d(!0),c(O,null,q(D.value,m=>(d(),h(t(B),{key:m.id,value:m.id.toString()},{default:o(()=>[_(u(m.title)+" ",1),m.status?(d(),h(t(L),{key:0,variant:m.status==="completed"?"default":"secondary",class:"ml-2 text-xs"},{default:o(()=>[_(u(m.status),1)]),_:2},1032,["variant"])):f("",!0)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),j.value?(d(),c("div",vt,[l(t(X),{class:"h-4 w-4 animate-spin text-primary"})])):f("",!0)]),t(i).user_id?D.value.length===0&&!j.value?(d(),c("p",pt,"This employee has no assigned courses yet")):f("",!0):(d(),c("p",ft,"Select an employee to see their assigned courses")),t(i).errors.course_id?(d(),c("span",gt,u(t(i).errors.course_id),1)):f("",!0)]),s("div",xt,[l(t(P),{for:"date"},{default:o(()=>e[14]||(e[14]=[_("Evaluation Date *")])),_:1}),l(t(Re),{id:"date",type:"date",modelValue:t(i).evaluation_date,"onUpdate:modelValue":e[0]||(e[0]=m=>t(i).evaluation_date=m),disabled:t(i).processing,required:""},null,8,["modelValue","disabled"]),t(i).errors.evaluation_date?(d(),c("span",yt,u(t(i).errors.evaluation_date),1)):f("",!0)])]),p.value&&S.value?(d(),h(t(Q),{key:0,class:"mt-6"},{default:o(()=>[l(t(ue),{class:"h-4 w-4"}),l(t(W),null,{default:o(()=>[s("div",bt,[s("div",null,[e[15]||(e[15]=s("span",{class:"font-medium"},"Employee:",-1)),s("p",null,u(p.value.name),1)]),s("div",null,[e[16]||(e[16]=s("span",{class:"font-medium"},"Course:",-1)),s("p",null,u(S.value.title),1)]),S.value.status?(d(),c("div",ht,[e[17]||(e[17]=s("span",{class:"font-medium"},"Status:",-1)),s("p",null,[l(t(L),{variant:S.value.status==="completed"?"default":"secondary",class:"text-xs"},{default:o(()=>[_(u(S.value.status),1)]),_:1},8,["variant"])])])):f("",!0),S.value.assigned_at?(d(),c("div",kt,[e[18]||(e[18]=s("span",{class:"font-medium"},"Assigned:",-1)),s("p",null,u(new Date(S.value.assigned_at).toLocaleDateString()),1)])):f("",!0),S.value.completed_at?(d(),c("div",wt,[e[19]||(e[19]=s("span",{class:"font-medium"},"Completed:",-1)),s("p",null,u(new Date(S.value.completed_at).toLocaleDateString()),1)])):f("",!0),p.value.department?(d(),c("div",$t,[e[20]||(e[20]=s("span",{class:"font-medium"},"Department:",-1)),s("p",null,u(p.value.department.name),1)])):f("",!0),p.value.user_level?(d(),c("div",St,[e[21]||(e[21]=s("span",{class:"font-medium"},"Level:",-1)),s("p",null,[l(t(L),{variant:"secondary",class:"text-xs"},{default:o(()=>[_(u(p.value.user_level.code)+" - "+u(p.value.user_level.name),1)]),_:1})])])):f("",!0),p.value.user_level_tier?(d(),c("div",Lt,[e[22]||(e[22]=s("span",{class:"font-medium"},"Tier:",-1)),s("p",null,[l(t(L),{variant:"outline",class:"text-xs"},{default:o(()=>[_(u(p.value.user_level_tier.tier_name)+" (T"+u(p.value.user_level_tier.tier_order)+") ",1)]),_:1})])])):f("",!0)]),!p.value.user_level||!p.value.user_level_tier?(d(),c("div",Tt,[s("div",Dt,[l(t(We),{class:"h-4 w-4 text-yellow-600 mr-2"}),s("div",Ut,[e[23]||(e[23]=s("p",{class:"font-medium"},"Incomplete Assignment",-1)),s("p",null," This employee is missing "+u(p.value.user_level?"":"level assignment")+" "+u(!p.value.user_level&&!p.value.user_level_tier?" and ":"")+" "+u(p.value.user_level_tier?"":"tier assignment")+". Performance level calculation may fall back to default values. ",1)])])])):f("",!0)]),_:1})]),_:1})):f("",!0)]}),_:1})]),_:1}),t(i).user_id&&t(i).course_id&&w.value.length>0?(d(),c("div",Et,[s("div",Vt,[e[24]||(e[24]=s("h2",{class:"text-xl font-semibold text-foreground"},"Evaluation Categories",-1)),l(t(L),{variant:"secondary"},{default:o(()=>[_(u(w.value.length)+" categories",1)]),_:1})]),s("div",Pt,[(d(!0),c(O,null,q(t(i).categories,(a,y)=>(d(),h(t(G),{key:a.category_id,class:"hover:shadow-md transition-shadow duration-200"},{default:o(()=>[l(t(le),null,{default:o(()=>{var g,m;return[s("div",Ft,[s("div",It,[s("div",jt,[l(t(ae),{class:"text-lg"},{default:o(()=>{var x;return[_(u(((x=w.value.find($=>$.id===a.category_id))==null?void 0:x.name)||"Category"),1)]}),_:2},1024),l(t(L),{variant:"outline"},{default:o(()=>{var x;return[_(u(((x=w.value.find($=>$.id===a.category_id))==null?void 0:x.weight)||0)+"% weight ",1)]}),_:2},1024)]),l(t(se),null,{default:o(()=>{var x;return[_(u(((x=w.value.find($=>$.id===a.category_id))==null?void 0:x.description)||"No description available"),1)]}),_:2},1024)]),V(a.category_id,a.evaluation_type_id)?(d(),c("div",Nt,[s("div",At,u((g=V(a.category_id,a.evaluation_type_id))==null?void 0:g.score_value),1),s("div",Ct," out of "+u((m=w.value.find(x=>x.id===a.category_id))==null?void 0:m.max_score),1)])):f("",!0)])]}),_:2},1024),l(t(H),null,{default:o(()=>{var g;return[s("div",Rt,[s("div",Bt,[l(t(P),{class:"text-sm font-medium"},{default:o(()=>e[25]||(e[25]=[_("Select Performance Level")])),_:1}),l(t(Be),{"model-value":((g=a.evaluation_type_id)==null?void 0:g.toString())||"","onUpdate:modelValue":m=>Te(a.category_id,m),class:"space-y-2"},{default:o(()=>{var m;return[(d(!0),c(O,null,q(((m=w.value.find(x=>x.id===a.category_id))==null?void 0:m.types)||[],x=>{var $;return d(),c("div",{key:x.id,class:z(["flex items-center space-x-3 p-4 border rounded-lg hover:bg-accent/50 transition-colors",{"border-primary bg-primary/5":a.evaluation_type_id===x.id}])},[l(t(Me),{value:x.id.toString(),id:`type_${a.category_id}_${x.id}`},null,8,["value","id"]),s("div",Mt,[s("div",null,[l(t(P),{for:`type_${a.category_id}_${x.id}`,class:"font-medium cursor-pointer"},{default:o(()=>[_(u(x.type_name),1)]),_:2},1032,["for"]),s("p",Ot,u(x.description),1)]),l(t(L),{variant:Le(x.score_value,(($=w.value.find(K=>K.id===a.category_id))==null?void 0:$.max_score)||100)},{default:o(()=>[_(u(x.score_value)+" pts ",1)]),_:2},1032,["variant"])])],2)}),128))]}),_:2},1032,["model-value","onUpdate:modelValue"]),t(i).errors[`categories.${y}.evaluation_type_id`]?(d(),c("span",qt,u(t(i).errors[`categories.${y}.evaluation_type_id`]),1)):f("",!0)]),V(a.category_id,a.evaluation_type_id)?(d(),c("div",zt,[l(t(Q),null,{default:o(()=>[l(t(ge),{class:"h-4 w-4"}),l(t(W),null,{default:o(()=>{var m,x,$,K,_e;return[e[28]||(e[28]=s("h4",{class:"font-medium mb-3"},"Selected Performance Level",-1)),s("div",Gt,[s("div",Ht,[e[26]||(e[26]=s("span",{class:"text-sm font-medium"},"Performance:",-1)),l(t(L),{variant:Se(((m=V(a.category_id,a.evaluation_type_id))==null?void 0:m.score_value)||0).variant},{default:o(()=>{var C;return[_(u((C=V(a.category_id,a.evaluation_type_id))==null?void 0:C.type_name),1)]}),_:2},1032,["variant"])]),s("div",Jt,[e[27]||(e[27]=s("span",{class:"text-sm font-medium"},"Score:",-1)),s("span",Kt,u((x=V(a.category_id,a.evaluation_type_id))==null?void 0:x.score_value)+" / "+u(($=w.value.find(C=>C.id===a.category_id))==null?void 0:$.max_score),1)]),l(t(Ke),{value:Math.round((((K=V(a.category_id,a.evaluation_type_id))==null?void 0:K.score_value)||0)/(((_e=w.value.find(C=>C.id===a.category_id))==null?void 0:_e.max_score)||100)*100),class:"h-2"},null,8,["value"])])]}),_:2},1024)]),_:2},1024)])):f("",!0)]),s("div",Qt,[l(t(P),{for:`comments_${a.category_id}`},{default:o(()=>e[29]||(e[29]=[_("Detailed Comments & Feedback")])),_:2},1032,["for"]),l(t(fe),{id:`comments_${a.category_id}`,modelValue:a.comments,"onUpdate:modelValue":m=>a.comments=m,rows:"3",disabled:t(i).processing,placeholder:"Provide specific feedback, strengths, areas for improvement, and recommendations..."},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),t(i).errors[`categories.${y}.comments`]?(d(),c("span",Wt,u(t(i).errors[`categories.${y}.comments`]),1)):f("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):f("",!0),t(i).user_id&&t(i).course_id&&t(i).categories.some(a=>a.evaluation_type_id!==null)?(d(),h(t(G),{key:1},{default:o(()=>[l(t(le),null,{default:o(()=>[s("div",Xt,[s("div",Yt,[s("div",Zt,[l(t(ue),{class:"h-6 w-6 text-green-600"})])]),s("div",null,[l(t(ae),null,{default:o(()=>e[30]||(e[30]=[_("Overall Assessment")])),_:1}),l(t(se),null,{default:o(()=>e[31]||(e[31]=[_("Summary with Level + Tier based incentive calculation")])),_:1})])])]),_:1}),l(t(H),null,{default:o(()=>[s("div",es,[l(t(G),{class:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"},{default:o(()=>[l(t(H),{class:"p-4"},{default:o(()=>[s("div",ts,[l(t(ge),{class:"h-8 w-8 text-blue-600 mr-4"}),s("div",null,[e[32]||(e[32]=s("p",{class:"text-sm font-medium text-blue-900"},"Total Score",-1)),s("p",{class:z(["text-2xl font-bold",{"text-emerald-600":v.value>=13,"text-green-600":v.value>=10&&v.value<13,"text-blue-600":v.value>=7&&v.value<10,"text-yellow-600":v.value>=4&&v.value<7,"text-red-600":v.value<4}])},u(v.value),3)])])]),_:1})]),_:1}),l(t(G),{class:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200"},{default:o(()=>[l(t(H),{class:"p-4"},{default:o(()=>[s("div",ss,[l(t(xe),{class:"h-8 w-8 text-green-600 mr-4"}),s("div",null,[e[33]||(e[33]=s("p",{class:"text-sm font-medium text-green-900"},"Performance Level",-1)),b.value?(d(),c("p",{key:0,class:z(["text-xl font-bold",`text-${b.value.color}-600`])},u(b.value.label),3)):(d(),c("p",ls," Not Rated "))])])]),_:1})]),_:1})]),b.value?(d(),h(t(Q),{key:0,class:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"},{default:o(()=>[l(t(xe),{class:"h-4 w-4"}),l(t(W),null,{default:o(()=>[e[37]||(e[37]=s("h4",{class:"font-semibold text-blue-900 mb-2"},"Performance Level Details",-1)),s("div",as,[s("div",null,[e[34]||(e[34]=s("span",{class:"font-medium"},"Level:",-1)),s("p",{class:z(["font-bold",`text-${b.value.color}-600`])},u(b.value.label),3)]),s("div",null,[e[35]||(e[35]=s("span",{class:"font-medium"},"Score Range:",-1)),s("p",null,u(b.value.min_score)+"-"+u(b.value.max_score)+" points",1)]),s("div",rs,[e[36]||(e[36]=s("span",{class:"font-medium"},"Description:",-1)),s("p",null,u(b.value.description),1)])])]),_:1})]),_:1})):f("",!0),s("div",os,[l(t(P),{for:"notes"},{default:o(()=>e[38]||(e[38]=[_("Overall Notes & Recommendations")])),_:1}),l(t(fe),{id:"notes",modelValue:t(i).notes,"onUpdate:modelValue":e[1]||(e[1]=a=>t(i).notes=a),rows:"4",disabled:t(i).processing,placeholder:"Provide overall assessment, key achievements, development areas, goals for improvement, and recommendations for career development..."},null,8,["modelValue","disabled"]),t(i).errors.notes?(d(),c("span",is,u(t(i).errors.notes),1)):f("",!0)])]),_:1})]),_:1})):f("",!0),t(i).user_id&&t(i).course_id?(d(),c("div",ns,[l(t(R),{type:"button",onClick:Ee,variant:"outline",disabled:t(i).processing},{default:o(()=>[l(t(pe),{class:"mr-2 h-4 w-4"}),e[39]||(e[39]=_(" Reset Form "))]),_:1},8,["disabled"]),l(t(R),{type:"submit",disabled:t(i).processing||!Z.value||v.value===0},{default:o(()=>[t(i).processing?(d(),h(t(X),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(d(),h(t(Xe),{key:1,class:"mr-2 h-4 w-4"})),t(i).processing?(d(),c("span",us,"Submitting Evaluation...")):(d(),c("span",ds,"Submit Evaluation"))]),_:1},8,["disabled"])])):f("",!0)],32)]),l(t(Oe),{open:A.value,"onUpdate:open":e[3]||(e[3]=a=>A.value=a)},{default:o(()=>[l(t(qe),{class:"sm:max-w-lg"},{default:o(()=>[l(t(ze),null,{default:o(()=>[s("div",ms,[s("div",_s,[s("div",cs,[l(t(ue),{class:"h-6 w-6 text-green-600"})])]),s("div",vs,[l(t(Ge),null,{default:o(()=>e[40]||(e[40]=[_("Confirm Evaluation Submission")])),_:1}),l(t(He),null,{default:o(()=>{var a;return[e[41]||(e[41]=_(" Please review the evaluation details before submitting. This action will record the performance evaluation for ")),s("span",fs,u((a=p.value)==null?void 0:a.name),1),e[42]||(e[42]=_(". "))]}),_:1})])])]),_:1}),l(t(Q),{class:"my-4"},{default:o(()=>[l(t(W),null,{default:o(()=>{var a,y,g,m;return[e[50]||(e[50]=s("h4",{class:"font-medium mb-2"},"Evaluation Summary",-1)),s("div",ps,[s("div",null,[e[43]||(e[43]=s("span",{class:"text-muted-foreground"},"Employee:",-1)),s("p",gs,u((a=p.value)==null?void 0:a.name),1)]),s("div",null,[e[44]||(e[44]=s("span",{class:"text-muted-foreground"},"Course:",-1)),s("p",xs,u((y=S.value)==null?void 0:y.title),1)]),s("div",null,[e[45]||(e[45]=s("span",{class:"text-muted-foreground"},"Date:",-1)),s("p",ys,u(t(i).evaluation_date),1)]),s("div",null,[e[46]||(e[46]=s("span",{class:"text-muted-foreground"},"Total Score:",-1)),s("p",bs,u(v.value),1)]),s("div",null,[e[48]||(e[48]=s("span",{class:"text-muted-foreground"},"Performance Level:",-1)),s("p",hs,[b.value?(d(),h(t(L),{key:0,class:z(`bg-${b.value.color}-100 text-${b.value.color}-800 border-${b.value.color}-200`)},{default:o(()=>[_(u(b.value.label),1)]),_:1},8,["class"])):(d(),h(t(L),{key:1,variant:"secondary"},{default:o(()=>e[47]||(e[47]=[_(" Not Rated ")])),_:1}))])]),(g=p.value)!=null&&g.user_level&&((m=p.value)!=null&&m.user_level_tier)?(d(),c("div",ks,[e[49]||(e[49]=s("span",{class:"text-muted-foreground"},"Level + Tier:",-1)),s("p",ws,u(p.value.user_level.code)+" - "+u(p.value.user_level_tier.tier_name),1)])):f("",!0)])]}),_:1})]),_:1}),l(t(Je),null,{default:o(()=>[l(t(R),{onClick:e[2]||(e[2]=a=>A.value=!1),variant:"outline"},{default:o(()=>e[51]||(e[51]=[_(" Cancel ")])),_:1}),l(t(R),{onClick:Ue,disabled:t(i).processing},{default:o(()=>[t(i).processing?(d(),h(t(X),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):f("",!0),t(i).processing?(d(),c("span",$s,"Submitting...")):f("",!0),Ae((d(),c("span",null,e[52]||(e[52]=[_("Confirm & Submit")]))),[[n]])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}});export{hl as default};
