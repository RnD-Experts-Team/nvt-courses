import{d as te,r as q,B as ae,p as le,c as g,W as re,a as v,o,b as l,u as t,m as ne,w as r,e as s,g as b,h as S,t as u,n as z,f as p,F as j,i as F}from"./app-De5aCyOy.js";import{q as ie,f as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as w}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as y}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as P}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as W}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_}from"./index-CNloWqrH.js";import{_ as ue}from"./Progress.vue_vue_type_script_setup_true_lang-XKk6VJsB.js";import{_ as me}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as N,a as M}from"./index-Bl7hX8X-.js";import{C as de}from"./clock-BXDw5ZYb.js";import{S as K}from"./send-fhPUJJ3W.js";import{C as U}from"./circle-check-big-BYC-wlwA.js";import{C as ce}from"./chevron-left-Ci-PwYhm.js";import{T as pe}from"./triangle-alert-QBZ4KeJk.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./useForwardExpose-Cyi8rQxf.js";import"./nullish-CHIgUVhi.js";const fe={class:"w-full max-w-7xl mx-auto space-y-4 sm:space-y-6 px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8 pb-20 sm:pb-24"},xe={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},be={class:"flex-1 min-w-0"},ve={class:"text-base sm:text-lg lg:text-xl font-bold break-words truncate"},ge={class:"flex items-center gap-2 sm:gap-3 shrink-0"},he={class:"tabular-nums"},we={class:"flex flex-col xs:flex-row items-start xs:items-center justify-between gap-3 xs:gap-4 mb-3"},ye={class:"text-left xs:text-right"},_e={class:"text-xl sm:text-2xl font-bold text-blue-900 dark:text-blue-100"},ke={class:"text-xs sm:text-sm text-blue-700 dark:text-blue-300"},Ce={class:"text-xs text-blue-600 dark:text-blue-400 mt-2 text-center"},qe={class:"flex flex-wrap gap-1.5 sm:gap-2"},Se={class:"flex flex-col xs:flex-row items-start xs:items-center justify-between gap-2 sm:gap-3"},ze={class:"flex flex-wrap items-center gap-1.5 sm:gap-2"},$e={key:0,class:"space-y-2 sm:space-y-3"},Te=["onClick"],Ae={class:"flex items-center justify-center mt-0.5 shrink-0"},Qe={class:"flex-1 min-w-0"},Oe={class:"flex items-start gap-1.5 sm:gap-2"},je={class:"font-medium text-primary text-xs sm:text-sm shrink-0"},Ne={key:1,class:"space-y-2 sm:space-y-3"},Me={class:"flex items-center justify-between gap-2 sm:gap-3"},Le={class:"hidden md:block text-xs sm:text-sm text-muted-foreground whitespace-nowrap"},rs=te({__name:"Take",props:{module:{},course:{},quiz:{},attempt:{},questions:{},existingAnswers:{},timeRemaining:{}},setup(D){const i=D,J=[{name:"My Courses",href:"/courses-online"},{name:i.course.name,href:`/courses-online/${i.course.id}`},{name:i.module.name,href:`/courses-online/${i.course.id}`},{name:"Taking Quiz",href:""}],f=q(0),x=q({}),k=q(!1),m=q(i.timeRemaining);let $=null;ae(()=>{i.existingAnswers&&(x.value={...i.existingAnswers}),i.quiz.time_limit_minutes&&m.value!==null&&(m.value=Math.floor(m.value),X())}),le(()=>{$&&clearInterval($)});const X=()=>{$=setInterval(()=>{m.value!==null&&m.value>0?m.value--:m.value===0&&O()},1e3)},L=g(()=>{if(m.value===null)return null;Math.floor(m.value);const a=Math.floor(m.value/60),e=m.value%60;return`${a}:${e.toString().padStart(2,"0")}`}),B=g(()=>m.value!==null&&m.value<60),d=g(()=>i.questions[f.value]),I=g(()=>Object.keys(x.value).filter(e=>{const n=x.value[parseInt(e)];return n&&n.length>0&&n.some(c=>c.trim()!=="")}).length/i.questions.length*100),V=g(()=>Object.keys(x.value).filter(a=>{const e=x.value[parseInt(a)];return e&&e.length>0&&e.some(n=>n.trim()!=="")}).length),T=a=>{a>=0&&a<i.questions.length&&(Y(),f.value=a)},G=()=>T(f.value+1),H=()=>T(f.value-1),A=()=>x.value[d.value.id]||[],Q=(a,e)=>{x.value[a]=e},Z=a=>{const e=d.value,n=A();if(e.type==="radio")Q(e.id,[a]);else if(e.type==="checkbox"){const c=n.indexOf(a);c>-1?n.splice(c,1):n.push(a),Q(e.id,[...n])}},ee=a=>{Q(d.value.id,[a])},C=a=>A().includes(a),R=a=>{const e=x.value[a];return e&&e.length>0&&e.some(n=>n.trim()!=="")},Y=()=>{var n;const a=d.value,e=x.value[a.id];e&&fetch(route("courses-online.modules.quiz.save-answer",{courseOnline:i.course.id,courseModule:i.module.id,attempt:i.attempt.id}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""},body:JSON.stringify({question_id:a.id,answer:e})}).catch(console.error)},O=()=>{if(k.value)return;k.value=!0,Y();const a=Object.entries(x.value).map(([e,n])=>({question_id:parseInt(e),answer:n}));re.post(route("courses-online.modules.quiz.submit",{courseOnline:i.course.id,courseModule:i.module.id,attempt:i.attempt.id}),{answers:a})},E=()=>{const a=i.questions.length-V.value;a>0?confirm(`You have ${a} unanswered question(s). Are you sure you want to submit?`)&&O():O()};return(a,e)=>(o(),v(j,null,[l(t(ne),{title:`Quiz - ${a.quiz.title}`},null,8,["title"]),l(oe,{breadcrumbs:J},{default:r(()=>[s("div",fe,[l(t(w),{class:"sticky top-0 z-10 shadow-md"},{default:r(()=>[l(t(y),{class:"p-3 sm:p-4"},{default:r(()=>[s("div",xe,[s("div",be,[s("h1",ve,u(a.quiz.title),1)]),s("div",ge,[L.value?(o(),v("div",{key:0,class:z(["flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2.5 rounded-lg font-mono text-base sm:text-lg font-bold min-w-[100px] sm:min-w-[120px] justify-center",B.value?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300 animate-pulse":"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"])},[l(t(de),{class:"h-4 w-4 sm:h-5 sm:w-5 shrink-0"}),s("span",he,u(L.value),1)],2)):S("",!0),l(t(h),{onClick:E,disabled:k.value,size:"default",class:"shrink-0"},{default:r(()=>[l(t(K),{class:"h-4 w-4 mr-1.5 sm:mr-2"}),e[1]||(e[1]=s("span",{class:"hidden sm:inline"},"Submit Quiz",-1)),e[2]||(e[2]=s("span",{class:"sm:hidden"},"Submit",-1))]),_:1},8,["disabled"])])])]),_:1})]),_:1}),l(t(w),{class:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950 dark:to-purple-950 border-blue-200 dark:border-blue-800"},{default:r(()=>[l(t(y),{class:"py-3 sm:py-4"},{default:r(()=>[s("div",we,[e[3]||(e[3]=s("div",{class:"flex-1"},[s("span",{class:"text-xs sm:text-sm font-medium text-blue-900 dark:text-blue-100"},"Your Progress"),s("p",{class:"text-xs text-blue-700 dark:text-blue-300 mt-0.5 hidden xs:block"},"Keep going! You're doing great ðŸ’ª")],-1)),s("div",ye,[s("span",_e,u(V.value),1),s("span",ke," / "+u(a.questions.length),1)])]),l(t(ue),{"model-value":I.value,class:"h-2 sm:h-3"},null,8,["model-value"]),s("p",Ce,u(Math.round(I.value))+"% Complete ",1)]),_:1})]),_:1}),l(t(w),null,{default:r(()=>[l(t(P),{class:"pb-2 sm:pb-3"},{default:r(()=>[l(t(W),{class:"text-sm sm:text-base"},{default:r(()=>e[4]||(e[4]=[p("Quick Navigation")])),_:1})]),_:1}),l(t(y),null,{default:r(()=>[s("div",qe,[(o(!0),v(j,null,F(a.questions,(n,c)=>(o(),b(t(h),{key:n.id,variant:f.value===c?"default":R(n.id)?"secondary":"outline",size:"sm",class:"w-8 h-8 sm:w-10 sm:h-10 relative text-xs sm:text-sm p-0",onClick:se=>T(c)},{default:r(()=>[p(u(c+1)+" ",1),R(n.id)&&f.value!==c?(o(),b(t(U),{key:0,class:"absolute -top-1 -right-1 h-3 w-3 sm:h-4 sm:w-4 text-green-500 bg-white dark:bg-gray-900 rounded-full"})):S("",!0)]),_:2},1032,["variant","onClick"]))),128))]),e[5]||(e[5]=s("div",{class:"flex flex-wrap items-center gap-2 sm:gap-4 mt-3 text-xs text-muted-foreground"},[s("div",{class:"flex items-center gap-1"},[s("div",{class:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded bg-primary"}),s("span",null,"Current")]),s("div",{class:"flex items-center gap-1"},[s("div",{class:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded bg-secondary"}),s("span",null,"Answered")]),s("div",{class:"flex items-center gap-1"},[s("div",{class:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded border-2"}),s("span",null,"Not Answered")])],-1))]),_:1})]),_:1}),l(t(w),{class:"border-2 border-primary/20"},{default:r(()=>[l(t(P),{class:"bg-gradient-to-r from-primary/5 to-purple-500/5 p-4 sm:p-6"},{default:r(()=>[s("div",Se,[l(t(_),{variant:"default",class:"text-xs sm:text-sm"},{default:r(()=>[p("Question "+u(f.value+1)+" of "+u(a.questions.length),1)]),_:1}),s("div",ze,[d.value.type==="radio"?(o(),b(t(_),{key:0,variant:"outline",class:"text-xs"},{default:r(()=>e[6]||(e[6]=[p(" Single Choice ")])),_:1})):d.value.type==="checkbox"?(o(),b(t(_),{key:1,variant:"outline",class:"text-xs"},{default:r(()=>e[7]||(e[7]=[p(" Multiple Choice ")])),_:1})):(o(),b(t(_),{key:2,variant:"outline",class:"text-xs"},{default:r(()=>e[8]||(e[8]=[p(" Text Answer ")])),_:1})),l(t(_),{variant:"secondary",class:"text-xs sm:text-sm"},{default:r(()=>[p(u(d.value.points)+" pt"+u(d.value.points!==1?"s":""),1)]),_:1})])]),l(t(W),{class:"text-base sm:text-lg lg:text-xl mt-3 sm:mt-4 leading-relaxed break-words"},{default:r(()=>[p(u(d.value.question_text),1)]),_:1})]),_:1}),l(t(y),{class:"space-y-3 sm:space-y-4 p-4 sm:p-6"},{default:r(()=>[d.value.type!=="text"?(o(),v("div",$e,[l(t(N),{class:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800 py-2 sm:py-3"},{default:r(()=>[l(t(M),{class:"text-xs sm:text-sm text-blue-800 dark:text-blue-200"},{default:r(()=>[p(u(d.value.type==="radio"?"ðŸ“Œ Select ONE answer":"ðŸ“Œ Select ALL that apply"),1)]),_:1})]),_:1}),(o(!0),v(j,null,F(d.value.options,(n,c)=>(o(),v("div",{key:c,onClick:se=>Z(n),class:z(["flex items-start gap-2 sm:gap-3 p-3 sm:p-4 rounded-lg border-2 cursor-pointer transition-all duration-200",C(n)?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50 hover:bg-muted/50 hover:shadow-sm"])},[s("div",Ae,[s("div",{class:z(["w-5 h-5 sm:w-6 sm:h-6 rounded flex items-center justify-center border-2 transition-all",d.value.type==="radio"?"rounded-full":"rounded",C(n)?"border-primary bg-primary scale-110":"border-gray-400"])},[C(n)?(o(),b(t(U),{key:0,class:"h-3 w-3 sm:h-4 sm:w-4 text-primary-foreground"})):S("",!0)],2)]),s("div",Qe,[s("div",Oe,[s("span",je,u(String.fromCharCode(65+c))+".",1),s("span",{class:z(["text-sm sm:text-base break-words leading-relaxed",C(n)?"font-medium":""])},u(n),3)])])],10,Te))),128))])):(o(),v("div",Ne,[l(t(N),{class:"bg-purple-50 dark:bg-purple-950 border-purple-200 dark:border-purple-800 py-2 sm:py-3"},{default:r(()=>[l(t(M),{class:"text-xs sm:text-sm text-purple-800 dark:text-purple-200"},{default:r(()=>e[9]||(e[9]=[p(" âœï¸ Write your answer below. This will be manually graded by your instructor. ")])),_:1})]),_:1}),l(t(me),{"model-value":A()[0]||"","onUpdate:modelValue":e[0]||(e[0]=n=>ee(n)),placeholder:"Type your detailed answer here...",rows:"6",class:"text-sm sm:text-base min-h-[120px] sm:min-h-[160px]"},null,8,["model-value"]),e[10]||(e[10]=s("p",{class:"text-xs text-muted-foreground"}," ðŸ’¡ Tip: Be clear and detailed in your response for better evaluation. ",-1))]))]),_:1})]),_:1}),l(t(w),{class:"bg-muted/50"},{default:r(()=>[l(t(y),{class:"py-3 sm:py-4"},{default:r(()=>[s("div",Me,[l(t(h),{variant:"outline",size:"default",onClick:H,disabled:f.value===0,class:"flex-1 sm:flex-initial min-w-0"},{default:r(()=>[l(t(ce),{class:"h-4 w-4 sm:mr-2"}),e[11]||(e[11]=s("span",{class:"hidden xs:inline"},"Previous",-1))]),_:1},8,["disabled"]),s("div",Le," Question "+u(f.value+1)+" of "+u(a.questions.length),1),f.value<a.questions.length-1?(o(),b(t(h),{key:0,size:"default",onClick:G,class:"flex-1 sm:flex-initial min-w-0"},{default:r(()=>[e[12]||(e[12]=s("span",{class:"hidden xs:inline"},"Next",-1)),l(t(ie),{class:"h-4 w-4 sm:ml-2"})]),_:1})):(o(),b(t(h),{key:1,size:"default",onClick:E,disabled:k.value,class:"flex-1 sm:flex-initial bg-green-600 hover:bg-green-700 min-w-0"},{default:r(()=>[l(t(K),{class:"h-4 w-4 sm:mr-2"}),e[13]||(e[13]=s("span",{class:"hidden xs:inline"},"Submit Quiz",-1)),e[14]||(e[14]=s("span",{class:"xs:hidden"},"Submit",-1))]),_:1},8,["disabled"]))])]),_:1})]),_:1}),B.value?(o(),b(t(N),{key:0,variant:"destructive",class:"flex-col sm:flex-row items-start sm:items-center gap-2"},{default:r(()=>[l(t(pe),{class:"h-4 w-4 shrink-0"}),l(t(M),{class:"text-xs sm:text-sm"},{default:r(()=>e[15]||(e[15]=[p(" Less than 1 minute remaining! Your quiz will be automatically submitted when time runs out. ")])),_:1})]),_:1})):S("",!0)])]),_:1})],64))}});export{rs as default};
