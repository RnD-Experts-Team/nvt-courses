import{d as je,r as L,C as B,c as k,p as Le,g as b,o as u,w as a,e as s,b as l,h as S,u as t,n as O,f as n,t as d,a as _,F as V,i as F,P as Ve,j as Fe,W as R}from"./app-De5aCyOy.js";import{_ as Ue}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as Ne}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as U}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as D}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as W}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as G,a as H,b as J,c as K,d as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as P}from"./Checkbox.vue_vue_type_script_setup_true_lang-CJs0Ik0y.js";import{_ as A}from"./index-CNloWqrH.js";import{_ as ie,a as de,b as ue,c as me}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DykgtCUG.js";import{_ as fe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CQOeOJ-N.js";import{_ as ce}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BoeL_UG-.js";import{_ as De,b as Pe}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as Ae,a as Me}from"./index-Bl7hX8X-.js";import{F as Re}from"./filter-Ihqwk31P.js";import{E as qe}from"./eye-Jbp-o3OQ.js";import{U as Te}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import{M as ze}from"./mail-CAROg_fB.js";import{S as Be}from"./send-fhPUJJ3W.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";const Oe={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8 space-y-8"},We={class:"flex items-center justify-between"},Ie={class:"flex space-x-3"},Ge={class:"flex items-center justify-between"},He={class:"flex space-x-2"},Je={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},Ke={class:"space-y-2"},Qe={class:"space-y-2"},Xe={class:"space-y-2"},Ye={class:"space-y-2"},Ze={class:"space-y-2"},et={class:"space-y-2"},tt={class:"mt-4 flex justify-end"},st={key:0},lt={key:1},at={class:"flex items-center justify-between"},ot={class:"flex items-center space-x-4"},nt={class:"text-sm text-muted-foreground"},rt={class:"flex items-center space-x-2"},it={class:"flex space-x-4"},dt={class:"flex items-center space-x-2"},ut={class:"flex items-center space-x-2"},mt={class:"flex items-center space-x-2"},ft={class:"flex space-x-3"},ct={class:"flex items-center justify-between"},vt={class:"text-sm text-muted-foreground"},pt={class:"mt-2 text-sm text-muted-foreground"},_t={key:0,class:"mt-4"},gt={key:1},xt={class:"px-6 py-3 bg-muted border-b"},yt={class:"flex items-center space-x-3"},bt={class:"divide-y"},wt={class:"flex items-start space-x-4"},ht={class:"flex-1"},kt={class:"flex items-center justify-between"},St={class:"text-lg font-semibold text-foreground"},$t={class:"text-sm text-muted-foreground"},Ct={class:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm"},Et={class:"text-muted-foreground ml-1"},jt={class:"text-muted-foreground ml-1"},Lt={key:0},Vt={class:"text-muted-foreground ml-1"},Ft={class:"flex items-center justify-between"},Ut={class:"flex items-center gap-2"},Nt={class:"text-sm font-medium text-foreground"},Dt={class:"flex items-center gap-2"},Pt={class:"text-sm font-medium"},At={class:"flex items-center justify-between"},Mt={class:"divide-y"},Rt={class:"flex items-center justify-between"},qt={class:"text-sm font-medium text-foreground"},Tt={class:"text-sm text-muted-foreground"},zt={class:"text-xs text-muted-foreground"},Bt={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},Ot={class:"ml-1"},Wt={class:"ml-1"},It={class:"ml-1"},Gt={class:"ml-1"},Ht={class:"space-y-4 max-h-96 overflow-y-auto"},Jt={key:0},Kt={class:"font-medium text-foreground mb-2"},Qt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Xt={class:"font-medium text-foreground"},Yt={class:"text-sm text-muted-foreground"},Zt={class:"text-xs text-muted-foreground"},es={class:"space-y-4 py-4"},ts={class:"space-y-2"},ss={class:"space-y-2"},Ws=je({__name:"Notifications",props:{employees:{},departments:{},courses:{},filters:{},recentNotifications:{},preview:{},showPreview:{type:Boolean}},setup(ve){var te,se,le,ae,oe,ne;const m=ve,f=L([]),M=L(!1),E=L(!1),j=L(!1),g=L(["L2"]),w=L(!0),r=B({department_id:((te=m.filters)==null?void 0:te.department_id)||null,course_id:((se=m.filters)==null?void 0:se.course_id)||null,start_date:((le=m.filters)==null?void 0:le.start_date)||"",end_date:((ae=m.filters)==null?void 0:ae.end_date)||"",search:((oe=m.filters)==null?void 0:oe.search)||"",performance_level:((ne=m.filters)==null?void 0:ne.performance_level)||""}),C=B({employee_ids:[],target_manager_levels:[],email_subject:"",start_date:"",end_date:""}),v=B({employee_ids:[],target_manager_levels:[],email_subject:"",custom_message:"",start_date:"",end_date:""}),y=k(()=>m.employees||[]),pe=k(()=>m.departments||[]),_e=k(()=>m.courses||[]),Q=k(()=>m.recentNotifications||[]),N=k(()=>r.department_id||r.course_id||r.start_date||r.end_date||r.search||r.performance_level),X=k(()=>y.value.length>0&&f.value.length===y.value.length),ge=k(()=>f.value.length>0&&f.value.length<y.value.length),Y=k(()=>f.value.length>0&&g.value.length>0),xe=k(()=>[r.department_id,r.course_id,r.start_date,r.end_date,r.search,r.performance_level].filter(Boolean).length);m.showPreview&&m.preview&&(E.value=!0);function ye(){X.value?f.value=[]:f.value=y.value.map(i=>i.id)}function be(){if(!w.value)return;console.log("Starting filter application..."),console.log("Current filter form data:",r.data);const i={department_id:r.department_id||null,course_id:r.course_id||null,start_date:r.start_date||"",end_date:r.end_date||"",search:r.search||"",performance_level:r.performance_level&&r.performance_level!=="all"?r.performance_level:""},e={};for(const[o,p]of Object.entries(i))p!==null&&p!==""&&p!==void 0&&(e[o]=p);console.log("Cleaned filter data:",e),R.get(route("admin.evaluations.notifications"),e,{preserveState:!0,preserveScroll:!0,onStart:()=>{console.log("Filter request started")},onSuccess:()=>{console.log("Filter request successful")},onError:o=>{console.error("Filter errors:",o)},onFinish:()=>{console.log("Filter request finished")}})}function Z(){w.value&&(r.reset(),R.get(route("admin.evaluations.notifications")))}function we(){if(!Y.value||!w.value){console.log("Cannot preview - missing requirements"),console.log("Selected employees:",f.value),console.log("Target levels:",g.value);return}console.log("Starting preview notification..."),console.log("Selected employees:",f.value),console.log("Target levels:",g.value),C.employee_ids=f.value,C.target_manager_levels=g.value,C.email_subject=T(),C.start_date=r.start_date||"",C.end_date=r.end_date||"",console.log("Form data:",C.data),console.log("Route URL:",route("admin.evaluations.notifications.preview")),C.post(route("admin.evaluations.notifications.preview"),{preserveState:!0,onStart:()=>{console.log("Request started")},onSuccess:i=>{console.log("Request successful"),console.log("Page props:",i.props),console.log("Preview prop:",i.props.preview),console.log("ShowPreview prop:",i.props.showPreview),i.props.preview&&(E.value=!0,console.log("Modal should be visible now"))},onError:i=>{console.error("Preview errors:",i)},onFinish:()=>{console.log("Request finished")}})}function he(){if(!m.preview||!w.value)return;const i=m.preview.employees.map(e=>e.id);v.employee_ids=i,v.target_manager_levels=m.preview.summary.target_levels||g.value,v.email_subject=v.email_subject||m.preview.email_subject||T(),v.start_date=r.start_date||"",v.end_date=r.end_date||"",console.log("Sending notifications with data:",{employee_ids:v.employee_ids,target_manager_levels:v.target_manager_levels,email_subject:v.email_subject,start_date:v.start_date,end_date:v.end_date}),v.post(route("admin.evaluations.notifications.send"),{preserveState:!1,onSuccess:()=>{console.log("✅ Notifications sent successfully"),j.value=!1,E.value=!1,f.value=[],g.value=["L2"],R.get(route("admin.evaluations.notifications"),{},{preserveState:!1,preserveScroll:!1,replace:!0,onSuccess:()=>{console.log("✅ Successfully redirected to notifications page")},onError:e=>{console.error("❌ Error redirecting:",e)}})},onError:e=>{console.error("❌ Error sending notifications:",e)}})}function T(){if(f.value.length===0)return"Evaluation Report";const i=y.value.filter(p=>f.value.includes(p.id)),e=[...new Set(i.map(p=>p.department))];return`Evaluation Report - ${e.length===1?e[0]:`${e.length} Departments`} (${f.value.length} Employees)`}function ee(i){return i>=13?{label:"Outstanding",variant:"success",color:"bg-green-100 text-green-800"}:i>=10?{label:"Reliable",variant:"primary",color:"bg-blue-100 text-blue-800"}:i>=7?{label:"Developing",variant:"warning",color:"bg-yellow-100 text-yellow-800"}:i>=0?{label:"Underperforming",variant:"destructive",color:"bg-red-100 text-red-800"}:{label:"Not Rated",variant:"outline",color:"bg-gray-100 text-gray-800"}}function ke(){w.value&&(console.log("Closing preview modal..."),E.value=!1,j.value=!1,R.get(route("admin.evaluations.notifications"),{},{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{console.log("Successfully navigated back to notifications page")},onError:i=>{console.error("Error navigating back:",i)}}))}const Se=i=>{w.value&&(r.department_id=i==="none"?null:parseInt(i))},$e=i=>{w.value&&(r.course_id=i==="none"?null:parseInt(i))},z=(i,e)=>{w.value&&(e?g.value.includes(i)||g.value.push(i):g.value=g.value.filter(o=>o!==i))},Ce=(i,e)=>{w.value&&(e?f.value.includes(i)||f.value.push(i):f.value=f.value.filter(o=>o!==i))},Ee=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"Notifications",href:route("admin.evaluations.notifications")}];return Le(()=>{w.value=!1}),(i,e)=>(u(),b(Ue,{breadcrumbs:Ee},{default:a(()=>[s("div",Oe,[s("div",null,[s("div",We,[e[16]||(e[16]=s("div",null,[s("h1",{class:"text-3xl font-bold text-foreground"},"Evaluation Notifications"),s("p",{class:"mt-2 text-sm text-muted-foreground"}," Send evaluation reports to department managers ")],-1)),s("div",Ie,[l(t(h),{onClick:e[0]||(e[0]=o=>M.value=!M.value),variant:"outline",class:O(["relative",N.value?"border-primary text-primary":""])},{default:a(()=>[l(t(Re),{class:"mr-2 h-4 w-4"}),e[15]||(e[15]=n(" Filters ")),N.value?(u(),b(t(A),{key:0,variant:"secondary",class:"ml-2"},{default:a(()=>[n(d(xe.value),1)]),_:1})):S("",!0)]),_:1},8,["class"])])])]),l(t(De),{open:M.value,"onUpdate:open":e[5]||(e[5]=o=>M.value=o)},{default:a(()=>[l(t(Pe),null,{default:a(()=>[l(t(U),null,{default:a(()=>[l(t(W),null,{default:a(()=>[s("div",Ge,[l(t(I),null,{default:a(()=>e[17]||(e[17]=[n("Filter L1 Employees")])),_:1}),s("div",He,[N.value?(u(),b(t(h),{key:0,onClick:Z,variant:"outline",size:"sm"},{default:a(()=>e[18]||(e[18]=[n(" Clear All ")])),_:1})):S("",!0)])])]),_:1}),l(t(D),null,{default:a(()=>{var o,p;return[s("div",Je,[s("div",Ke,[l(t(x),null,{default:a(()=>e[19]||(e[19]=[n("Department")])),_:1}),l(t(G),{"model-value":((o=t(r).department_id)==null?void 0:o.toString())||"none","onUpdate:modelValue":Se},{default:a(()=>[l(t(H),null,{default:a(()=>[l(t(J),{placeholder:"All Departments"})]),_:1}),l(t(K),null,{default:a(()=>[l(t($),{value:"none"},{default:a(()=>e[20]||(e[20]=[n("All Departments")])),_:1}),(u(!0),_(V,null,F(pe.value,c=>(u(),b(t($),{key:c.id,value:c.id.toString()},{default:a(()=>[n(d(c.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),s("div",Qe,[l(t(x),null,{default:a(()=>e[21]||(e[21]=[n("Course")])),_:1}),l(t(G),{"model-value":((p=t(r).course_id)==null?void 0:p.toString())||"none","onUpdate:modelValue":$e},{default:a(()=>[l(t(H),null,{default:a(()=>[l(t(J),{placeholder:"All Courses"})]),_:1}),l(t(K),null,{default:a(()=>[l(t($),{value:"none"},{default:a(()=>e[22]||(e[22]=[n("All Courses")])),_:1}),(u(!0),_(V,null,F(_e.value,c=>(u(),b(t($),{key:c.id,value:c.id.toString()},{default:a(()=>[n(d(c.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),s("div",Xe,[l(t(x),null,{default:a(()=>e[23]||(e[23]=[n("Start Date")])),_:1}),l(t(q),{type:"date",modelValue:t(r).start_date,"onUpdate:modelValue":e[1]||(e[1]=c=>t(r).start_date=c)},null,8,["modelValue"])]),s("div",Ye,[l(t(x),null,{default:a(()=>e[24]||(e[24]=[n("End Date")])),_:1}),l(t(q),{type:"date",modelValue:t(r).end_date,"onUpdate:modelValue":e[2]||(e[2]=c=>t(r).end_date=c)},null,8,["modelValue"])]),s("div",Ze,[l(t(x),null,{default:a(()=>e[25]||(e[25]=[n("Search Employee")])),_:1}),l(t(q),{type:"text",modelValue:t(r).search,"onUpdate:modelValue":e[3]||(e[3]=c=>t(r).search=c),placeholder:"Search by name or email"},null,8,["modelValue"])]),s("div",et,[l(t(x),null,{default:a(()=>e[26]||(e[26]=[n("Performance Level")])),_:1}),l(t(G),{modelValue:t(r).performance_level,"onUpdate:modelValue":e[4]||(e[4]=c=>t(r).performance_level=c)},{default:a(()=>[l(t(H),null,{default:a(()=>[l(t(J),{placeholder:"All Levels"})]),_:1}),l(t(K),null,{default:a(()=>[l(t($),{value:"all"},{default:a(()=>e[27]||(e[27]=[n("All Levels")])),_:1}),l(t($),{value:"outstanding"},{default:a(()=>e[28]||(e[28]=[n("Outstanding")])),_:1}),l(t($),{value:"reliable"},{default:a(()=>e[29]||(e[29]=[n("Reliable")])),_:1}),l(t($),{value:"developing"},{default:a(()=>e[30]||(e[30]=[n("Developing")])),_:1}),l(t($),{value:"underperforming"},{default:a(()=>e[31]||(e[31]=[n("Underperforming")])),_:1})]),_:1})]),_:1},8,["modelValue"])])]),s("div",tt,[l(t(h),{onClick:be,disabled:t(r).processing},{default:a(()=>[t(r).processing?(u(),_("span",st,"Applying...")):(u(),_("span",lt,"Apply Filters"))]),_:1},8,["disabled"])])]}),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),y.value.length>0?(u(),b(t(U),{key:0},{default:a(()=>[l(t(D),{class:"p-6"},{default:a(()=>[s("div",at,[s("div",ot,[s("div",null,[s("p",nt,d(f.value.length)+" of "+d(y.value.length)+" employees selected ",1)]),s("div",rt,[l(t(x),{class:"text-sm font-medium"},{default:a(()=>e[32]||(e[32]=[n("Send to:")])),_:1}),s("div",it,[s("div",dt,[l(t(P),{id:"l2",checked:g.value.includes("L2"),"onUpdate:checked":e[6]||(e[6]=o=>z("L2",o))},null,8,["checked"]),l(t(x),{for:"l2",class:"text-sm"},{default:a(()=>e[33]||(e[33]=[n("L2 Managers")])),_:1})]),s("div",ut,[l(t(P),{id:"l3",checked:g.value.includes("L3"),"onUpdate:checked":e[7]||(e[7]=o=>z("L3",o))},null,8,["checked"]),l(t(x),{for:"l3",class:"text-sm"},{default:a(()=>e[34]||(e[34]=[n("L3 Managers")])),_:1})]),s("div",mt,[l(t(P),{id:"l4",checked:g.value.includes("L4"),"onUpdate:checked":e[8]||(e[8]=o=>z("L4",o))},null,8,["checked"]),l(t(x),{for:"l4",class:"text-sm"},{default:a(()=>e[35]||(e[35]=[n("L4 Managers")])),_:1})])])])]),s("div",ft,[l(t(h),{onClick:we,disabled:!Y.value||t(C).processing,variant:"outline"},{default:a(()=>[l(t(qe),{class:"mr-2 h-4 w-4"}),e[36]||(e[36]=n(" Preview Notification "))]),_:1},8,["disabled"])])])]),_:1})]),_:1})):S("",!0),l(t(U),null,{default:a(()=>[l(t(W),null,{default:a(()=>[s("div",ct,[l(t(I),null,{default:a(()=>e[37]||(e[37]=[n("L1 Employees with Evaluations")])),_:1}),s("div",vt,d(y.value.length)+" employees found ",1)])]),_:1}),y.value.length===0?(u(),b(t(D),{key:0,class:"p-8 text-center"},{default:a(()=>[l(t(Te),{class:"mx-auto h-12 w-12 text-muted-foreground"}),e[39]||(e[39]=s("h3",{class:"mt-4 text-lg font-medium text-foreground"},"No L1 Employees Found",-1)),s("p",pt,d(N.value?"No employees match your filter criteria.":"There are no L1 employees with evaluations."),1),N.value?(u(),_("div",_t,[l(t(h),{onClick:Z},{default:a(()=>e[38]||(e[38]=[n(" Clear Filters ")])),_:1})])):S("",!0)]),_:1})):(u(),_("div",gt,[s("div",xt,[s("div",yt,[l(t(P),{id:"select-all",checked:X.value,indeterminate:ge.value,"onUpdate:checked":ye},null,8,["checked","indeterminate"]),l(t(x),{for:"select-all",class:"text-sm font-medium"},{default:a(()=>[n(" Select All ("+d(y.value.length)+") ",1)]),_:1})])]),s("div",bt,[(u(!0),_(V,null,F(y.value,o=>(u(),_("div",{key:o.id,class:O(["p-6 hover:bg-muted/50 transition-colors duration-200",{"bg-primary/5":f.value.includes(o.id)}])},[s("div",wt,[l(t(P),{id:`emp-${o.id}`,checked:f.value.includes(o.id),"onUpdate:checked":p=>Ce(o.id,p),class:"mt-1"},null,8,["id","checked","onUpdate:checked"]),s("div",ht,[s("div",kt,[s("div",null,[s("h4",St,d(o.name),1),s("p",$t,d(o.email),1)]),s("div",null,[l(t(A),{variant:"outline"},{default:a(()=>[n(d(o.level),1)]),_:2},1024)])]),s("div",Ct,[s("div",null,[e[40]||(e[40]=s("span",{class:"font-medium text-foreground"},"Department:",-1)),s("span",Et,d(o.department),1)]),s("div",null,[e[41]||(e[41]=s("span",{class:"font-medium text-foreground"},"Evaluations:",-1)),s("span",jt,d(o.evaluation_count),1)]),o.latest_evaluation?(u(),_("div",Lt,[e[42]||(e[42]=s("span",{class:"font-medium text-foreground"},"Latest:",-1)),s("span",Vt,d(o.latest_evaluation.created_at),1)])):S("",!0)]),o.latest_evaluation?(u(),b(t(U),{key:0,class:"mt-3"},{default:a(()=>[l(t(D),{class:"p-3"},{default:a(()=>[s("div",Ft,[s("div",null,[s("div",Ut,[s("p",Nt,d(o.latest_evaluation.course_name),1),l(t(A),{variant:o.latest_evaluation.course_type==="Online"?"default":"secondary",class:"text-xs"},{default:a(()=>[n(d(o.latest_evaluation.course_type),1)]),_:2},1032,["variant"])]),e[43]||(e[43]=s("p",{class:"text-xs text-muted-foreground"},"Latest evaluation",-1))]),s("div",Dt,[l(t(A),{class:O([ee(o.latest_evaluation.total_score).color,"px-2 py-1 rounded-full text-xs font-medium"])},{default:a(()=>[n(d(ee(o.latest_evaluation.total_score).label),1)]),_:2},1032,["class"]),s("span",Pt,d(o.latest_evaluation.total_score)+" points ",1)])])]),_:2},1024)]),_:2},1024)):S("",!0)])])],2))),128))])]))]),_:1}),Q.value.length>0?(u(),b(t(U),{key:1},{default:a(()=>[l(t(W),null,{default:a(()=>[s("div",At,[l(t(I),null,{default:a(()=>e[44]||(e[44]=[n("Recent Notifications")])),_:1}),l(t(h),{as:t(Ve),href:i.route("admin.evaluations.notifications.history"),variant:"link",size:"sm"},{default:a(()=>e[45]||(e[45]=[n(" View All → ")])),_:1},8,["as","href"])])]),_:1}),l(t(D),null,{default:a(()=>[s("div",Mt,[(u(!0),_(V,null,F(Q.value,o=>(u(),_("div",{key:o.id,class:"py-4 first:pt-0 last:pb-0 hover:bg-muted/50 -mx-6 px-6 rounded-lg transition-colors duration-200"},[s("div",Rt,[s("div",null,[s("p",qt,d(o.name),1),s("p",Tt,d(o.department_name)+" • "+d(o.employee_count)+" employees • "+d(o.managers_notified)+" managers ("+d(o.target_manager_level)+") ",1),s("p",zt," Sent by "+d(o.sent_by)+" on "+d(o.sent_at),1)]),l(t(A),{variant:o.status==="sent"?"default":"secondary"},{default:a(()=>[n(d(o.status_label),1)]),_:2},1032,["variant"])])]))),128))])]),_:1})]),_:1})):S("",!0)]),l(t(ie),{open:E.value,"onUpdate:open":e[10]||(e[10]=o=>E.value=o)},{default:a(()=>[m.preview?(u(),b(t(de),{key:0,class:"sm:max-w-4xl z-[100]"},{default:a(()=>[l(t(ue),null,{default:a(()=>[l(t(me),null,{default:a(()=>e[46]||(e[46]=[n("Preview Notification")])),_:1}),l(t(fe),null,{default:a(()=>e[47]||(e[47]=[n(" Review the notification details before sending ")])),_:1})]),_:1}),l(t(Ae),null,{default:a(()=>[l(t(ze),{class:"h-4 w-4"}),l(t(Me),null,{default:a(()=>[s("div",Bt,[s("div",null,[e[48]||(e[48]=s("span",{class:"font-medium"},"Employees:",-1)),s("span",Ot,d(m.preview.summary.total_employees),1)]),s("div",null,[e[49]||(e[49]=s("span",{class:"font-medium"},"Managers:",-1)),s("span",Wt,d(m.preview.summary.total_managers),1)]),s("div",null,[e[50]||(e[50]=s("span",{class:"font-medium"},"Departments:",-1)),s("span",It,d(m.preview.summary.departments.join(", ")),1)]),s("div",null,[e[51]||(e[51]=s("span",{class:"font-medium"},"Levels:",-1)),s("span",Gt,d(m.preview.summary.target_levels.join(", ")),1)])])]),_:1})]),_:1}),s("div",Ht,[(u(!0),_(V,null,F(m.preview.managers,(o,p)=>(u(),_("div",{key:p},[o.length>0?(u(),_("div",Jt,[s("h4",Kt,d(p)+" Managers ("+d(o.length)+")",1),s("div",Qt,[(u(!0),_(V,null,F(o,c=>(u(),b(t(U),{key:c.id,class:"p-3"},{default:a(()=>{var re;return[s("div",null,[s("p",Xt,d(c.name),1),s("p",Yt,d(c.email),1),s("p",Zt,d((re=c.departments)==null?void 0:re.join(", ")),1)])]}),_:2},1024))),128))])])):S("",!0)]))),128))]),l(t(ce),null,{default:a(()=>[l(t(h),{onClick:ke,variant:"outline"},{default:a(()=>e[52]||(e[52]=[n(" Cancel ")])),_:1}),l(t(h),{onClick:e[9]||(e[9]=o=>j.value=!0)},{default:a(()=>[l(t(Be),{class:"mr-2 h-4 w-4"}),e[53]||(e[53]=n(" Send Notifications "))]),_:1})]),_:1})]),_:1})):S("",!0)]),_:1},8,["open"]),l(t(ie),{open:j.value,"onUpdate:open":e[14]||(e[14]=o=>j.value=o)},{default:a(()=>[l(t(de),{class:"sm:max-w-lg z-[110]"},{default:a(()=>[s("form",{onSubmit:Fe(he,["prevent"])},[l(t(ue),null,{default:a(()=>[l(t(me),null,{default:a(()=>e[54]||(e[54]=[n("Send Notifications")])),_:1}),l(t(fe),null,{default:a(()=>e[55]||(e[55]=[n(" Customize the notification before sending ")])),_:1})]),_:1}),s("div",es,[s("div",ts,[l(t(x),{for:"email-subject"},{default:a(()=>e[56]||(e[56]=[n("Email Subject")])),_:1}),l(t(q),{id:"email-subject",modelValue:t(v).email_subject,"onUpdate:modelValue":e[11]||(e[11]=o=>t(v).email_subject=o),placeholder:T(),required:""},null,8,["modelValue","placeholder"])]),s("div",ss,[l(t(x),{for:"custom-message"},{default:a(()=>e[57]||(e[57]=[n("Custom Message (Optional)")])),_:1}),l(t(Ne),{id:"custom-message",modelValue:t(v).custom_message,"onUpdate:modelValue":e[12]||(e[12]=o=>t(v).custom_message=o),rows:"3",placeholder:"Add any additional message for the managers..."},null,8,["modelValue"])])]),l(t(ce),null,{default:a(()=>[l(t(h),{onClick:e[13]||(e[13]=o=>j.value=!1),type:"button",variant:"outline"},{default:a(()=>e[58]||(e[58]=[n(" Cancel ")])),_:1}),l(t(h),{type:"submit",disabled:t(v).processing,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:a(()=>[n(d(t(v).processing?"Sending...":"Send Now"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Ws as default};
