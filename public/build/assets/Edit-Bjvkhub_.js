import{d as P,C as H,g as v,o as n,w as a,e as l,t as d,j,b as r,h as f,u as e,f as i,a as m,n as w,F as $,i as V,P as O}from"./app-De5aCyOy.js";import{_ as q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as z}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as x}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as h}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as b}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as y}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as A,a as F,b as G,c as I,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-CJs0Ik0y.js";import{_ as S}from"./index-CNloWqrH.js";import{c as T,e as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{P as J}from"./pen-line-BnEtwYYX.js";import{E as K}from"./eye-Jbp-o3OQ.js";import{U as Q,X as W}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import{L as Y}from"./loader-circle-DgBH8UyT.js";import{S as Z}from"./save-Cj1WR6gV.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";const ee={class:"px-4 sm:px-0 space-y-6"},se={class:"text-xl sm:text-2xl font-bold text-foreground"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},le={class:"space-y-2"},oe={key:0,class:"text-sm text-destructive"},ie={class:"space-y-2 md:col-span-2"},ne={key:0,class:"text-sm text-destructive"},de={class:"space-y-2 md:col-span-2"},me={key:0,class:"text-sm text-destructive"},ue={class:"flex items-center space-x-4"},ce={class:"flex-1"},fe={class:"text-lg font-semibold text-foreground"},pe={class:"text-sm text-muted-foreground"},_e={key:0,class:"text-sm text-muted-foreground mt-1"},ve={key:1,class:"flex flex-wrap gap-1 mt-2"},ge={key:2,class:"mt-2"},xe={class:"space-y-4"},he={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},be={class:"font-medium"},ye={class:"text-xs text-muted-foreground"},Le={key:0,class:"text-amber-600"},ke={key:0,class:"text-sm text-destructive"},we={class:"flex flex-col sm:flex-row gap-3"},$e={key:2},Ve={key:3},us=P({__name:"Edit",props:{userLevel:Object,existingLevels:Array},setup(u){const p=u,t=H({code:p.userLevel.code,name:p.userLevel.name,hierarchy_level:p.userLevel.hierarchy_level,description:p.userLevel.description,can_manage_levels:p.userLevel.can_manage_levels||[]});function E(){t.put(route("admin.user-levels.update",p.userLevel.id),{onSuccess:()=>{},onError:c=>{console.error("Validation errors:",c)}})}const M=c=>{t.hierarchy_level=c},D=c=>{const s=t.can_manage_levels.indexOf(c);s>-1?t.can_manage_levels.splice(s,1):t.can_manage_levels.push(c)},k=c=>{switch(parseInt(c.toString())){case 1:return{bg:"bg-blue-100",text:"text-blue-600",border:"border-blue-200"};case 2:return{bg:"bg-green-100",text:"text-green-600",border:"border-green-200"};case 3:return{bg:"bg-orange-100",text:"text-orange-600",border:"border-orange-200"};case 4:return{bg:"bg-red-100",text:"text-red-600",border:"border-red-200"};case 5:return{bg:"bg-indigo-100",text:"text-indigo-600",variant:"secondary"};case 6:return{bg:"bg-pink-100",text:"text-pink-600",variant:"secondary"};default:return{bg:"bg-purple-100",text:"text-purple-600",border:"border-purple-200"}}},B=[{name:"Dashboard",href:route("dashboard")},{name:"User Levels",href:route("admin.user-levels.index")},{name:p.userLevel.name,href:route("admin.user-levels.show",p.userLevel.id)},{name:"Edit",href:route("admin.user-levels.edit",p.userLevel.id)}];return(c,s)=>(n(),v(q,{breadcrumbs:B},{default:a(()=>[l("div",ee,[l("div",null,[l("h1",se,"Edit User Level: "+d(u.userLevel.name),1),s[3]||(s[3]=l("p",{class:"text-sm text-muted-foreground mt-1"},"Modify organizational hierarchy level properties and management permissions",-1))]),l("form",{onSubmit:j(E,["prevent"]),class:"max-w-4xl space-y-6"},[r(e(x),null,{default:a(()=>[r(e(y),null,{default:a(()=>[r(e(L),{class:"flex items-center"},{default:a(()=>[r(e(J),{class:"mr-2 h-5 w-5"}),s[4]||(s[4]=i(" Level Configuration "))]),_:1}),r(e(b),null,{default:a(()=>s[5]||(s[5]=[i("Update the basic properties and hierarchy position of this user level")])),_:1})]),_:1}),r(e(h),null,{default:a(()=>[l("div",te,[l("div",re,[r(e(g),{for:"hierarchy_level"},{default:a(()=>s[6]||(s[6]=[i("Hierarchy Level")])),_:1}),r(e(A),{"model-value":e(t).hierarchy_level.toString(),"onUpdate:modelValue":M},{default:a(()=>[r(e(F),{id:"hierarchy_level",disabled:e(t).processing},{default:a(()=>[r(e(G),{placeholder:"Select Level"})]),_:1},8,["disabled"]),r(e(I),null,{default:a(()=>[r(e(_),{value:"1"},{default:a(()=>s[7]||(s[7]=[i("Level 1 (Employees)")])),_:1}),r(e(_),{value:"2"},{default:a(()=>s[8]||(s[8]=[i("Level 2 (Managers)")])),_:1}),r(e(_),{value:"3"},{default:a(()=>s[9]||(s[9]=[i("Level 3 (Senior Managers)")])),_:1}),r(e(_),{value:"4"},{default:a(()=>s[10]||(s[10]=[i("Level 4 (Directors)")])),_:1}),r(e(_),{value:"5"},{default:a(()=>s[11]||(s[11]=[i("Level 5 (Executive)")])),_:1}),r(e(_),{value:"6"},{default:a(()=>s[12]||(s[12]=[i("Level 6 (Business Owners)")])),_:1})]),_:1})]),_:1},8,["model-value"]),s[13]||(s[13]=l("p",{class:"text-xs text-muted-foreground"},"Higher numbers indicate higher authority levels",-1)),e(t).errors.hierarchy_level?(n(),m("div",ae,d(e(t).errors.hierarchy_level),1)):f("",!0)]),l("div",le,[r(e(g),{for:"code"},{default:a(()=>s[14]||(s[14]=[i("Level Code")])),_:1}),r(e(U),{id:"code",modelValue:e(t).code,"onUpdate:modelValue":s[0]||(s[0]=o=>e(t).code=o),disabled:e(t).processing,maxlength:"10",placeholder:"e.g., L1, L2, MGR",required:""},null,8,["modelValue","disabled"]),s[15]||(s[15]=l("p",{class:"text-xs text-muted-foreground"},"Short identifier (e.g., L1, L2, L3, L4)",-1)),e(t).errors.code?(n(),m("div",oe,d(e(t).errors.code),1)):f("",!0)]),l("div",ie,[r(e(g),{for:"name"},{default:a(()=>s[16]||(s[16]=[i("Level Name")])),_:1}),r(e(U),{id:"name",modelValue:e(t).name,"onUpdate:modelValue":s[1]||(s[1]=o=>e(t).name=o),disabled:e(t).processing,placeholder:"e.g., Employee, Direct Manager, Senior Manager",required:""},null,8,["modelValue","disabled"]),e(t).errors.name?(n(),m("div",ne,d(e(t).errors.name),1)):f("",!0)]),l("div",de,[r(e(g),{for:"description"},{default:a(()=>s[17]||(s[17]=[i("Description")])),_:1}),r(e(z),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[2]||(s[2]=o=>e(t).description=o),disabled:e(t).processing,placeholder:"Describe the responsibilities and scope of this level",rows:"3"},null,8,["modelValue","disabled"]),e(t).errors.description?(n(),m("div",me,d(e(t).errors.description),1)):f("",!0)])])]),_:1})]),_:1}),r(e(x),{class:"border-primary/20 bg-primary/5"},{default:a(()=>[r(e(y),null,{default:a(()=>[r(e(L),{class:"flex items-center"},{default:a(()=>[r(e(K),{class:"mr-2 h-5 w-5"}),s[18]||(s[18]=i(" Current Level "))]),_:1}),r(e(b),null,{default:a(()=>s[19]||(s[19]=[i("Current state of this user level in the system")])),_:1})]),_:1}),r(e(h),null,{default:a(()=>[l("div",ue,[r(e(T),{class:"h-16 w-16"},{default:a(()=>[r(e(X),{class:w([[k(e(t).hierarchy_level).bg,k(e(t).hierarchy_level).text],"text-lg font-bold"])},{default:a(()=>[i(d(e(t).code),1)]),_:1},8,["class"])]),_:1}),l("div",ce,[l("div",fe,d(e(t).name),1),l("div",pe,"Hierarchy Level "+d(e(t).hierarchy_level),1),e(t).description?(n(),m("div",_e,d(e(t).description),1)):f("",!0),e(t).can_manage_levels.length>0?(n(),m("div",ve,[(n(!0),m($,null,V(e(t).can_manage_levels,o=>(n(),v(e(S),{key:o,variant:"secondary",class:"text-xs"},{default:a(()=>[i(" Can manage: "+d(o),1)]),_:2},1024))),128))])):f("",!0),u.userLevel.users_count?(n(),m("div",ge,[r(e(S),{variant:"outline"},{default:a(()=>[i(d(u.userLevel.users_count)+" users assigned",1)]),_:1})])):f("",!0)])])]),_:1})]),_:1}),u.existingLevels.length>0?(n(),v(e(x),{key:0},{default:a(()=>[r(e(y),null,{default:a(()=>[r(e(L),{class:"flex items-center"},{default:a(()=>[r(e(Q),{class:"mr-2 h-5 w-5"}),s[20]||(s[20]=i(" Management Permissions "))]),_:1}),r(e(b),null,{default:a(()=>s[21]||(s[21]=[i("Select which levels this level can manage and oversee")])),_:1})]),_:1}),r(e(h),null,{default:a(()=>[l("div",xe,[l("div",he,[(n(!0),m($,null,V(u.existingLevels,o=>(n(),m("div",{key:o.code,class:w(["flex items-center space-x-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors",{"opacity-50":o.id===u.userLevel.id}])},[r(e(R),{id:`manage_${o.code}`,checked:e(t).can_manage_levels.includes(o.code),"onUpdate:checked":N=>N?e(t).can_manage_levels.push(o.code):D(o.code),disabled:e(t).processing||o.id===u.userLevel.id},null,8,["id","checked","onUpdate:checked","disabled"]),r(e(g),{for:`manage_${o.code}`,class:"flex-1 cursor-pointer"},{default:a(()=>[l("div",be,d(o.code)+" - "+d(o.name),1),l("div",ye,[i(" Level "+d(o.hierarchy_level)+" ",1),o.id===u.userLevel.id?(n(),m("span",Le,"(Current Level)")):f("",!0)])]),_:2},1032,["for"])],2))),128))]),s[22]||(s[22]=l("p",{class:"text-xs text-muted-foreground"},"Leave empty if this level cannot manage other users. A level cannot manage itself.",-1)),e(t).errors.can_manage_levels?(n(),m("div",ke,d(e(t).errors.can_manage_levels),1)):f("",!0)])]),_:1})]),_:1})):f("",!0),l("div",we,[r(e(C),{type:"submit",disabled:e(t).processing,class:"w-full sm:w-auto"},{default:a(()=>[e(t).processing?(n(),v(e(Y),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(n(),v(e(Z),{key:1,class:"mr-2 h-4 w-4"})),e(t).processing?(n(),m("span",$e,"Updating Level...")):(n(),m("span",Ve,"Update User Level"))]),_:1},8,["disabled"]),r(e(C),{as:e(O),href:c.route("admin.user-levels.show",u.userLevel.id),variant:"outline",disabled:e(t).processing,class:"w-full sm:w-auto"},{default:a(()=>[r(e(W),{class:"mr-2 h-4 w-4"}),s[23]||(s[23]=i(" Cancel "))]),_:1},8,["as","href","disabled"])])],32)])]),_:1}))}});export{us as default};
