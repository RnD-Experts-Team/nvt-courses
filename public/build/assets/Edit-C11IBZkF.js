import{r as y,C as L,c as w,B as q,a as l,o as a,b as h,e as r,u as d,m as E,w as _,f as C,P as S,j as I,s as c,h as n,E as g,n as b,t as i,G as D,v as M,H as F,F as N}from"./app-De5aCyOy.js";const H={class:"py-6"},P={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},$={class:"mb-8"},A={class:"bg-white dark:bg-card shadow rounded-lg border dark:border-border"},R={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},O={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},G={class:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J=["min"],K={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Q={key:1,class:"mt-2 text-sm text-red-600 dark:text-red-400"},W={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},X={key:0,class:"mt-4 p-4 bg-white dark:bg-background border border-blue-200 dark:border-blue-700 rounded-lg"},Z={class:"flex items-start gap-3"},ee={class:"flex-1"},re={class:"font-medium text-blue-900 dark:text-blue-200"},te={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},de={class:"text-xs text-gray-600 dark:text-muted-foreground mt-2"},oe={class:"flex items-center space-x-6"},se={class:"shrink-0"},le=["src"],ae=["src"],ie={key:2,class:"h-20 w-20 bg-gray-200 dark:bg-muted rounded-lg flex items-center justify-center border dark:border-border"},ne={class:"flex-1"},ue={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},be={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},me={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ge={class:"flex items-center"},fe={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-border"},xe=["disabled"],pe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ve={__name:"Edit",props:{course:{type:Object,required:!0}},setup(f){const u=f,x=y(null),m=y(null),p=y(!1),t=L({name:"",description:"",image:null,difficulty_level:"",estimated_duration:null,is_active:!0,deadline:"",deadline_type:"flexible"}),V=w(()=>{const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().slice(0,16)}),k=w(()=>{if(!t.deadline)return null;const o=new Date(t.deadline);return{formatted:o.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),relative:Math.ceil((o.getTime()-new Date().getTime())/(1e3*60*60*24))}}),U=w(()=>t.name&&t.difficulty_level&&t.deadline&&t.deadline_type);q(()=>{if(t.name=u.course.name||"",t.description=u.course.description||"",t.difficulty_level=u.course.difficulty_level||"",t.estimated_duration=u.course.estimated_duration||null,t.is_active=u.course.is_active??!0,t.deadline_type=u.course.deadline_type||"flexible",u.course.deadline){const o=new Date(u.course.deadline),e=o.getFullYear(),s=String(o.getMonth()+1).padStart(2,"0"),v=String(o.getDate()).padStart(2,"0"),T=String(o.getHours()).padStart(2,"0"),z=String(o.getMinutes()).padStart(2,"0");t.deadline=`${e}-${s}-${v}T${T}:${z}`}});const B=o=>{const e=o.target.files[0];if(e){t.image=e,p.value=!0;const s=new FileReader;s.onload=v=>{m.value=v.target.result},s.readAsDataURL(e)}},j=()=>{t.transform(o=>({...o,_method:"PUT"})).post(route("admin.course-online.update",u.course.id),{onSuccess:()=>{m.value=null,p.value=!1,x.value&&(x.value.value="")}})};return(o,e)=>(a(),l(N,null,[h(d(E),{title:"Edit Course"}),r("div",H,[r("div",P,[r("div",$,[h(d(S),{href:o.route("admin.course-online.index"),class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center mb-4"},{default:_(()=>e[7]||(e[7]=[r("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),C(" Back to Courses ")])),_:1},8,["href"]),e[8]||(e[8]=r("h1",{class:"text-3xl font-bold text-gray-900 dark:text-foreground"},"Edit Course",-1)),e[9]||(e[9]=r("p",{class:"text-gray-600 dark:text-muted-foreground mt-2"},"Update course information and settings",-1))]),r("div",A,[r("form",{onSubmit:I(j,["prevent"]),class:"space-y-8 p-6"},[r("div",null,[e[10]||(e[10]=r("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Course Name * ",-1)),c(r("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>d(t).name=s),type:"text",required:"",class:b(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent placeholder:text-gray-500 dark:placeholder:text-muted-foreground",{"border-red-500 dark:border-red-400":d(t).errors.name}]),placeholder:"Enter course name"},null,2),[[g,d(t).name]]),d(t).errors.name?(a(),l("div",R,i(d(t).errors.name),1)):n("",!0)]),r("div",null,[e[11]||(e[11]=r("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Description ",-1)),c(r("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=s=>d(t).description=s),rows:"4",class:b(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent placeholder:text-gray-500 dark:placeholder:text-muted-foreground resize-none",{"border-red-500 dark:border-red-400":d(t).errors.description}]),placeholder:"Describe what students will learn in this course"},null,2),[[g,d(t).description]]),d(t).errors.description?(a(),l("div",O,i(d(t).errors.description),1)):n("",!0)]),r("div",G,[e[16]||(e[16]=D('<div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><h3 class="text-lg font-semibold text-blue-900 dark:text-blue-200">Course Deadline</h3><span class="bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300 text-xs font-medium px-2.5 py-0.5 rounded-full">Required</span></div><p class="text-sm text-blue-700 dark:text-blue-300 mb-4"> Set a completion deadline for this course - all courses must have a deadline </p>',2)),r("div",Y,[r("div",null,[e[12]||(e[12]=r("label",{for:"deadline",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Deadline Date & Time * ",-1)),c(r("input",{id:"deadline","onUpdate:modelValue":e[2]||(e[2]=s=>d(t).deadline=s),type:"datetime-local",min:V.value,required:"",class:b(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",{"border-red-500 dark:border-red-400":d(t).errors.deadline}])},null,10,J),[[g,d(t).deadline]]),d(t).errors.deadline?(a(),l("div",K,i(d(t).errors.deadline),1)):n("",!0),d(t).deadline?n("",!0):(a(),l("div",Q," Course deadline is required for all courses "))]),r("div",null,[e[14]||(e[14]=r("label",{for:"deadline_type",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Deadline Type * ",-1)),c(r("select",{id:"deadline_type","onUpdate:modelValue":e[3]||(e[3]=s=>d(t).deadline_type=s),required:"",class:b(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",{"border-red-500 dark:border-red-400":d(t).errors.deadline_type}])},e[13]||(e[13]=[r("option",{value:"flexible"},"Flexible - Allow completion after deadline",-1),r("option",{value:"strict"},"Strict - Block access after deadline",-1)]),2),[[M,d(t).deadline_type]]),d(t).errors.deadline_type?(a(),l("div",W,i(d(t).errors.deadline_type),1)):n("",!0)])]),d(t).deadline&&k.value?(a(),l("div",X,[r("div",Z,[e[15]||(e[15]=r("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),r("div",ee,[r("div",re," üìÖ "+i(k.value.formatted),1),r("div",te," ‚è∞ "+i(k.value.relative)+" days from now ",1),r("div",de," Type: "+i(d(t).deadline_type==="flexible"?"Flexible (late completion allowed)":"Strict (access blocked after deadline)"),1)])])])):n("",!0),e[17]||(e[17]=D('<div class="mt-4 p-4 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"><div class="flex items-start gap-2"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg><div class="text-sm"><p class="font-medium text-yellow-800 dark:text-yellow-200">Important:</p><p class="text-yellow-700 dark:text-yellow-300 mt-1"> Course deadlines will be automatically applied to all existing course assignments. Students will receive deadline notifications, and managers will be informed of deadline status in their reports. </p></div></div></div>',1))]),r("div",null,[e[20]||(e[20]=r("label",{for:"image",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Course Image ",-1)),r("div",oe,[r("div",se,[m.value?(a(),l("img",{key:0,src:m.value,alt:"Course preview",class:"h-20 w-20 object-cover rounded-lg border dark:border-border"},null,8,le)):f.course.image_path&&!p.value?(a(),l("img",{key:1,src:f.course.image_path,alt:"Current course image",class:"h-20 w-20 object-cover rounded-lg border dark:border-border"},null,8,ae)):(a(),l("div",ie,e[18]||(e[18]=[r("svg",{class:"w-8 h-8 text-gray-400 dark:text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),r("div",ne,[r("input",{id:"image",ref_key:"imageInput",ref:x,type:"file",accept:"image/*",onChange:B,class:b(["block w-full text-sm text-gray-500 dark:text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 dark:file:bg-blue-900/20 file:text-blue-700 dark:file:text-blue-400 hover:file:bg-blue-100 dark:hover:file:bg-blue-900/30",{"border-red-500 dark:border-red-400":d(t).errors.image}])},null,34),e[19]||(e[19]=r("p",{class:"text-xs text-gray-500 dark:text-muted-foreground mt-1"}," Leave empty to keep current image ",-1)),d(t).errors.image?(a(),l("div",ue,i(d(t).errors.image),1)):n("",!0)])])]),r("div",ce,[r("div",null,[e[22]||(e[22]=r("label",{for:"difficulty_level",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Difficulty Level * ",-1)),c(r("select",{id:"difficulty_level","onUpdate:modelValue":e[4]||(e[4]=s=>d(t).difficulty_level=s),required:"",class:b(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent",{"border-red-500 dark:border-red-400":d(t).errors.difficulty_level}])},e[21]||(e[21]=[r("option",{value:""},"Select difficulty",-1),r("option",{value:"beginner"},"Beginner",-1),r("option",{value:"intermediate"},"Intermediate",-1),r("option",{value:"advanced"},"Advanced",-1)]),2),[[M,d(t).difficulty_level]]),d(t).errors.difficulty_level?(a(),l("div",be,i(d(t).errors.difficulty_level),1)):n("",!0)]),r("div",null,[e[23]||(e[23]=r("label",{for:"estimated_duration",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Estimated Duration (minutes) ",-1)),c(r("input",{id:"estimated_duration","onUpdate:modelValue":e[5]||(e[5]=s=>d(t).estimated_duration=s),type:"number",min:"1",class:b(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent placeholder:text-gray-500 dark:placeholder:text-muted-foreground",{"border-red-500 dark:border-red-400":d(t).errors.estimated_duration}]),placeholder:"e.g. 120"},null,2),[[g,d(t).estimated_duration,void 0,{number:!0}]]),d(t).errors.estimated_duration?(a(),l("div",me,i(d(t).errors.estimated_duration),1)):n("",!0)])]),r("div",ge,[c(r("input",{id:"is_active","onUpdate:modelValue":e[6]||(e[6]=s=>d(t).is_active=s),type:"checkbox",class:"h-4 w-4 text-blue-600 dark:text-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 border-gray-300 dark:border-border rounded bg-white dark:bg-background"},null,512),[[F,d(t).is_active]]),e[24]||(e[24]=r("label",{for:"is_active",class:"ml-2 block text-sm text-gray-900 dark:text-foreground"}," Make this course active (students can be assigned) ",-1))]),r("div",fe,[h(d(S),{href:o.route("admin.course-online.index"),class:"px-6 py-3 border border-gray-300 dark:border-border rounded-md text-gray-700 dark:text-foreground bg-white dark:bg-background hover:bg-gray-50 dark:hover:bg-muted transition-colors duration-200"},{default:_(()=>e[25]||(e[25]=[C(" Cancel ")])),_:1},8,["href"]),r("button",{type:"submit",disabled:d(t).processing||!U.value,class:"px-6 py-3 border border-transparent rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-600 hover:bg-blue-700 dark:hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-white dark:focus:ring-offset-background transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[d(t).processing?(a(),l("svg",pe,e[26]||(e[26]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):n("",!0),r("span",null,i(d(t).processing?"Updating...":"Update Course"),1)],8,xe)])],32)])])])],64))}};export{ve as default};
