import{d as I,r as G,W as J,l as K,g as N,o as i,w as r,e as s,b as e,a as m,u as t,f as n,t as d,F as x,i as g,h as F,n as S}from"./app-De5aCyOy.js";import{_ as M}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{l as Q}from"./lodash-D8CZwZrT.js";import{_ as T}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as c}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as p}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as X}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as h}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as Y,a as Z,b as tt,c as et,d as U}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as w}from"./index-CNloWqrH.js";import{c as P,d as B,e as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{D as st}from"./download-ziV5naxV.js";import{B as O}from"./building-DFaXZIiz.js";import{U as ot}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import{C as z}from"./chart-column-CQTiunbh.js";import{T as L}from"./trophy-B-lSYcu6.js";import{F as rt}from"./filter-Ihqwk31P.js";import{T as at}from"./triangle-alert-QBZ4KeJk.js";import"./index-shR_F4Lk.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./index-D3npKzxP.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";const lt={class:"px-4 sm:px-0 space-y-6"},dt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},nt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},it={class:"flex items-center"},mt={class:"ml-4"},ft={class:"text-2xl font-bold text-foreground"},ut={class:"flex items-center"},_t={class:"ml-4"},ct={class:"text-2xl font-bold text-foreground"},pt={class:"flex items-center"},xt={class:"ml-4"},gt={class:"text-2xl font-bold text-foreground"},vt={class:"flex items-center"},bt={class:"ml-4"},ht={class:"text-2xl font-bold text-foreground"},yt={class:"flex items-center"},wt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Dt={class:"space-y-2"},$t={class:"space-y-2"},kt={class:"space-y-2"},Ct={class:"mt-4 flex justify-end"},Vt={key:0,class:"space-y-8"},jt={class:"flex items-center justify-between border-b pb-2"},At={class:"text-xl font-semibold flex items-center"},Nt={class:"text-sm text-muted-foreground"},Ft={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},St={class:"space-y-4"},Tt={class:"flex items-center gap-3"},Ut={class:"flex items-center justify-center w-6 h-6 rounded-full bg-green-200 text-green-800 font-bold text-xs"},Pt={class:"font-medium text-sm"},Bt={class:"text-xs text-muted-foreground"},Et={class:"text-right"},Rt={class:"text-xs text-muted-foreground mt-1"},Ot={key:0,class:"text-center py-4 text-muted-foreground text-sm"},zt={class:"space-y-4"},Lt={class:"flex items-center gap-3"},Wt={class:"font-medium text-sm"},qt={class:"text-xs text-muted-foreground"},Ht={class:"text-right"},It={class:"text-xs text-muted-foreground mt-1"},Gt={key:0,class:"text-center py-4 text-muted-foreground text-sm"},Jt={key:1,class:"text-center py-12"},Kt={class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4"},Ue=I({__name:"DepartmentPerformance",props:{departments:Array,reportData:Array,stats:Object,filters:Object},setup(u){var C,V,j;const v=u,W=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Department Performance",href:route("admin.reports.course-online.department-performance")}],f=G({department_id:((C=v.filters)==null?void 0:C.department_id)||"",date_from:((V=v.filters)==null?void 0:V.date_from)||"",date_to:((j=v.filters)==null?void 0:j.date_to)||""}),D=Q.debounce(()=>{const _={...f.value};J.get(route("admin.reports.course-online.department-performance"),_,{preserveState:!0,replace:!0})},500);K(f,()=>{D()},{deep:!0});const q=()=>{f.value={department_id:"",date_from:"",date_to:""},D()},H=()=>{const _=new URLSearchParams(f.value).toString();window.location.href=route("admin.reports.course-online.export.department-performance")+"?"+_},$=_=>_>=85?"bg-green-100 text-green-800 border-green-200":_>=70?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",k=_=>_.split(" ").map(o=>o[0]).join("").toUpperCase().substring(0,2);return(_,o)=>(i(),N(M,{breadcrumbs:W},{default:r(()=>[s("div",lt,[s("div",dt,[o[4]||(o[4]=s("div",null,[s("h1",{class:"text-xl sm:text-2xl font-bold text-foreground"},"Department Performance Report"),s("p",{class:"text-sm text-muted-foreground mt-1"},"Top and bottom performers by department based on evaluation scores")],-1)),e(t(T),{onClick:H,class:"w-full sm:w-auto"},{default:r(()=>[e(t(st),{class:"mr-2 h-4 w-4"}),o[3]||(o[3]=n(" Export to CSV "))]),_:1})]),s("div",nt,[e(t(c),null,{default:r(()=>[e(t(p),{class:"p-6"},{default:r(()=>{var a;return[s("div",it,[e(t(O),{class:"h-8 w-8 text-blue-600"}),s("div",mt,[o[5]||(o[5]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Departments",-1)),s("p",ft,d(((a=u.stats)==null?void 0:a.total_departments)||0),1)])])]}),_:1})]),_:1}),e(t(c),null,{default:r(()=>[e(t(p),{class:"p-6"},{default:r(()=>{var a;return[s("div",ut,[e(t(ot),{class:"h-8 w-8 text-purple-600"}),s("div",_t,[o[6]||(o[6]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Users Evaluated",-1)),s("p",ct,d(((a=u.stats)==null?void 0:a.total_users_evaluated)||0),1)])])]}),_:1})]),_:1}),e(t(c),null,{default:r(()=>[e(t(p),{class:"p-6"},{default:r(()=>{var a;return[s("div",pt,[e(t(z),{class:"h-8 w-8 text-green-600"}),s("div",xt,[o[7]||(o[7]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Overall Avg Score",-1)),s("p",gt,d(((a=u.stats)==null?void 0:a.overall_avg_score)||0),1)])])]}),_:1})]),_:1}),e(t(c),null,{default:r(()=>[e(t(p),{class:"p-6"},{default:r(()=>{var a;return[s("div",vt,[e(t(L),{class:"h-8 w-8 text-yellow-600"}),s("div",bt,[o[8]||(o[8]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Highest Dept Avg",-1)),s("p",ht,d(((a=u.stats)==null?void 0:a.highest_department_avg)||0),1)])])]}),_:1})]),_:1})]),e(t(c),null,{default:r(()=>[e(t(h),null,{default:r(()=>[s("div",yt,[e(t(rt),{class:"mr-2 h-5 w-5 text-primary"}),s("div",null,[e(t(y),null,{default:r(()=>o[9]||(o[9]=[n("Filters")])),_:1}),e(t(X),null,{default:r(()=>o[10]||(o[10]=[n("Narrow down the results by department or date range")])),_:1})])])]),_:1}),e(t(p),null,{default:r(()=>[s("div",wt,[s("div",Dt,[e(t(b),{for:"department_filter"},{default:r(()=>o[11]||(o[11]=[n("Department")])),_:1}),e(t(Y),{"model-value":f.value.department_id||"all","onUpdate:modelValue":o[0]||(o[0]=a=>f.value.department_id=a==="all"?"":a)},{default:r(()=>[e(t(Z),{id:"department_filter"},{default:r(()=>[e(t(tt),{placeholder:"All Departments"})]),_:1}),e(t(et),null,{default:r(()=>[e(t(U),{value:"all"},{default:r(()=>o[12]||(o[12]=[n("All Departments")])),_:1}),(i(!0),m(x,null,g(u.departments,a=>(i(),N(t(U),{key:a.id,value:a.id.toString()},{default:r(()=>[n(d(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),s("div",$t,[e(t(b),{for:"date_from"},{default:r(()=>o[13]||(o[13]=[n("From Date")])),_:1}),e(t(R),{id:"date_from",type:"date",modelValue:f.value.date_from,"onUpdate:modelValue":o[1]||(o[1]=a=>f.value.date_from=a)},null,8,["modelValue"])]),s("div",kt,[e(t(b),{for:"date_to"},{default:r(()=>o[14]||(o[14]=[n("To Date")])),_:1}),e(t(R),{id:"date_to",type:"date",modelValue:f.value.date_to,"onUpdate:modelValue":o[2]||(o[2]=a=>f.value.date_to=a)},null,8,["modelValue"])])]),s("div",Ct,[e(t(T),{variant:"outline",onClick:q,size:"sm"},{default:r(()=>o[15]||(o[15]=[n(" Reset Filters ")])),_:1})])]),_:1})]),_:1}),u.reportData&&u.reportData.length>0?(i(),m("div",Vt,[(i(!0),m(x,null,g(u.reportData,a=>(i(),m("div",{key:a.id,class:"space-y-4"},[s("div",jt,[s("h2",At,[e(t(O),{class:"mr-2 h-5 w-5 text-muted-foreground"}),n(" "+d(a.name)+" ",1),e(t(w),{variant:"secondary",class:"ml-3"},{default:r(()=>[n("Avg: "+d(a.department_avg),1)]),_:2},1024)]),s("span",Nt,d(a.total_users_evaluated)+" Users Evaluated",1)]),s("div",Ft,[e(t(c),{class:"border-l-4 border-l-green-500"},{default:r(()=>[e(t(h),{class:"pb-2"},{default:r(()=>[e(t(y),{class:"text-lg flex items-center text-green-700"},{default:r(()=>[e(t(L),{class:"mr-2 h-5 w-5"}),o[16]||(o[16]=n(" Top Performers "))]),_:1})]),_:1}),e(t(p),null,{default:r(()=>[s("div",St,[(i(!0),m(x,null,g(a.top_performers,(l,A)=>(i(),m("div",{key:l.id,class:"flex items-center justify-between p-3 bg-green-50/50 rounded-lg border border-green-100"},[s("div",Tt,[s("div",Ut,d(A+1),1),e(t(P),{class:"h-10 w-10 border-2 border-white shadow-sm"},{default:r(()=>[e(t(B),{src:l.avatar,alt:l.name},null,8,["src","alt"]),e(t(E),null,{default:r(()=>[n(d(k(l.name)),1)]),_:2},1024)]),_:2},1024),s("div",null,[s("p",Pt,d(l.name),1),s("p",Bt,d(l.employee_code),1)])]),s("div",Et,[e(t(w),{class:S($(l.avg_score))},{default:r(()=>[n(d(l.avg_score),1)]),_:2},1032,["class"]),s("p",Rt,d(l.total_evaluations)+" evals",1)])]))),128)),a.top_performers.length===0?(i(),m("div",Ot," No data available ")):F("",!0)])]),_:2},1024)]),_:2},1024),e(t(c),{class:"border-l-4 border-l-red-500"},{default:r(()=>[e(t(h),{class:"pb-2"},{default:r(()=>[e(t(y),{class:"text-lg flex items-center text-red-700"},{default:r(()=>[e(t(at),{class:"mr-2 h-5 w-5"}),o[17]||(o[17]=n(" Needs Support "))]),_:1})]),_:1}),e(t(p),null,{default:r(()=>[s("div",zt,[(i(!0),m(x,null,g(a.bottom_performers,(l,A)=>(i(),m("div",{key:l.id,class:"flex items-center justify-between p-3 bg-red-50/50 rounded-lg border border-red-100"},[s("div",Lt,[e(t(P),{class:"h-10 w-10 border-2 border-white shadow-sm"},{default:r(()=>[e(t(B),{src:l.avatar,alt:l.name},null,8,["src","alt"]),e(t(E),null,{default:r(()=>[n(d(k(l.name)),1)]),_:2},1024)]),_:2},1024),s("div",null,[s("p",Wt,d(l.name),1),s("p",qt,d(l.employee_code),1)])]),s("div",Ht,[e(t(w),{class:S($(l.avg_score))},{default:r(()=>[n(d(l.avg_score),1)]),_:2},1032,["class"]),s("p",It,d(l.total_evaluations)+" evals",1)])]))),128)),a.bottom_performers.length===0?(i(),m("div",Gt," No data available ")):F("",!0)])]),_:2},1024)]),_:2},1024)])]))),128))])):(i(),m("div",Jt,[s("div",Kt,[e(t(z),{class:"h-8 w-8 text-muted-foreground"})]),o[18]||(o[18]=s("h3",{class:"text-lg font-medium text-foreground"},"No Data Available",-1)),o[19]||(o[19]=s("p",{class:"text-muted-foreground mt-1"},"No evaluation data found for the selected filters.",-1))]))])]),_:1}))}});export{Ue as default};
