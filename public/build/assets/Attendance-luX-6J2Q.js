import{d as J,r as K,W as Q,l as X,g as f,o as d,w as l,e as o,b as t,u as e,f as r,a as m,F as x,i as y,t as u}from"./app-De5aCyOy.js";import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{l as Z}from"./lodash-D8CZwZrT.js";import{c as ee,_ as D}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as F}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as te}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as se}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as le}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as L,a as M,b as N,c as j,d as v}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as oe,a as re,b as w,c,d as ne,e as _}from"./TableHeader.vue_vue_type_script_setup_true_lang-CiatGxJJ.js";import{_ as B}from"./index-CNloWqrH.js";import{D as de}from"./download-ziV5naxV.js";import{F as ie}from"./filter-Ihqwk31P.js";import{R as ue}from"./rotate-ccw-D8-XKrTw.js";import{U as me}from"./user-D0HtPb4E.js";import{G as fe}from"./graduation-cap-CEnht2ej.js";import{C as G}from"./clock-BXDw5ZYb.js";import{S as k}from"./star-BP7x_abV.js";import{M as _e}from"./message-square-Dca9FnlS.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=ee("StarHalfIcon",[["path",{d:"M12 18.338a2.1 2.1 0 0 0-.987.244L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.12 2.12 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.12 2.12 0 0 0 1.597-1.16l2.309-4.679A.53.53 0 0 1 12 2",key:"2ksp49"}]]),pe={class:"px-4 sm:px-0 space-y-6"},xe={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ve={class:"flex items-center"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ye={class:"space-y-2"},he={class:"space-y-2"},we={class:"space-y-2"},ke={class:"space-y-2"},$e={class:"flex justify-end mt-4"},be={class:"overflow-x-auto"},Ce={class:"flex items-center"},Ae={class:"flex items-center"},Se={class:"flex items-center"},Ue={class:"flex items-center"},Ve={class:"flex items-center"},De={class:"flex flex-col items-center"},Re={class:"space-y-1"},Fe={class:"font-medium text-foreground"},Le={class:"text-xs text-muted-foreground hidden sm:block"},Me={class:"text-sm text-foreground"},Ne={class:"text-sm text-foreground"},je={key:0,class:"flex items-center space-x-2"},Be={class:"text-sm font-medium"},Ge={class:"flex"},Ee={key:1,class:"text-muted-foreground"},He={class:"max-w-xs"},Ie={key:0,class:"text-sm text-muted-foreground truncate"},Te={key:1,class:"text-muted-foreground"},Dt=J({__name:"Attendance",props:{attendance:Array,users:Array,courses:Array,filters:Object},setup(p){var C,A,S,U;const g=p,E=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Attendance Records",href:route("admin.reports.attendance")}],i=K({user_id:((C=g.filters)==null?void 0:C.user_id)||"",date_from:((A=g.filters)==null?void 0:A.date_from)||"",date_to:((S=g.filters)==null?void 0:S.date_to)||"",course_id:((U=g.filters)==null?void 0:U.course_id)||""}),H=n=>{i.value.user_id=n==="all"?"":n},I=n=>{i.value.course_id=n==="all"?"":n},$=Z.debounce(()=>{Q.get(route("admin.reports.attendance"),i.value,{preserveState:!0,replace:!0})},500);X(i,()=>{$()},{deep:!0});const T=()=>{i.value={user_id:"",date_from:"",date_to:"",course_id:""},$()},q=()=>{const n=new URLSearchParams(i.value).toString();window.location.href=route("admin.reports.export.attendance")+"?"+n},b=n=>n?new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—",O=n=>{if(!n||isNaN(n)||n<0)return"—";n=Math.round(n);const s=Math.floor(n/60),a=n%60;return s>0?`${s} ${s===1?"hour":"hours"}${a>0?` ${a} ${a===1?"minute":"minutes"}`:""}`:`${a} ${a===1?"minute":"minutes"}`},P=n=>{const s=[];for(let a=1;a<=5;a++)a<=n?s.push("full"):a-.5<=n?s.push("half"):s.push("empty");return s};return(n,s)=>(d(),f(Y,{breadcrumbs:E},{default:l(()=>[o("div",pe,[o("div",xe,[s[3]||(s[3]=o("div",null,[o("h1",{class:"text-xl sm:text-2xl font-bold text-foreground"},"Attendance Records Report"),o("p",{class:"text-sm text-muted-foreground mt-1"},"Comprehensive reporting interface for tracking and analyzing attendance records")],-1)),t(e(D),{onClick:q,class:"w-full sm:w-auto"},{default:l(()=>[t(e(de),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=r(" Export to CSV "))]),_:1})]),t(e(F),null,{default:l(()=>[t(e(le),null,{default:l(()=>[o("div",ve,[t(e(ie),{class:"mr-2 h-5 w-5 text-primary"}),o("div",null,[t(e(ae),null,{default:l(()=>s[4]||(s[4]=[r("Filter Attendance Records")])),_:1}),t(e(se),null,{default:l(()=>s[5]||(s[5]=[r("Use the filters below to narrow down the attendance records")])),_:1})])])]),_:1}),t(e(te),null,{default:l(()=>[o("div",ge,[o("div",ye,[t(e(h),{for:"user_filter"},{default:l(()=>s[6]||(s[6]=[r("User")])),_:1}),t(e(L),{"model-value":i.value.user_id||"all","onUpdate:modelValue":H},{default:l(()=>[t(e(M),{id:"user_filter"},{default:l(()=>[t(e(N),{placeholder:"All Users"})]),_:1}),t(e(j),null,{default:l(()=>[t(e(v),{value:"all"},{default:l(()=>s[7]||(s[7]=[r("All Users")])),_:1}),(d(!0),m(x,null,y(p.users,a=>(d(),f(e(v),{key:a.id,value:a.id.toString()},{default:l(()=>[r(u(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),o("div",he,[t(e(h),{for:"course_filter"},{default:l(()=>s[8]||(s[8]=[r("Course")])),_:1}),t(e(L),{"model-value":i.value.course_id||"all","onUpdate:modelValue":I},{default:l(()=>[t(e(M),{id:"course_filter"},{default:l(()=>[t(e(N),{placeholder:"All Courses"})]),_:1}),t(e(j),null,{default:l(()=>[t(e(v),{value:"all"},{default:l(()=>s[9]||(s[9]=[r("All Courses")])),_:1}),t(e(v),{value:"general"},{default:l(()=>s[10]||(s[10]=[r("General Attendance")])),_:1}),(d(!0),m(x,null,y(p.courses,a=>(d(),f(e(v),{key:a.id,value:a.id.toString()},{default:l(()=>[r(u(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),o("div",we,[t(e(h),{for:"date_from"},{default:l(()=>s[11]||(s[11]=[r("Date From")])),_:1}),t(e(R),{id:"date_from",type:"date",modelValue:i.value.date_from,"onUpdate:modelValue":s[0]||(s[0]=a=>i.value.date_from=a)},null,8,["modelValue"])]),o("div",ke,[t(e(h),{for:"date_to"},{default:l(()=>s[12]||(s[12]=[r("Date To")])),_:1}),t(e(R),{id:"date_to",type:"date",modelValue:i.value.date_to,"onUpdate:modelValue":s[1]||(s[1]=a=>i.value.date_to=a)},null,8,["modelValue"])])]),o("div",$e,[t(e(D),{onClick:T,variant:"outline"},{default:l(()=>[t(e(ue),{class:"mr-2 h-4 w-4"}),s[13]||(s[13]=r(" Reset Filters "))]),_:1})])]),_:1})]),_:1}),t(e(F),null,{default:l(()=>[o("div",be,[t(e(oe),null,{default:l(()=>[t(e(re),null,{default:l(()=>[t(e(w),null,{default:l(()=>[t(e(c),null,{default:l(()=>[o("div",Ce,[t(e(me),{class:"mr-2 h-4 w-4"}),s[14]||(s[14]=r(" User "))])]),_:1}),t(e(c),null,{default:l(()=>[o("div",Ae,[t(e(fe),{class:"mr-2 h-4 w-4"}),s[15]||(s[15]=r(" Course "))])]),_:1}),t(e(c),null,{default:l(()=>s[16]||(s[16]=[r("Clock In")])),_:1}),t(e(c),{class:"hidden sm:table-cell"},{default:l(()=>s[17]||(s[17]=[r("Clock Out")])),_:1}),t(e(c),null,{default:l(()=>[o("div",Se,[t(e(G),{class:"mr-2 h-4 w-4"}),s[18]||(s[18]=r(" Duration "))])]),_:1}),t(e(c),{class:"hidden md:table-cell"},{default:l(()=>[o("div",Ue,[t(e(k),{class:"mr-2 h-4 w-4"}),s[19]||(s[19]=r(" Rating "))])]),_:1}),t(e(c),{class:"hidden lg:table-cell"},{default:l(()=>[o("div",Ve,[t(e(_e),{class:"mr-2 h-4 w-4"}),s[20]||(s[20]=r(" Comment "))])]),_:1})]),_:1})]),_:1}),t(e(ne),null,{default:l(()=>[p.attendance.length===0?(d(),f(e(w),{key:0},{default:l(()=>[t(e(_),{colspan:"7",class:"text-center text-muted-foreground py-8"},{default:l(()=>[o("div",De,[t(e(G),{class:"h-12 w-12 text-muted-foreground mb-2"}),s[21]||(s[21]=r(" No attendance records found "))])]),_:1})]),_:1})):(d(!0),m(x,{key:1},y(p.attendance,(a,W)=>(d(),f(e(w),{key:W,class:"hover:bg-muted/50"},{default:l(()=>[t(e(_),null,{default:l(()=>[o("div",Re,[o("div",Fe,u(a.user_name),1),o("div",Le,u(a.user_email),1)])]),_:2},1024),t(e(_),null,{default:l(()=>[t(e(B),{variant:"outline"},{default:l(()=>[r(u(a.course_name||"General Attendance"),1)]),_:2},1024)]),_:2},1024),t(e(_),null,{default:l(()=>[o("div",Me,u(b(a.clock_in)),1)]),_:2},1024),t(e(_),{class:"hidden sm:table-cell"},{default:l(()=>[o("div",Ne,u(a.clock_out?b(a.clock_out):"—"),1)]),_:2},1024),t(e(_),null,{default:l(()=>[t(e(B),{variant:"secondary",class:"font-mono"},{default:l(()=>[r(u(O(a.duration_in_minutes)),1)]),_:2},1024)]),_:2},1024),t(e(_),{class:"hidden md:table-cell"},{default:l(()=>[a.rating?(d(),m("div",je,[o("span",Be,u(a.rating)+"/5",1),o("div",Ge,[(d(!0),m(x,null,y(P(a.rating),(V,z)=>(d(),m(x,{key:z},[V==="full"?(d(),f(e(k),{key:0,class:"h-4 w-4 fill-yellow-400 text-yellow-400"})):V==="half"?(d(),f(e(ce),{key:1,class:"h-4 w-4 fill-yellow-400 text-yellow-400"})):(d(),f(e(k),{key:2,class:"h-4 w-4 text-muted-foreground"}))],64))),128))])])):(d(),m("span",Ee,"—"))]),_:2},1024),t(e(_),{class:"hidden lg:table-cell"},{default:l(()=>[o("div",He,[a.comment?(d(),m("div",Ie,u(a.comment),1)):(d(),m("span",Te,"—"))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1})])]),_:1}))}});export{Dt as default};
