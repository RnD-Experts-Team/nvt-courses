import{d as K,C as Z,r as x,c as ee,a as n,o as d,b as s,u as t,m as te,w as i,e as o,P,f as a,j as se,h as m,n as b,t as v,s as oe,F as j,i as le,v as re,g as ie,x as ae}from"./app-De5aCyOy.js";import{V as E,f as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as f}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as M}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as V}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as I}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as U}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as de}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as ne}from"./Switch.vue_vue_type_script_setup_true_lang-Cp6QCENU.js";import{_ as me,a as fe}from"./index-Bl7hX8X-.js";import{A as pe}from"./arrow-left-kG5YrchA.js";import{L as ve}from"./link-ItMdrcrR.js";import{U as z}from"./upload-BM6JiC8r.js";import{X as R}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import{C as ge}from"./clock-BXDw5ZYb.js";import{I as ce}from"./image-BeZKZ5ia.js";import{T as _e}from"./tag-b4i1_NNu.js";import{T as be}from"./triangle-alert-QBZ4KeJk.js";import{S as xe}from"./save-Cj1WR6gV.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./useForwardExpose-Cyi8rQxf.js";import"./VisuallyHidden-9kO_gd9f.js";import"./VisuallyHiddenInput-CPW02NT0.js";import"./usePrimitiveElement-B41iOtr7.js";const ye={class:"max-w-2xl mx-auto space-y-6"},ke={class:"flex items-center gap-4"},he={class:"space-y-2"},Ce={key:0,class:"text-sm text-destructive"},we={class:"space-y-2"},$e={key:0,class:"text-sm text-destructive"},Se={class:"space-y-2"},Ae=["value"],Me={key:0,class:"text-sm text-destructive"},Ve={class:"space-y-3"},Ie={class:"grid grid-cols-2 gap-4"},Ue=["checked"],De=["checked"],ze={key:0,class:"space-y-2"},Fe={key:0,class:"text-sm text-destructive"},Re={key:1,class:"space-y-3"},Te={key:1,class:"space-y-3"},Le={class:"flex items-center gap-3 p-4 rounded-lg border bg-muted/50"},Be={class:"flex-1 min-w-0"},Ge={class:"font-medium truncate"},Pe={class:"text-sm text-muted-foreground"},je={class:"flex gap-2"},Ee={key:2,class:"text-sm text-destructive"},Ne={class:"space-y-3"},We={class:"grid grid-cols-3 gap-3"},Oe={class:"space-y-2"},qe={class:"space-y-2"},He={class:"space-y-2"},Je={class:"flex items-center justify-between p-3 rounded-lg bg-muted/50 border"},Qe={class:"flex items-center gap-2"},Xe={class:"text-sm text-muted-foreground"},Ye={class:"space-y-2"},Ke={class:"flex flex-wrap gap-2"},Ze={key:0,class:"text-sm text-destructive"},et={class:"space-y-3"},tt={key:1,class:"space-y-3"},st={class:"relative w-48 h-32 rounded-lg overflow-hidden border"},ot=["src"],lt={class:"flex gap-2"},rt={key:2,class:"text-sm text-destructive"},it={class:"space-y-2"},at={key:0,class:"text-sm text-destructive"},ut={class:"flex items-center justify-between"},dt={class:"space-y-1"},nt={class:"flex justify-between items-center"},Et=K({__name:"Create",props:{categories:{}},setup(mt){const N=[{title:"Audio Management",href:"/admin/audio"},{title:"Create Audio",href:"#"}],l=Z({name:"",description:"",storage_type:"google_drive",google_cloud_url:"",audio_file:null,duration:"",thumbnail:null,thumbnail_url:"",audio_category_id:"",is_active:!0}),w=x(!1),h=x(null),$=x(null),S=x(null),g=x(0),c=x(0),_=x(0),A=()=>{const u=g.value.toString().padStart(2,"0"),e=c.value.toString().padStart(2,"0"),r=_.value.toString().padStart(2,"0");g.value>0||c.value>0||_.value>0?l.duration=`${u}:${e}:${r}`:l.duration=""},F=(u,e)=>{let r=parseInt(e)||0;u==="hours"?(r=Math.max(0,Math.min(99,r)),g.value=r):u==="minutes"?(r=Math.max(0,Math.min(59,r)),c.value=r):u==="seconds"&&(r=Math.max(0,Math.min(59,r)),_.value=r),A()},y=(u,e,r)=>{g.value=u,c.value=e,_.value=r,A()},W=()=>{g.value=0,c.value=0,_.value=0,A()},O=ee(()=>{const u=[];return g.value>0&&u.push(`${g.value}h`),c.value>0&&u.push(`${c.value}m`),_.value>0&&u.push(`${_.value}s`),u.length>0?u.join(" "):"Not set"});function q(u){var C;const e=u.target,r=(C=e.files)==null?void 0:C[0];if(r){if(r.size>2*1024*1024){alert("File size must be less than 2MB"),e.value="";return}if(!r.type.startsWith("image/")){alert("Please select an image file"),e.value="";return}l.thumbnail=r;const B=new FileReader;B.onload=Y=>{var G;h.value=(G=Y.target)==null?void 0:G.result},B.readAsDataURL(r),l.thumbnail_url=""}}function H(){l.thumbnail=null,h.value=null,$.value&&($.value.value="")}function T(){var u;(u=$.value)==null||u.click()}function J(u){var C;const e=u.target,r=(C=e.files)==null?void 0:C[0];if(r){if(r.size>50*1024*1024){alert("Audio file size must be less than 50MB"),e.value="";return}if(!r.type.startsWith("audio/")){alert("Please select an audio file"),e.value="";return}l.audio_file=r}}function Q(){l.audio_file=null,S.value&&(S.value.value="")}function L(){var u;(u=S.value)==null||u.click()}const X=async()=>{w.value=!0,await ae(),l.transform(u=>({...u,duration:u.duration||null,audio_category_id:u.audio_category_id||null,google_cloud_url:u.storage_type==="google_drive"?u.google_cloud_url:null})).post("/admin/audio",{onFinish:()=>{w.value=!1}})};return A(),(u,e)=>(d(),n(j,null,[s(t(te),{title:"Create Audio Course"}),s(ue,{breadcrumbs:N},{default:i(()=>[o("div",ye,[o("div",ke,[s(t(f),{asChild:"",variant:"ghost"},{default:i(()=>[s(t(P),{href:"/admin/audio"},{default:i(()=>[s(t(pe),{class:"h-4 w-4 mr-2"}),e[17]||(e[17]=a(" Back to Audio "))]),_:1})]),_:1}),e[18]||(e[18]=o("div",null,[o("h1",{class:"text-2xl font-bold"},"Create Audio Course"),o("p",{class:"text-muted-foreground"},"Add a new audio course to your library")],-1))]),o("form",{onSubmit:se(X,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[s(t(M),null,{default:i(()=>[s(t(U),null,{default:i(()=>[s(t(D),{class:"flex items-center gap-2"},{default:i(()=>[s(t(E),{class:"h-5 w-5"}),e[19]||(e[19]=a(" Basic Information "))]),_:1}),s(t(I),null,{default:i(()=>e[20]||(e[20]=[a(" Enter the basic details for your audio course ")])),_:1})]),_:1}),s(t(V),{class:"space-y-4"},{default:i(()=>[o("div",he,[s(t(p),{for:"name"},{default:i(()=>e[21]||(e[21]=[a("Course Name *")])),_:1}),s(t(k),{id:"name",modelValue:t(l).name,"onUpdate:modelValue":e[0]||(e[0]=r=>t(l).name=r),type:"text",placeholder:"Enter audio course name",class:b({"border-destructive":t(l).errors.name}),required:""},null,8,["modelValue","class"]),t(l).errors.name?(d(),n("div",Ce,v(t(l).errors.name),1)):m("",!0)]),o("div",we,[s(t(p),{for:"description"},{default:i(()=>e[22]||(e[22]=[a("Description")])),_:1}),s(t(de),{id:"description",modelValue:t(l).description,"onUpdate:modelValue":e[1]||(e[1]=r=>t(l).description=r),placeholder:"Describe what this audio course covers...",rows:4,class:b({"border-destructive":t(l).errors.description})},null,8,["modelValue","class"]),t(l).errors.description?(d(),n("div",$e,v(t(l).errors.description),1)):m("",!0)]),o("div",Se,[s(t(p),{for:"category"},{default:i(()=>e[23]||(e[23]=[a("Category")])),_:1}),oe(o("select",{id:"category","onUpdate:modelValue":e[2]||(e[2]=r=>t(l).audio_category_id=r),class:b(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive":t(l).errors.audio_category_id}])},[e[24]||(e[24]=o("option",{value:""},"Select a category (optional)",-1)),(d(!0),n(j,null,le(u.categories,r=>(d(),n("option",{key:r.id,value:r.id.toString()},v(r.name),9,Ae))),128))],2),[[re,t(l).audio_category_id]]),t(l).errors.audio_category_id?(d(),n("div",Me,v(t(l).errors.audio_category_id),1)):m("",!0)])]),_:1})]),_:1}),s(t(M),null,{default:i(()=>[s(t(U),null,{default:i(()=>[s(t(D),{class:"flex items-center gap-2"},{default:i(()=>[s(t(ve),{class:"h-5 w-5"}),e[25]||(e[25]=a(" Media Information "))]),_:1}),s(t(I),null,{default:i(()=>e[26]||(e[26]=[a(" Choose storage type and provide media details ")])),_:1})]),_:1}),s(t(V),{class:"space-y-4"},{default:i(()=>[o("div",Ve,[s(t(p),null,{default:i(()=>e[27]||(e[27]=[a("Storage Type *")])),_:1}),o("div",Ie,[o("div",{onClick:e[3]||(e[3]=r=>t(l).storage_type="google_drive"),class:b(["relative flex items-center space-x-3 rounded-lg border p-4 cursor-pointer transition-all",{"border-primary bg-primary/5":t(l).storage_type==="google_drive","border-input hover:border-primary/50":t(l).storage_type!=="google_drive"}])},[o("input",{type:"radio",name:"storage_type",value:"google_drive",checked:t(l).storage_type==="google_drive",class:"h-4 w-4 text-primary"},null,8,Ue),e[28]||(e[28]=o("div",{class:"flex-1"},[o("div",{class:"font-medium"},"Google Drive"),o("div",{class:"text-xs text-muted-foreground"},"Store audio in Google Drive")],-1))],2),o("div",{onClick:e[4]||(e[4]=r=>t(l).storage_type="local"),class:b(["relative flex items-center space-x-3 rounded-lg border p-4 cursor-pointer transition-all",{"border-primary bg-primary/5":t(l).storage_type==="local","border-input hover:border-primary/50":t(l).storage_type!=="local"}])},[o("input",{type:"radio",name:"storage_type",value:"local",checked:t(l).storage_type==="local",class:"h-4 w-4 text-primary"},null,8,De),e[29]||(e[29]=o("div",{class:"flex-1"},[o("div",{class:"font-medium"},"Local Storage"),o("div",{class:"text-xs text-muted-foreground"},"Upload audio file to server")],-1))],2)])]),t(l).storage_type==="google_drive"?(d(),n("div",ze,[s(t(p),{for:"google_cloud_url"},{default:i(()=>e[30]||(e[30]=[a("Google Drive/Cloud URL *")])),_:1}),s(t(k),{id:"google_cloud_url",modelValue:t(l).google_cloud_url,"onUpdate:modelValue":e[5]||(e[5]=r=>t(l).google_cloud_url=r),type:"url",placeholder:"https://drive.google.com/file/d/YOUR_FILE_ID/view",class:b({"border-destructive":t(l).errors.google_cloud_url}),required:""},null,8,["modelValue","class"]),t(l).errors.google_cloud_url?(d(),n("div",Fe,v(t(l).errors.google_cloud_url),1)):m("",!0),e[31]||(e[31]=o("div",{class:"text-sm text-muted-foreground"}," Enter the Google Drive sharing URL or Google Cloud Storage URL ",-1))])):m("",!0),t(l).storage_type==="local"?(d(),n("div",Re,[s(t(p),null,{default:i(()=>e[32]||(e[32]=[a("Upload Audio File *")])),_:1}),o("input",{ref_key:"audioFileInputRef",ref:S,type:"file",accept:"audio/*",onChange:J,class:"hidden"},null,544),t(l).audio_file?m("",!0):(d(),n("div",{key:0,onClick:L,class:b(["border-2 border-dashed border-input rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",{"border-destructive":t(l).errors.audio_file}])},[s(t(z),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e[33]||(e[33]=o("div",{class:"text-sm font-medium mb-2"},"Click to upload audio file",-1)),e[34]||(e[34]=o("div",{class:"text-xs text-muted-foreground"}," MP3, WAV, OGG, M4A up to 50MB ",-1))],2)),t(l).audio_file?(d(),n("div",Te,[o("div",Le,[s(t(E),{class:"h-8 w-8 text-primary"}),o("div",Be,[o("div",Ge,v(t(l).audio_file.name),1),o("div",Pe,v((t(l).audio_file.size/(1024*1024)).toFixed(2))+" MB ",1)]),s(t(f),{onClick:Q,variant:"destructive",size:"sm",type:"button"},{default:i(()=>[s(t(R),{class:"h-4 w-4"})]),_:1})]),o("div",je,[s(t(f),{onClick:L,variant:"outline",size:"sm",type:"button"},{default:i(()=>[s(t(z),{class:"h-4 w-4 mr-2"}),e[35]||(e[35]=a(" Change File "))]),_:1})])])):m("",!0),t(l).errors.audio_file?(d(),n("div",Ee,v(t(l).errors.audio_file),1)):m("",!0)])):m("",!0),o("div",Ne,[s(t(p),null,{default:i(()=>e[36]||(e[36]=[a("Duration")])),_:1}),o("div",We,[o("div",Oe,[s(t(p),{for:"hours",class:"text-xs text-muted-foreground"},{default:i(()=>e[37]||(e[37]=[a("Hours")])),_:1}),s(t(k),{id:"hours",type:"number",min:"0",max:"99",value:g.value,onInput:e[6]||(e[6]=r=>F("hours",r.target.value)),placeholder:"0",class:"text-center"},null,8,["value"])]),o("div",qe,[s(t(p),{for:"minutes",class:"text-xs text-muted-foreground"},{default:i(()=>e[38]||(e[38]=[a("Minutes")])),_:1}),s(t(k),{id:"minutes",type:"number",min:"0",max:"59",value:c.value,onInput:e[7]||(e[7]=r=>F("minutes",r.target.value)),placeholder:"0",class:"text-center"},null,8,["value"])]),o("div",He,[s(t(p),{for:"seconds",class:"text-xs text-muted-foreground"},{default:i(()=>e[39]||(e[39]=[a("Seconds")])),_:1}),s(t(k),{id:"seconds",type:"number",min:"0",max:"59",value:_.value,onInput:e[8]||(e[8]=r=>F("seconds",r.target.value)),placeholder:"0",class:"text-center"},null,8,["value"])])]),o("div",Je,[o("div",Qe,[s(t(ge),{class:"h-4 w-4 text-muted-foreground"}),e[40]||(e[40]=o("span",{class:"text-sm font-medium"},"Total Duration:",-1)),o("span",Xe,v(O.value),1)]),g.value>0||c.value>0||_.value>0?(d(),ie(t(f),{key:0,onClick:W,variant:"ghost",size:"sm",type:"button"},{default:i(()=>[s(t(R),{class:"h-4 w-4"})]),_:1})):m("",!0)]),o("div",Ye,[s(t(p),{class:"text-xs text-muted-foreground"},{default:i(()=>e[41]||(e[41]=[a("Quick Presets:")])),_:1}),o("div",Ke,[s(t(f),{onClick:e[9]||(e[9]=r=>y(0,5,0)),variant:"outline",size:"sm",type:"button"},{default:i(()=>e[42]||(e[42]=[a(" 5 min ")])),_:1}),s(t(f),{onClick:e[10]||(e[10]=r=>y(0,10,0)),variant:"outline",size:"sm",type:"button"},{default:i(()=>e[43]||(e[43]=[a(" 10 min ")])),_:1}),s(t(f),{onClick:e[11]||(e[11]=r=>y(0,15,0)),variant:"outline",size:"sm",type:"button"},{default:i(()=>e[44]||(e[44]=[a(" 15 min ")])),_:1}),s(t(f),{onClick:e[12]||(e[12]=r=>y(0,30,0)),variant:"outline",size:"sm",type:"button"},{default:i(()=>e[45]||(e[45]=[a(" 30 min ")])),_:1}),s(t(f),{onClick:e[13]||(e[13]=r=>y(1,0,0)),variant:"outline",size:"sm",type:"button"},{default:i(()=>e[46]||(e[46]=[a(" 1 hour ")])),_:1}),s(t(f),{onClick:e[14]||(e[14]=r=>y(2,0,0)),variant:"outline",size:"sm",type:"button"},{default:i(()=>e[47]||(e[47]=[a(" 2 hours ")])),_:1})])]),t(l).errors.duration?(d(),n("div",Ze,v(t(l).errors.duration),1)):m("",!0),e[48]||(e[48]=o("div",{class:"text-sm text-muted-foreground"}," Enter the audio duration using separate fields for hours, minutes, and seconds ",-1))])]),_:1})]),_:1}),s(t(M),null,{default:i(()=>[s(t(U),null,{default:i(()=>[s(t(D),{class:"flex items-center gap-2"},{default:i(()=>[s(t(ce),{class:"h-5 w-5"}),e[49]||(e[49]=a(" Thumbnail Image "))]),_:1}),s(t(I),null,{default:i(()=>e[50]||(e[50]=[a(" Upload a thumbnail image or provide an external URL ")])),_:1})]),_:1}),s(t(V),{class:"space-y-4"},{default:i(()=>[o("div",et,[s(t(p),null,{default:i(()=>e[51]||(e[51]=[a("Upload Thumbnail")])),_:1}),o("input",{ref_key:"fileInputRef",ref:$,type:"file",accept:"image/*",onChange:q,class:"hidden"},null,544),h.value?m("",!0):(d(),n("div",{key:0,onClick:T,class:b(["border-2 border-dashed border-input rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",{"border-destructive":t(l).errors.thumbnail}])},[s(t(z),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e[52]||(e[52]=o("div",{class:"text-sm font-medium mb-2"},"Click to upload thumbnail",-1)),e[53]||(e[53]=o("div",{class:"text-xs text-muted-foreground"}," PNG, JPG, GIF, WebP up to 2MB ",-1))],2)),h.value?(d(),n("div",tt,[o("div",st,[o("img",{src:h.value,alt:"Thumbnail preview",class:"w-full h-full object-cover"},null,8,ot),s(t(f),{onClick:H,variant:"destructive",size:"sm",class:"absolute top-2 right-2 h-8 w-8 p-0 rounded-full",type:"button"},{default:i(()=>[s(t(R),{class:"h-4 w-4"})]),_:1})]),o("div",lt,[s(t(f),{onClick:T,variant:"outline",size:"sm",type:"button"},{default:i(()=>[s(t(z),{class:"h-4 w-4 mr-2"}),e[54]||(e[54]=a(" Change Image "))]),_:1})])])):m("",!0),t(l).errors.thumbnail?(d(),n("div",rt,v(t(l).errors.thumbnail),1)):m("",!0)]),e[57]||(e[57]=o("div",{class:"flex items-center gap-4 my-4"},[o("div",{class:"flex-1 border-t border-border"}),o("span",{class:"text-sm text-muted-foreground bg-background px-2"},"OR"),o("div",{class:"flex-1 border-t border-border"})],-1)),o("div",it,[s(t(p),{for:"thumbnail_url"},{default:i(()=>e[55]||(e[55]=[a("External Thumbnail URL")])),_:1}),s(t(k),{id:"thumbnail_url",modelValue:t(l).thumbnail_url,"onUpdate:modelValue":e[15]||(e[15]=r=>t(l).thumbnail_url=r),type:"url",placeholder:"https://example.com/thumbnail.jpg",class:b({"border-destructive":t(l).errors.thumbnail_url}),disabled:!!t(l).thumbnail},null,8,["modelValue","class","disabled"]),t(l).errors.thumbnail_url?(d(),n("div",at,v(t(l).errors.thumbnail_url),1)):m("",!0),e[56]||(e[56]=o("div",{class:"text-sm text-muted-foreground"}," Alternative: provide an external image URL (disabled when file is uploaded) ",-1))])]),_:1})]),_:1}),s(t(M),null,{default:i(()=>[s(t(U),null,{default:i(()=>[s(t(D),{class:"flex items-center gap-2"},{default:i(()=>[s(t(_e),{class:"h-5 w-5"}),e[58]||(e[58]=a(" Settings "))]),_:1}),s(t(I),null,{default:i(()=>e[59]||(e[59]=[a(" Configure the visibility and availability of this audio course ")])),_:1})]),_:1}),s(t(V),null,{default:i(()=>[o("div",ut,[o("div",dt,[s(t(p),null,{default:i(()=>e[60]||(e[60]=[a("Active Status")])),_:1}),e[61]||(e[61]=o("div",{class:"text-sm text-muted-foreground"}," Make this audio course available to users ",-1))]),s(t(ne),{checked:t(l).is_active,"onUpdate:checked":e[16]||(e[16]=r=>t(l).is_active=r)},null,8,["checked"])])]),_:1})]),_:1}),s(t(me),null,{default:i(()=>[s(t(be),{class:"h-4 w-4"}),s(t(fe),null,{default:i(()=>e[62]||(e[62]=[o("strong",null,"Important:",-1),a(' Make sure your Google Drive file is set to "Anyone with the link can view" for proper audio streaming. ')])),_:1})]),_:1}),o("div",nt,[s(t(f),{asChild:"",variant:"outline"},{default:i(()=>[s(t(P),{href:"/admin/audio"},{default:i(()=>e[63]||(e[63]=[a(" Cancel ")])),_:1})]),_:1}),s(t(f),{type:"submit",disabled:w.value||t(l).processing},{default:i(()=>[s(t(xe),{class:"h-4 w-4 mr-2"}),a(" "+v(w.value?"Creating...":"Create Audio Course"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Et as default};
