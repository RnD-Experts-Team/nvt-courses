import{d as D,r as C,C as U,p as N,g as x,o as n,w as r,e as o,b as a,t as c,u as e,f as m,j as B,a as p,h as _,F as E,i as S,P}from"./app-De5aCyOy.js";import{_ as A}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as g}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as L}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as M}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as T}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as j}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as z,a as F,b as I,c as H,d as h}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as O}from"./Switch.vue_vue_type_script_setup_true_lang-Cp6QCENU.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";import"./VisuallyHiddenInput-CPW02NT0.js";const G={class:"px-4 sm:px-0"},J={class:"text-xl sm:text-2xl font-bold text-foreground mb-6"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6"},Q={class:"col-span-full space-y-2"},R={key:0,class:"text-destructive text-sm"},W={class:"col-span-1 space-y-2"},X={key:0,class:"text-destructive text-sm"},Y={class:"col-span-1 space-y-2"},Z={key:0,class:"text-destructive text-sm"},ee={class:"col-span-full space-y-2"},te={key:0,class:"text-destructive text-sm"},se={class:"col-span-full space-y-3"},ae={class:"flex items-center space-x-3"},re={class:"space-y-1"},oe={class:"flex flex-col sm:flex-row gap-3 pt-6 border-t"},ne={key:0,class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},ie={key:1},de={key:2},Ie=D({__name:"Edit",props:{department:Object,parentDepartments:Array},setup(u){const i=u,f=C(!0),t=U({name:i.department.name,description:i.department.description,parent_id:i.department.parent_id||"",department_code:i.department.department_code,is_active:i.department.is_active});function k(){f.value&&t.put(route("admin.departments.update",i.department.id),{onSuccess:()=>{},onError:l=>{console.error("Validation errors:",l)}})}const w=l=>{f.value&&(t.parent_id=l==="none"?"":l)},$=l=>{f.value&&(t.is_active=l)},V=[{name:"Dashboard",href:route("dashboard")},{name:"Departments",href:route("admin.departments.index")},{name:i.department.name,href:route("admin.departments.show",i.department.id)},{name:"Edit",href:route("admin.departments.edit",i.department.id)}];return N(()=>{f.value=!1}),(l,s)=>(n(),x(A,{breadcrumbs:V},{default:r(()=>[o("div",G,[o("h1",J,"Edit Department: "+c(u.department.name),1),a(e(M),{class:"max-w-2xl"},{default:r(()=>[a(e(j),null,{default:r(()=>[a(e(q),null,{default:r(()=>s[3]||(s[3]=[m("Department Information")])),_:1})]),_:1}),a(e(T),null,{default:r(()=>{var b;return[o("form",{onSubmit:B(k,["prevent"]),class:"space-y-6"},[o("div",K,[o("div",Q,[a(e(v),{for:"name",class:"font-semibold"},{default:r(()=>s[4]||(s[4]=[m("Department Name *")])),_:1}),a(e(y),{id:"name",type:"text",modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=d=>e(t).name=d),disabled:e(t).processing,required:""},null,8,["modelValue","disabled"]),e(t).errors.name?(n(),p("div",R,c(e(t).errors.name),1)):_("",!0)]),o("div",W,[a(e(v),{for:"department_code",class:"font-semibold"},{default:r(()=>s[5]||(s[5]=[m("Department Code *")])),_:1}),a(e(y),{id:"department_code",type:"text",modelValue:e(t).department_code,"onUpdate:modelValue":s[1]||(s[1]=d=>e(t).department_code=d),disabled:e(t).processing,maxlength:"20",required:""},null,8,["modelValue","disabled"]),e(t).errors.department_code?(n(),p("div",X,c(e(t).errors.department_code),1)):_("",!0)]),o("div",Y,[a(e(v),{for:"parent_id",class:"font-semibold"},{default:r(()=>s[6]||(s[6]=[m("Parent Department")])),_:1}),(n(),x(e(z),{key:`parent-select-${((b=u.parentDepartments)==null?void 0:b.length)||0}`,"model-value":e(t).parent_id||"none","onUpdate:modelValue":w,disabled:e(t).processing},{default:r(()=>[a(e(F),{id:"parent_id"},{default:r(()=>[a(e(I),{placeholder:"None (Top Level)"})]),_:1}),a(e(H),null,{default:r(()=>[a(e(h),{value:"none"},{default:r(()=>s[7]||(s[7]=[m("None (Top Level)")])),_:1}),(n(!0),p(E,null,S(u.parentDepartments||[],d=>(n(),x(e(h),{key:`dept-${d.id}`,value:d.id.toString()},{default:r(()=>[m(c(d.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"])),e(t).errors.parent_id?(n(),p("div",Z,c(e(t).errors.parent_id),1)):_("",!0)]),o("div",ee,[a(e(v),{for:"description",class:"font-semibold"},{default:r(()=>s[8]||(s[8]=[m("Description")])),_:1}),a(e(L),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[2]||(s[2]=d=>e(t).description=d),rows:"3",disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.description?(n(),p("div",te,c(e(t).errors.description),1)):_("",!0)]),o("div",se,[o("div",ae,[a(e(O),{id:"is_active",checked:e(t).is_active,"onUpdate:checked":$,disabled:e(t).processing},null,8,["checked","disabled"]),o("div",re,[a(e(v),{for:"is_active",class:"text-sm font-medium cursor-pointer"},{default:r(()=>s[9]||(s[9]=[m(" Active Department ")])),_:1}),s[10]||(s[10]=o("p",{class:"text-xs text-muted-foreground"},"Inactive departments won't be available for user assignment",-1))])])])]),o("div",oe,[a(e(g),{type:"submit",class:"w-full sm:w-auto",disabled:e(t).processing||!f.value},{default:r(()=>[e(t).processing?(n(),p("svg",ne,s[11]||(s[11]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):_("",!0),e(t).processing?(n(),p("span",ie,"Updating Department...")):(n(),p("span",de,"Update Department"))]),_:1},8,["disabled"]),a(e(g),{as:e(P),href:l.route("admin.departments.show",u.department.id),variant:"secondary",class:"w-full sm:w-auto",disabled:e(t).processing},{default:r(()=>s[12]||(s[12]=[m(" Cancel ")])),_:1},8,["as","href","disabled"])])],32)]}),_:1})]),_:1})])]),_:1}))}});export{Ie as default};
