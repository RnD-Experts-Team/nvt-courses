import{P as Ce,z as w,g as W,o as a,w as i,e as r,a as c,h as p,b as s,f as m,t as f,F as U,i as O,n as v,j as _e,s as G,H as K,A as Ee,r as H,C as Ve,c as L,l as ze,x as fe,W as pe}from"./app-De5aCyOy.js";import{M as Fe}from"./Modal-DIc89iOp.js";import{_ as qe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as Se}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as Ae}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as Te}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{b as Qe,a as Me,d as Ue,c as Oe,_ as Le}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as Pe}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as je}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as Be}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as De}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as Re}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as He}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";const Ne={components:{AdminLayout:qe,Link:Ce,Modal:Fe,Button:Se,Input:Ae,Label:Te,Select:Le,SelectContent:Oe,SelectItem:Ue,SelectTrigger:Me,SelectValue:Qe,Textarea:Pe,Card:je,CardContent:Be,CardHeader:De,CardTitle:Re},props:{quiz:{type:Object,required:!0},courses:{type:Array,default:()=>[]},onlineCourses:{type:Array,default:()=>[]}},setup(x){var Z,I,$,ee,te,re,se,oe,le,ie,ne,de,ae,ue,ce,me;const t=Ee(),P=H(!1),e=H(!1),q=H([]),X=H(0),N={success:"border-green-200 bg-green-50",error:"border-red-200 bg-red-50",info:"border-blue-200 bg-blue-50"},E={success:"text-green-500 bg-green-100",error:"text-red-500 bg-red-100",info:"text-blue-500 bg-blue-100"},V=H({}),T=n=>{if(!n)return null;if(Array.isArray(n))return n;if(typeof n=="object")return Object.values(n);if(typeof n=="string")try{let o=JSON.parse(n);for(;typeof o=="string";)try{o=JSON.parse(o)}catch{break}return Array.isArray(o)?o:Object.values(o)}catch{return[n]}return[]},h=n=>!n||!Array.isArray(n)?[{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""}]:n.map(o=>{if(!o)return{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""};if(o.type==="text")return{id:o.id||null,question_text:o.question_text||"",type:"text",points:0,options:[],correct_answer:[],correct_answer_explanation:o.correct_answer_explanation||""};let _=["",""];if(o.options)for(_=(T(o.options)||[]).map(b=>typeof b=="string"?b:b&&typeof b=="object"&&b.option_text?b.option_text:"");_.length<2;)_.push("");let k=[];return o.correct_answer&&(k=(T(o.correct_answer)||[]).map(b=>typeof b=="string"?b:b&&typeof b=="object"&&b.option_text?b.option_text:"").filter(b=>b!=="")),{id:o.id||null,question_text:o.question_text||"",type:o.type||"radio",points:o.points||0,options:_,correct_answer:k,correct_answer_explanation:o.correct_answer_explanation||""}}),d=Ve({course_type:((Z=x.quiz)==null?void 0:Z.course_type)||((I=x.quiz)!=null&&I.course_online_id?"online":"regular"),course_id:(($=x.quiz)==null?void 0:$.course_id)||"",course_online_id:((ee=x.quiz)==null?void 0:ee.course_online_id)||"",title:((te=x.quiz)==null?void 0:te.title)||"",description:((re=x.quiz)==null?void 0:re.description)||"",status:((se=x.quiz)==null?void 0:se.status)||"draft",pass_threshold:((oe=x.quiz)==null?void 0:oe.pass_threshold)||80,has_deadline:((le=x.quiz)==null?void 0:le.has_deadline)||!1,deadline_date:((ie=x.quiz)==null?void 0:ie.deadline_date)||"",deadline_time:((ne=x.quiz)==null?void 0:ne.deadline_time)||"",enforce_deadline:((de=x.quiz)==null?void 0:de.enforce_deadline)??!0,time_limit_minutes:((ae=x.quiz)==null?void 0:ae.time_limit_minutes)||null,allows_extensions:((ue=x.quiz)==null?void 0:ue.allows_extensions)||!1,max_attempts:((ce=x.quiz)==null?void 0:ce.max_attempts)||null,questions:h((me=x.quiz)==null?void 0:me.questions)}),j=L({get(){return d.course_type==="regular"?d.course_id:d.course_online_id},set(n){d.course_type==="regular"?(d.course_id=n,d.course_online_id=""):(d.course_online_id=n,d.course_id="")}}),z=()=>{d.course_id="",d.course_online_id=""};ze(()=>t.props.errors,n=>{V.value=n||{}},{immediate:!0,deep:!0});const S=L(()=>({...d.errors,...V.value})),B=L(()=>Object.keys(S.value).length>0),Q=L(()=>{var n;return{hasTitle:!!((n=d.title)!=null&&n.trim()),hasCourse:!!(d.course_id||d.course_online_id),hasValidThreshold:d.pass_threshold>=0&&d.pass_threshold<=100,hasQuestions:d.questions.length>0,allQuestionsValid:d.questions.every(o=>{var _;return(_=o.question_text)!=null&&_.trim()?o.type==="text"?!0:!(!o.points||o.points<=0||!o.options||o.options.length<2||!o.options.every(k=>k==null?void 0:k.trim())||!o.correct_answer||o.correct_answer.length===0):!1})}}),A=L(()=>Object.values(Q.value).every(Boolean)),F=L(()=>!A.value),J=L(()=>{const n=Object.keys(S.value).length;return n===0?{title:"",message:""}:{title:n===1?"Please fix the following issue:":`Please fix the following ${n} issues:`,message:"Review the highlighted fields below and correct any errors before saving."}}),C=(n,o="info",_=5e3)=>{const k=++X.value,R={id:k,message:n,type:o,show:!1};return q.value.push(R),fe(()=>{const b=q.value.findIndex(ke=>ke.id===k);b!==-1&&(q.value[b].show=!0)}),_>0&&setTimeout(()=>D(k),_),k},D=n=>{const o=q.value.findIndex(_=>_.id===n);o!==-1&&(q.value[o].show=!1,setTimeout(()=>{const _=q.value.findIndex(k=>k.id===n);_!==-1&&q.value.splice(_,1)},300))},l=n=>n.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase()).replace(/questions\.(\d+)\./,"Question $1 "),u=n=>{const o=S.value[n];return Array.isArray(o)?o[0]:o||null},g=n=>[`questions.${n}.question_text`,`questions.${n}.type`,`questions.${n}.points`,`questions.${n}.options`,`questions.${n}.correct_answer`].some(_=>u(_)),y=()=>{fe(()=>{const n=document.querySelector(".text-red-600, .border-red-300");n&&n.scrollIntoView({behavior:"smooth",block:"center"})})},M=()=>{try{d.questions.length<20&&d.questions.push({question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""})}catch(n){console.error("Error adding question:",n),C("Failed to add question. Please try again.","error")}},ge=n=>{try{d.questions.length>1&&d.questions.splice(n,1)}catch(o){console.error("Error removing question:",o),C("Failed to remove question. Please try again.","error")}},xe=n=>{try{d.questions[n].options.length<10&&d.questions[n].options.push("")}catch(o){console.error("Error adding option:",o),C("Failed to add option. Please try again.","error")}},he=(n,o)=>{try{const _=d.questions[n];if(_.options.length>2){const k=_.options[o];_.options.splice(o,1),Array.isArray(_.correct_answer)&&(_.correct_answer=_.correct_answer.filter(R=>R!==k))}}catch(_){console.error("Error removing option:",_),C("Failed to remove option. Please try again.","error")}},ye=n=>{try{const o=d.questions[n];o.type==="text"?(o.options=[],o.correct_answer=[],o.points=0):((!o.options||o.options.length<2)&&(o.options=["",""]),o.correct_answer=[]),o.correct_answer_explanation=""}catch(o){console.error("Error resetting question options:",o),C("Failed to reset question options. Please try again.","error")}},be=(n,o)=>{try{const _=d.questions[n];_.type==="radio"&&(_.correct_answer=[o])}catch(_){console.error("Error updating correct answer:",_),C("Failed to update correct answer. Please try again.","error")}},ve=()=>{try{if(V.value={},e.value=!1,d.status==="published"&&!A.value){C("Cannot publish quiz. Please fix all required fields first.","error",8e3),y();return}d.transform(n=>({course_type:d.course_type,course_id:d.course_type==="regular"?d.course_id:null,course_online_id:d.course_type==="online"?d.course_online_id:null,title:d.title,description:d.description,status:d.status,pass_threshold:d.pass_threshold,has_deadline:d.has_deadline,deadline_date:d.has_deadline?d.deadline_date:null,deadline_time:d.has_deadline?d.deadline_time:null,enforce_deadline:d.has_deadline?d.enforce_deadline:!0,time_limit_minutes:d.time_limit_minutes||null,allows_extensions:d.has_deadline?d.allows_extensions:!1,max_attempts:d.max_attempts||null,questions:d.questions.map(o=>({id:o.id||null,question_text:o.question_text,type:o.type,points:o.type==="text"?0:o.points,options:o.options?o.options.filter(_=>_&&_.trim()):[],correct_answer:Array.isArray(o.correct_answer)?o.correct_answer.filter(_=>_&&_.trim()):o.correct_answer?[o.correct_answer]:[],correct_answer_explanation:o.correct_answer_explanation||""}))})).put(route("admin.quizzes.update",x.quiz.id),{preserveState:!0,preserveScroll:!0,onStart:()=>{q.value.forEach(n=>D(n.id))},onSuccess:n=>{e.value=!0,C("Quiz updated successfully!","success",4e3),setTimeout(()=>{pe.visit(route("admin.quizzes.index"),{replace:!0})},1500)},onError:n=>{V.value=n;const o=Object.keys(n).length,_=o===1?"Please correct the error below.":`Please correct the ${o} errors below.`;C(_,"error",8e3),setTimeout(()=>{y()},100)},onFinish:()=>{}})}catch(n){console.error("Critical error in submitQuiz:",n),C("An unexpected error occurred. Please try again.","error")}},we=()=>{d.isDirty?P.value=!0:Y()},Y=()=>{d.reset(),V.value={},P.value=!1,e.value=!1,pe.visit(route("admin.quizzes.index"))};return{form:d,hasErrors:B,allErrors:S,errorSummary:J,publishingChecklist:Q,canPublish:A,hasPublishingRequirements:F,showDiscardModal:P,showSuccessMessage:e,toasts:q,toastClasses:N,toastIconClasses:E,selectedCourseId:j,resetCourseSelection:z,formatFieldName:l,getFieldError:u,hasQuestionErrors:g,scrollToFirstError:y,addQuestion:M,removeQuestion:ge,addOption:xe,removeOption:he,resetQuestionOptions:ye,updateCorrectAnswer:be,submitQuiz:ve,confirmDiscard:we,discardChanges:Y,addToast:C,removeToast:D,breadcrumbs:[{name:"Quizzes",route:"admin.quizzes.index"},{name:"Edit",route:null}]}}},Je={class:"mx-auto max-w-7xl py-12 sm:px-6 lg:px-8"},We={class:"mb-8 flex items-center justify-between"},Ge={key:0,class:"mb-6 rounded-lg border border-red-200 bg-red-50 p-6 shadow-sm"},Ke={class:"flex items-start"},Xe={class:"ml-3 flex-1"},Ye={class:"text-sm font-medium text-red-800"},Ze={class:"mt-2 text-sm text-red-700"},Ie={class:"mb-3"},$e={class:"list-disc pl-5 space-y-1"},et={class:"font-medium"},tt={class:"ml-4 flex-shrink-0"},rt={key:1,class:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4 shadow-sm"},st={key:2,class:"mb-6 rounded-lg border border-blue-200 bg-blue-50 p-4 shadow-sm"},ot={class:"flex items-start"},lt={class:"ml-3"},it={class:"mt-2 text-sm text-blue-700"},nt={class:"list-disc pl-5 space-y-1"},dt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},at={key:0,class:"mt-1 text-sm text-red-600"},ut={key:0},ct={key:0,class:"mt-1 text-sm text-red-600"},mt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},_t={key:0,class:"mt-1 text-sm text-red-600"},ft={key:0,class:"mt-1 text-sm text-red-600"},pt={class:"sm:col-span-2"},gt={key:0,class:"mt-1 text-sm text-red-600"},xt={class:"sm:col-span-2"},ht={key:0,class:"mt-1 text-sm text-red-600"},yt={class:"space-y-4"},bt={class:"flex items-center space-x-2"},vt=["disabled"],wt={key:0,class:"space-y-4 p-4 border rounded-lg bg-muted/20"},kt={class:"grid grid-cols-2 gap-4"},Ct={key:0,class:"mt-1 text-sm text-red-600"},Et={key:0,class:"mt-1 text-sm text-red-600"},Vt={class:"flex items-center space-x-2"},zt=["disabled"],Ft={key:0,class:"mt-1 text-sm text-red-600"},qt={class:"flex items-center space-x-2"},St=["disabled"],At={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Tt={key:0,class:"mt-1 text-sm text-red-600"},Qt={class:"mb-4 flex items-center justify-between"},Mt={key:0,class:"inline-flex items-center ml-2 px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},Ut={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Ot={class:"sm:col-span-2"},Lt={key:0,class:"mt-1 text-sm text-red-600"},Pt={key:0,class:"mt-1 text-sm text-red-600"},jt={key:0},Bt={key:0,class:"mt-1 text-sm text-red-600"},Dt={key:0,class:"mt-4"},Rt={key:0,class:"mt-1 text-sm text-red-600"},Ht={class:"mt-4"},Nt={key:0,class:"space-y-2"},Jt=["id","checked","value","name","disabled","onChange"],Wt=["for"],Gt={key:1,class:"space-y-2"},Kt=["id","value","onUpdate:modelValue","disabled"],Xt=["for"],Yt={key:2,class:"mt-1 text-sm text-red-600"},Zt={class:"mt-4"},It={key:1,class:"mt-4 rounded-lg bg-blue-50 p-3"},$t={class:"flex justify-end space-x-3"},er={key:0,class:"flex items-center"},tr={key:1},rr={class:"p-6 sm:p-8"},sr={class:"flex justify-end space-x-3"},or={key:3,class:"fixed top-4 right-4 z-50 space-y-2"},lr={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ir={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},nr={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},dr={class:"ml-3 text-sm font-normal"},ar=["onClick"];function ur(x,t,P,e,q,X){const N=w("Link"),E=w("Button"),V=w("CardTitle"),T=w("CardHeader"),h=w("Label"),d=w("SelectValue"),j=w("SelectTrigger"),z=w("SelectItem"),S=w("SelectContent"),B=w("Select"),Q=w("CardContent"),A=w("Card"),F=w("Input"),J=w("Textarea"),C=w("Modal"),D=w("AdminLayout");return a(),W(D,{breadcrumbs:e.breadcrumbs},{default:i(()=>[r("div",Je,[r("div",We,[t[18]||(t[18]=r("h1",{class:"text-3xl font-bold text-white"},"Edit Quiz",-1)),s(E,{"as-child":"",variant:"outline"},{default:i(()=>[s(N,{href:x.route("admin.quizzes.index")},{default:i(()=>t[17]||(t[17]=[r("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),m(" Back to Quizzes ")])),_:1},8,["href"])]),_:1})]),e.hasErrors?(a(),c("div",Ge,[r("div",Ke,[t[19]||(t[19]=r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),r("div",Xe,[r("h3",Ye,f(e.errorSummary.title),1),r("div",Ze,[r("p",Ie,f(e.errorSummary.message),1),r("ul",$e,[(a(!0),c(U,null,O(e.allErrors,(l,u)=>(a(),c("li",{key:u,class:"break-words"},[r("span",et,f(e.formatFieldName(u))+":",1),m(" "+f(Array.isArray(l)?l[0]:l),1)]))),128))])])]),r("div",tt,[r("button",{onClick:t[0]||(t[0]=(...l)=>e.scrollToFirstError&&e.scrollToFirstError(...l)),class:"inline-flex items-center rounded-md bg-red-100 px-3 py-1.5 text-xs font-medium text-red-800 hover:bg-red-200 transition-colors"}," Go to first error ")])])])):p("",!0),e.showSuccessMessage?(a(),c("div",rt,t[20]||(t[20]=[r("div",{class:"flex items-center"},[r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),r("p",{class:"ml-3 text-sm text-green-700 font-medium"}," Quiz saved successfully! ")],-1)]))):p("",!0),e.form.status==="published"&&e.hasPublishingRequirements?(a(),c("div",st,[r("div",ot,[t[23]||(t[23]=r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),r("div",lt,[t[22]||(t[22]=r("h3",{class:"text-sm font-medium text-blue-800"},"Publishing Requirements",-1)),r("div",it,[t[21]||(t[21]=r("p",{class:"mb-2"},"To publish this quiz, please ensure:",-1)),r("ul",nt,[r("li",{class:v(e.publishingChecklist.hasTitle?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasTitle?"âœ“":"âœ—")+" Quiz has a title ",3),r("li",{class:v(e.publishingChecklist.hasCourse?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasCourse?"âœ“":"âœ—")+" Course is selected ",3),r("li",{class:v(e.publishingChecklist.hasValidThreshold?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasValidThreshold?"âœ“":"âœ—")+" Pass threshold is set (0-100%) ",3),r("li",{class:v(e.publishingChecklist.hasQuestions?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasQuestions?"âœ“":"âœ—")+" At least one valid question ",3),r("li",{class:v(e.publishingChecklist.allQuestionsValid?"text-green-600":"text-red-600")},f(e.publishingChecklist.allQuestionsValid?"âœ“":"âœ—")+" All questions have correct answers ",3)])])])])])):p("",!0),r("form",{onSubmit:t[14]||(t[14]=_e((...l)=>e.submitQuiz&&e.submitQuiz(...l),["prevent"])),class:"space-y-8"},[s(A,null,{default:i(()=>[s(T,null,{default:i(()=>[s(V,null,{default:i(()=>t[24]||(t[24]=[m("Course Assignment")])),_:1})]),_:1}),s(Q,null,{default:i(()=>[r("div",dt,[r("div",null,[s(h,{for:"course_type",class:v(e.getFieldError("course_type")?"text-red-700":"")},{default:i(()=>t[25]||(t[25]=[m(" Course Type "),r("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),s(B,{modelValue:e.form.course_type,"onUpdate:modelValue":[t[1]||(t[1]=l=>e.form.course_type=l),e.resetCourseSelection],disabled:e.form.processing},{default:i(()=>[s(j,null,{default:i(()=>[s(d,{placeholder:"Select course type"})]),_:1}),s(S,null,{default:i(()=>[s(z,{value:"regular"},{default:i(()=>t[26]||(t[26]=[m("Regular Course")])),_:1}),s(z,{value:"online"},{default:i(()=>t[27]||(t[27]=[m("Online Course")])),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"]),e.getFieldError("course_type")?(a(),c("div",at,f(e.getFieldError("course_type")),1)):p("",!0)]),e.form.course_type?(a(),c("div",ut,[s(h,{for:"course_id",class:v(e.getFieldError("course_id")||e.getFieldError("course_online_id")?"text-red-700":"")},{default:i(()=>[m(" Select "+f(e.form.course_type==="regular"?"Regular":"Online")+" Course ",1),t[28]||(t[28]=r("span",{class:"text-red-500"},"*",-1))]),_:1},8,["class"]),s(B,{modelValue:e.selectedCourseId,"onUpdate:modelValue":t[2]||(t[2]=l=>e.selectedCourseId=l),disabled:e.form.processing},{default:i(()=>[s(j,null,{default:i(()=>[s(d,{placeholder:"Select Course"})]),_:1}),s(S,null,{default:i(()=>[(a(!0),c(U,null,O(e.form.course_type==="regular"?P.courses:P.onlineCourses,l=>(a(),W(z,{key:l.id,value:l.id.toString()},{default:i(()=>[m(f(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e.getFieldError("course_id")||e.getFieldError("course_online_id")?(a(),c("div",ct,f(e.getFieldError("course_id")||e.getFieldError("course_online_id")),1)):p("",!0)])):p("",!0)])]),_:1})]),_:1}),s(A,null,{default:i(()=>[s(T,null,{default:i(()=>[s(V,null,{default:i(()=>t[29]||(t[29]=[m("Quiz Details")])),_:1})]),_:1}),s(Q,{class:"space-y-6"},{default:i(()=>[r("div",mt,[r("div",null,[s(h,{for:"status",class:v(e.getFieldError("status")?"text-red-700":"")},{default:i(()=>t[30]||(t[30]=[m(" Status "),r("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),s(B,{modelValue:e.form.status,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.status=l),disabled:e.form.processing},{default:i(()=>[s(j,null,{default:i(()=>[s(d,{placeholder:"Select Status"})]),_:1}),s(S,null,{default:i(()=>[s(z,{value:"draft"},{default:i(()=>t[31]||(t[31]=[m("Draft")])),_:1}),s(z,{value:"published"},{default:i(()=>t[32]||(t[32]=[m("Published")])),_:1}),s(z,{value:"archived"},{default:i(()=>t[33]||(t[33]=[m("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),e.getFieldError("status")?(a(),c("div",_t,f(e.getFieldError("status")),1)):p("",!0)]),r("div",null,[s(h,{for:"pass_threshold",class:v(e.getFieldError("pass_threshold")?"text-red-700":"")},{default:i(()=>t[34]||(t[34]=[m(" Pass Threshold (%) "),r("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),s(F,{id:"pass_threshold",modelValue:e.form.pass_threshold,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.pass_threshold=l),modelModifiers:{number:!0},type:"number",min:"0",max:"100",step:"0.01",placeholder:"Enter pass threshold (e.g., 80.00)",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("pass_threshold")?(a(),c("div",ft,f(e.getFieldError("pass_threshold")),1)):p("",!0)]),r("div",pt,[s(h,{for:"title",class:v(e.getFieldError("title")?"text-red-700":"")},{default:i(()=>t[35]||(t[35]=[m(" Title "),r("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),s(F,{id:"title",modelValue:e.form.title,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.title=l),type:"text",placeholder:"Enter quiz title",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("title")?(a(),c("div",gt,f(e.getFieldError("title")),1)):p("",!0)]),r("div",xt,[s(h,{for:"description"},{default:i(()=>t[36]||(t[36]=[m("Description")])),_:1}),s(J,{id:"description",modelValue:e.form.description,"onUpdate:modelValue":t[6]||(t[6]=l=>e.form.description=l),rows:"4",placeholder:"Enter quiz description (optional)",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("description")?(a(),c("div",ht,f(e.getFieldError("description")),1)):p("",!0)])])]),_:1})]),_:1}),s(A,null,{default:i(()=>[s(T,null,{default:i(()=>[s(V,null,{default:i(()=>t[37]||(t[37]=[m("â° Deadline Settings")])),_:1})]),_:1}),s(Q,null,{default:i(()=>[r("div",yt,[r("div",bt,[G(r("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=l=>e.form.has_deadline=l),id:"has_deadline",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,vt),[[K,e.form.has_deadline]]),s(h,{for:"has_deadline"},{default:i(()=>t[38]||(t[38]=[m("Set a deadline for this quiz")])),_:1})]),e.form.has_deadline?(a(),c("div",wt,[r("div",kt,[r("div",null,[s(h,{for:"deadline_date"},{default:i(()=>t[39]||(t[39]=[m("Deadline Date")])),_:1}),s(F,{id:"deadline_date",type:"date",modelValue:e.form.deadline_date,"onUpdate:modelValue":t[8]||(t[8]=l=>e.form.deadline_date=l),disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("deadline_date")?(a(),c("div",Ct,f(e.getFieldError("deadline_date")),1)):p("",!0)]),r("div",null,[s(h,{for:"deadline_time"},{default:i(()=>t[40]||(t[40]=[m("Deadline Time")])),_:1}),s(F,{id:"deadline_time",type:"time",modelValue:e.form.deadline_time,"onUpdate:modelValue":t[9]||(t[9]=l=>e.form.deadline_time=l),disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("deadline_time")?(a(),c("div",Et,f(e.getFieldError("deadline_time")),1)):p("",!0)])]),r("div",Vt,[G(r("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=l=>e.form.enforce_deadline=l),id:"enforce_deadline",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,zt),[[K,e.form.enforce_deadline]]),s(h,{for:"enforce_deadline"},{default:i(()=>t[41]||(t[41]=[m("Strictly enforce deadline (no late submissions)")])),_:1})]),r("div",null,[s(h,{for:"time_limit_minutes"},{default:i(()=>t[42]||(t[42]=[m("Quiz time limit (minutes per attempt)")])),_:1}),s(F,{id:"time_limit_minutes",type:"number",modelValue:e.form.time_limit_minutes,"onUpdate:modelValue":t[11]||(t[11]=l=>e.form.time_limit_minutes=l),modelModifiers:{number:!0},disabled:e.form.processing,placeholder:"Leave empty for no time limit",min:"1",max:"1440"},null,8,["modelValue","disabled"]),t[43]||(t[43]=r("p",{class:"text-xs text-muted-foreground mt-1"},"Optional: Set how many minutes students have to complete the quiz",-1)),e.getFieldError("time_limit_minutes")?(a(),c("div",Ft,f(e.getFieldError("time_limit_minutes")),1)):p("",!0)]),r("div",qt,[G(r("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=l=>e.form.allows_extensions=l),id:"allows_extensions",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,St),[[K,e.form.allows_extensions]]),s(h,{for:"allows_extensions"},{default:i(()=>t[44]||(t[44]=[m("Allow deadline extensions upon request")])),_:1})])])):p("",!0)])]),_:1})]),_:1}),s(A,null,{default:i(()=>[s(T,null,{default:i(()=>[s(V,null,{default:i(()=>t[45]||(t[45]=[m("ðŸŽ¯ Attempt Settings")])),_:1})]),_:1}),s(Q,null,{default:i(()=>[r("div",At,[r("div",null,[s(h,{for:"max_attempts"},{default:i(()=>t[46]||(t[46]=[m("Maximum Attempts")])),_:1}),s(F,{id:"max_attempts",modelValue:e.form.max_attempts,"onUpdate:modelValue":t[13]||(t[13]=l=>e.form.max_attempts=l),modelModifiers:{number:!0},type:"number",min:"1",max:"100",disabled:e.form.processing,placeholder:"Leave empty for unlimited"},null,8,["modelValue","disabled"]),t[47]||(t[47]=r("p",{class:"text-xs text-muted-foreground mt-1"}," How many times can a user attempt this quiz? Leave empty for unlimited. ",-1)),e.getFieldError("max_attempts")?(a(),c("div",Tt,f(e.getFieldError("max_attempts")),1)):p("",!0)])])]),_:1})]),_:1}),s(A,null,{default:i(()=>[s(T,null,{default:i(()=>[s(V,null,{default:i(()=>[m("Questions ("+f(e.form.questions.length)+"/20)",1)]),_:1})]),_:1}),s(Q,null,{default:i(()=>[(a(!0),c(U,null,O(e.form.questions,(l,u)=>(a(),c("div",{key:`question-${u}`,class:v(["border dark rounded-lg p-4 mb-4",e.hasQuestionErrors(u)?"border-red-300 bg-red-50":""])},[r("div",Qt,[r("h3",{class:v(["text-sm font-medium",e.hasQuestionErrors(u)?"text-red-900":"text-white"])},[m(" Question "+f(u+1)+" ",1),e.hasQuestionErrors(u)?(a(),c("span",Mt," Has errors ")):p("",!0)],2),e.form.questions.length>1?(a(),W(E,{key:0,onClick:g=>e.removeQuestion(u),type:"button",variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive",disabled:e.form.processing},{default:i(()=>t[48]||(t[48]=[m(" Remove ")])),_:2},1032,["onClick","disabled"])):p("",!0)]),r("div",Ut,[r("div",Ot,[s(h,{for:`question_text_${u}`,class:v(e.getFieldError(`questions.${u}.question_text`)?"text-red-700":"")},{default:i(()=>t[49]||(t[49]=[m(" Question Text "),r("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),s(F,{id:`question_text_${u}`,modelValue:l.question_text,"onUpdate:modelValue":g=>l.question_text=g,type:"text",placeholder:"Enter question text",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.question_text`)?(a(),c("div",Lt,f(e.getFieldError(`questions.${u}.question_text`)),1)):p("",!0)]),r("div",null,[s(h,{for:`type_${u}`,class:v(e.getFieldError(`questions.${u}.type`)?"text-red-700":"")},{default:i(()=>t[50]||(t[50]=[m(" Type "),r("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),s(B,{id:`type_${u}`,modelValue:l.type,"onUpdate:modelValue":[g=>l.type=g,g=>e.resetQuestionOptions(u)],disabled:e.form.processing},{default:i(()=>[s(j,null,{default:i(()=>[s(d,{placeholder:"Select question type"})]),_:1}),s(S,null,{default:i(()=>[s(z,{value:"radio"},{default:i(()=>t[51]||(t[51]=[m("Radio (Single Choice)")])),_:1}),s(z,{value:"checkbox"},{default:i(()=>t[52]||(t[52]=[m("Checkbox (Multiple Choice)")])),_:1}),s(z,{value:"text"},{default:i(()=>t[53]||(t[53]=[m("Text (Open-ended)")])),_:1})]),_:1})]),_:2},1032,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.type`)?(a(),c("div",Pt,f(e.getFieldError(`questions.${u}.type`)),1)):p("",!0)]),l.type!=="text"?(a(),c("div",jt,[s(h,{for:`points_${u}`,class:v(e.getFieldError(`questions.${u}.points`)?"text-red-700":"")},{default:i(()=>t[54]||(t[54]=[m(" Points "),r("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),s(F,{id:`points_${u}`,modelValue:l.points,"onUpdate:modelValue":g=>l.points=g,modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Enter points",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.points`)?(a(),c("div",Bt,f(e.getFieldError(`questions.${u}.points`)),1)):p("",!0)])):p("",!0)]),l.type!=="text"?(a(),c("div",Dt,[t[59]||(t[59]=r("h4",{class:"mb-2 text-sm font-medium text-white"},"Options",-1)),(a(!0),c(U,null,O(l.options,(g,y)=>(a(),c("div",{key:`option-${u}-${y}`,class:"mb-2 flex items-center"},[s(F,{modelValue:l.options[y],"onUpdate:modelValue":M=>l.options[y]=M,type:"text",class:"flex-1",placeholder:`Option ${y+1}`,disabled:e.form.processing},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),l.options.length>2?(a(),W(E,{key:0,onClick:M=>e.removeOption(u,y),type:"button",variant:"ghost",size:"sm",class:"ml-2 text-destructive",disabled:e.form.processing},{default:i(()=>t[55]||(t[55]=[m(" Remove ")])),_:2},1032,["onClick","disabled"])):p("",!0)]))),128)),e.getFieldError(`questions.${u}.options`)?(a(),c("div",Rt,f(e.getFieldError(`questions.${u}.options`)),1)):p("",!0),s(E,{onClick:g=>e.addOption(u),type:"button",variant:"outline",size:"sm",class:"mt-2",disabled:e.form.processing||l.options.length>=10},{default:i(()=>t[56]||(t[56]=[m(" Add Option ")])),_:2},1032,["onClick","disabled"]),r("div",Ht,[t[57]||(t[57]=r("label",{class:"mb-1 block text-sm font-medium text-white"},[m(" Correct Answer(s) "),r("span",{class:"text-red-500"},"*")],-1)),l.type==="radio"?(a(),c("div",Nt,[(a(!0),c(U,null,O(l.options,(g,y)=>(a(),c("div",{key:`radio-${u}-${y}`,class:"flex items-center"},[r("input",{id:`correct_answer_${u}_${y}`,checked:l.correct_answer.includes(g),value:g,type:"radio",name:`correct_answer_${u}`,class:"h-4 w-4 dark text-indigo-600 focus:ring-indigo-500",disabled:e.form.processing||!g.trim(),onChange:M=>e.updateCorrectAnswer(u,g)},null,40,Jt),r("label",{for:`correct_answer_${u}_${y}`,class:"ml-2 text-sm text-white"},f(g||`Option ${y+1}`),9,Wt)]))),128))])):l.type==="checkbox"?(a(),c("div",Gt,[(a(!0),c(U,null,O(l.options,(g,y)=>(a(),c("div",{key:`checkbox-${u}-${y}`,class:"flex items-center"},[G(r("input",{id:`correct_answer_${u}_${y}`,value:g,type:"checkbox","onUpdate:modelValue":M=>l.correct_answer=M,class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:e.form.processing||!g.trim()},null,8,Kt),[[K,l.correct_answer]]),r("label",{for:`correct_answer_${u}_${y}`,class:"ml-2 text-sm text-white"},f(g||`Option ${y+1}`),9,Xt)]))),128))])):p("",!0),e.getFieldError(`questions.${u}.correct_answer`)?(a(),c("div",Yt,f(e.getFieldError(`questions.${u}.correct_answer`)),1)):p("",!0)]),r("div",Zt,[s(h,{for:`correct_answer_explanation_${u}`},{default:i(()=>t[58]||(t[58]=[m("Correct Answer Explanation")])),_:2},1032,["for"]),s(J,{id:`correct_answer_explanation_${u}`,modelValue:l.correct_answer_explanation,"onUpdate:modelValue":g=>l.correct_answer_explanation=g,rows:"2",placeholder:"Explain why this is correct (optional)",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"])])])):p("",!0),l.type==="text"?(a(),c("div",It,t[60]||(t[60]=[r("p",{class:"text-sm text-blue-700"}," ðŸ“ This is an open-ended text question. Students will provide their own written response. ",-1)]))):p("",!0)],2))),128)),s(E,{onClick:e.addQuestion,type:"button",disabled:e.form.processing||e.form.questions.length>=20},{default:i(()=>t[61]||(t[61]=[r("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Add Question ")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),r("div",$t,[s(E,{"as-child":"",variant:"outline",disabled:e.form.processing},{default:i(()=>[s(N,{href:x.route("admin.quizzes.index"),onClick:_e(e.confirmDiscard,["prevent"])},{default:i(()=>t[62]||(t[62]=[m(" Cancel ")])),_:1},8,["href","onClick"])]),_:1},8,["disabled"]),s(E,{type:"submit",disabled:e.form.processing||e.form.status==="published"&&!e.canPublish},{default:i(()=>[e.form.processing?(a(),c("span",er,t[63]||(t[63]=[r("svg",{class:"mr-2 h-5 w-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),m(" Saving... ")]))):(a(),c("span",tr,"Update Quiz"))]),_:1},8,["disabled"])])],32),s(C,{show:e.showDiscardModal,onClose:t[16]||(t[16]=l=>e.showDiscardModal=!1)},{default:i(()=>[r("div",rr,[t[66]||(t[66]=r("h2",{class:"mb-3 text-xl font-semibold text-white"},"Discard Changes",-1)),t[67]||(t[67]=r("p",{class:"mb-6 text-sm text-gray-600"},"Are you sure you want to discard your changes? This action cannot be undone.",-1)),r("div",sr,[s(E,{onClick:t[15]||(t[15]=l=>e.showDiscardModal=!1),variant:"outline",disabled:e.form.processing},{default:i(()=>t[64]||(t[64]=[m(" Cancel ")])),_:1},8,["disabled"]),s(E,{onClick:e.discardChanges,variant:"destructive",disabled:e.form.processing},{default:i(()=>t[65]||(t[65]=[m(" Discard ")])),_:1},8,["onClick","disabled"])])])]),_:1},8,["show"]),e.toasts.length>0?(a(),c("div",or,[(a(!0),c(U,null,O(e.toasts,l=>(a(),c("div",{key:l.id,class:v(["transform transition-all duration-300 ease-in-out",l.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[r("div",{class:v(["flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow-lg border",e.toastClasses[l.type]])},[r("div",{class:v(["inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",e.toastIconClasses[l.type]])},[l.type==="success"?(a(),c("svg",lr,t[68]||(t[68]=[r("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):l.type==="error"?(a(),c("svg",ir,t[69]||(t[69]=[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(a(),c("svg",nr,t[70]||(t[70]=[r("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))],2),r("div",dr,f(l.message),1),r("button",{onClick:u=>e.removeToast(l.id),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-white rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8"},t[71]||(t[71]=[r("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,ar)],2)],2))),128))])):p("",!0)])]),_:1},8,["breadcrumbs"])}const Nr=He(Ne,[["render",ur],["__scopeId","data-v-5a249da4"]]);export{Nr as default};
