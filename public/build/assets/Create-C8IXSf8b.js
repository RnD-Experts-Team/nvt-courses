import{d as I,C as ee,c as q,a as c,o as u,b as s,u as e,m as te,w as o,e as r,P as B,f as d,t as f,j as se,h as x,F as V,i as C,g as v}from"./app-De5aCyOy.js";import{f as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as $}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as U}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as z}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as Q}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as D}from"./index-CNloWqrH.js";import{_ as oe}from"./Switch.vue_vue_type_script_setup_true_lang-Cp6QCENU.js";import{_ as M,a as A,b as T,c as S,d as y}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{A as ie}from"./arrow-left-kG5YrchA.js";import{T as re}from"./target-CkYXQ-0W.js";import{C as de}from"./circle-help-BeDrtfy1.js";import{P as E}from"./plus-BEctqVRE.js";import{T as N}from"./trash-2-cH28u5cA.js";import{S as ne}from"./save-Cj1WR6gV.js";import{R as ae}from"./refresh-cw-BJXsbrVc.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./useForwardExpose-Cyi8rQxf.js";import"./VisuallyHidden-9kO_gd9f.js";import"./VisuallyHiddenInput-CPW02NT0.js";import"./usePrimitiveElement-B41iOtr7.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";const ue={class:"max-w-5xl mx-auto space-y-6 pb-12"},me={class:"flex items-center gap-4"},pe={class:"text-muted-foreground"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ce={class:"md:col-span-2"},_e={key:0,class:"text-sm text-destructive mt-1"},be={class:"md:col-span-2"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ve={class:"text-xs text-muted-foreground mt-1"},ye={class:"flex items-center gap-3 pt-4 border-t"},we={class:"flex items-center justify-between"},xe={class:"flex items-start justify-between gap-4"},Ve={class:"flex items-center gap-2"},he={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ke={class:"md:col-span-3"},Ce={class:"space-y-4"},$e={key:0},Ue={key:0,class:"space-y-3"},ze={class:"flex items-center justify-between"},Oe=["type","name","checked","onChange","disabled"],Qe={class:"text-xs text-muted-foreground"},Me={key:1,class:"bg-blue-50 dark:bg-blue-950 p-3 rounded-lg"},Ae={class:"flex items-center justify-end gap-3"},wt=I({__name:"Create",props:{module:{},course:{},showCorrectAnswersOptions:{}},setup(R){const g=R,F=[{title:"Course Online",href:"/admin/course-online"},{title:g.course.name,href:`/admin/course-online/${g.course.id}`},{title:`Module ${g.module.order_number}: ${g.module.name}`,href:"#"},{title:"Create Quiz",href:"#"}],l=ee({title:"",description:"",status:"draft",pass_threshold:70,required_to_proceed:!0,max_attempts:3,retry_delay_hours:0,show_correct_answers:"after_pass",time_limit_minutes:null,questions:[P()]});function P(){return{question_text:"",type:"radio",points:1,options:["",""],correct_answer:[],correct_answer_explanation:""}}const h=q(()=>l.questions.filter(n=>n.type!=="text").reduce((n,t)=>n+(t.points||0),0)),L=q(()=>Math.ceil(l.pass_threshold/100*h.value));function H(){l.questions.length<50&&l.questions.push(P())}function G(n){l.questions.length>1&&l.questions.splice(n,1)}function J(n){l.questions[n].options.length<10&&l.questions[n].options.push("")}function K(n,t){const i=l.questions[n];if(i.options.length>2){const m=i.options[t];i.options.splice(t,1);const a=i.correct_answer.indexOf(m);a>-1&&i.correct_answer.splice(a,1)}}function W(n){const t=l.questions[n];t.type==="text"?(t.options=[],t.correct_answer=[],t.points=0):(t.options.length<2&&(t.options=["",""]),t.correct_answer=[],t.points===0&&(t.points=1))}function X(n,t){const i=l.questions[n];if(i.type==="radio")i.correct_answer=[t];else if(i.type==="checkbox"){const m=i.correct_answer.indexOf(t);m>-1?i.correct_answer.splice(m,1):i.correct_answer.push(t)}}function Y(n,t){return l.questions[n].correct_answer.includes(t)}function Z(){l.post(route("admin.module-quiz.store",{courseOnline:g.course.id,courseModule:g.module.id}))}return(n,t)=>(u(),c(V,null,[s(e(te),{title:`Create Quiz - ${n.module.name}`},null,8,["title"]),s(le,{breadcrumbs:F},{default:o(()=>[r("div",ue,[r("div",me,[s(e(_),{"as-child":"",variant:"ghost",size:"sm"},{default:o(()=>[s(e(B),{href:`/admin/course-online/${n.course.id}`},{default:o(()=>[s(e(ie),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=d(" Back "))]),_:1},8,["href"])]),_:1}),r("div",null,[t[10]||(t[10]=r("h1",{class:"text-2xl font-bold"},"Create Module Quiz",-1)),r("p",pe,f(n.course.name)+" â†’ Module "+f(n.module.order_number)+": "+f(n.module.name),1)])]),r("form",{onSubmit:se(Z,["prevent"]),class:"space-y-6"},[s(e($),null,{default:o(()=>[s(e(z),null,{default:o(()=>[s(e(O),null,{default:o(()=>t[11]||(t[11]=[d("Quiz Details")])),_:1}),s(e(j),null,{default:o(()=>t[12]||(t[12]=[d("Basic information about the quiz")])),_:1})]),_:1}),s(e(U),{class:"space-y-4"},{default:o(()=>[r("div",fe,[r("div",ce,[s(e(p),{for:"title"},{default:o(()=>t[13]||(t[13]=[d("Quiz Title")])),_:1}),s(e(b),{id:"title",modelValue:e(l).title,"onUpdate:modelValue":t[0]||(t[0]=i=>e(l).title=i),placeholder:"e.g., Module 1 Assessment",disabled:e(l).processing},null,8,["modelValue","disabled"]),e(l).errors.title?(u(),c("p",_e,f(e(l).errors.title),1)):x("",!0)]),r("div",be,[s(e(p),{for:"description"},{default:o(()=>t[14]||(t[14]=[d("Description (Optional)")])),_:1}),s(e(Q),{id:"description",modelValue:e(l).description,"onUpdate:modelValue":t[1]||(t[1]=i=>e(l).description=i),placeholder:"Brief description of what this quiz covers...",rows:"3",disabled:e(l).processing},null,8,["modelValue","disabled"])]),r("div",null,[s(e(p),{for:"status"},{default:o(()=>t[15]||(t[15]=[d("Status")])),_:1}),s(e(M),{modelValue:e(l).status,"onUpdate:modelValue":t[2]||(t[2]=i=>e(l).status=i),disabled:e(l).processing},{default:o(()=>[s(e(A),null,{default:o(()=>[s(e(T))]),_:1}),s(e(S),null,{default:o(()=>[s(e(y),{value:"draft"},{default:o(()=>t[16]||(t[16]=[d("Draft")])),_:1}),s(e(y),{value:"published"},{default:o(()=>t[17]||(t[17]=[d("Published")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"])])])]),_:1})]),_:1}),s(e($),null,{default:o(()=>[s(e(z),null,{default:o(()=>[s(e(O),{class:"flex items-center gap-2"},{default:o(()=>[s(e(re),{class:"h-5 w-5"}),t[18]||(t[18]=d(" Quiz Settings "))]),_:1})]),_:1}),s(e(U),{class:"space-y-6"},{default:o(()=>[r("div",ge,[r("div",null,[s(e(p),{for:"pass_threshold"},{default:o(()=>t[19]||(t[19]=[d("Pass Threshold (%)")])),_:1}),s(e(b),{id:"pass_threshold",modelValue:e(l).pass_threshold,"onUpdate:modelValue":t[3]||(t[3]=i=>e(l).pass_threshold=i),modelModifiers:{number:!0},type:"number",min:"0",max:"100",disabled:e(l).processing},null,8,["modelValue","disabled"]),r("p",ve," Passing score: "+f(L.value)+" / "+f(h.value)+" points ",1)]),r("div",null,[s(e(p),{for:"max_attempts"},{default:o(()=>t[20]||(t[20]=[d("Max Attempts")])),_:1}),s(e(b),{id:"max_attempts",modelValue:e(l).max_attempts,"onUpdate:modelValue":t[4]||(t[4]=i=>e(l).max_attempts=i),modelModifiers:{number:!0},type:"number",min:"1",max:"100",disabled:e(l).processing},null,8,["modelValue","disabled"])]),r("div",null,[s(e(p),{for:"time_limit"},{default:o(()=>t[21]||(t[21]=[d("Time Limit (minutes)")])),_:1}),s(e(b),{id:"time_limit",modelValue:e(l).time_limit_minutes,"onUpdate:modelValue":t[5]||(t[5]=i=>e(l).time_limit_minutes=i),modelModifiers:{number:!0},type:"number",min:"1",max:"1440",placeholder:"No limit",disabled:e(l).processing},null,8,["modelValue","disabled"])]),r("div",null,[s(e(p),{for:"retry_delay"},{default:o(()=>t[22]||(t[22]=[d("Retry Delay (hours)")])),_:1}),s(e(b),{id:"retry_delay",modelValue:e(l).retry_delay_hours,"onUpdate:modelValue":t[6]||(t[6]=i=>e(l).retry_delay_hours=i),modelModifiers:{number:!0},type:"number",min:"0",max:"168",disabled:e(l).processing},null,8,["modelValue","disabled"]),t[23]||(t[23]=r("p",{class:"text-xs text-muted-foreground mt-1"},"0 = no delay",-1))]),r("div",null,[s(e(p),{for:"show_correct_answers"},{default:o(()=>t[24]||(t[24]=[d("Show Correct Answers")])),_:1}),s(e(M),{modelValue:e(l).show_correct_answers,"onUpdate:modelValue":t[7]||(t[7]=i=>e(l).show_correct_answers=i),disabled:e(l).processing},{default:o(()=>[s(e(A),null,{default:o(()=>[s(e(T))]),_:1}),s(e(S),null,{default:o(()=>[(u(!0),c(V,null,C(n.showCorrectAnswersOptions,i=>(u(),v(e(y),{key:i.value,value:i.value},{default:o(()=>[d(f(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),r("div",ye,[s(e(oe),{id:"required_to_proceed",checked:e(l).required_to_proceed,"onUpdate:checked":t[8]||(t[8]=i=>e(l).required_to_proceed=i),disabled:e(l).processing},null,8,["checked","disabled"]),r("div",null,[s(e(p),{for:"required_to_proceed",class:"cursor-pointer"},{default:o(()=>t[25]||(t[25]=[d("Required to Proceed")])),_:1}),t[26]||(t[26]=r("p",{class:"text-xs text-muted-foreground"}," Students must pass this quiz to unlock the next module ",-1))])])]),_:1})]),_:1}),s(e($),null,{default:o(()=>[s(e(z),null,{default:o(()=>[r("div",we,[r("div",null,[s(e(O),{class:"flex items-center gap-2"},{default:o(()=>[s(e(de),{class:"h-5 w-5"}),d(" Questions ("+f(e(l).questions.length)+") ",1)]),_:1}),s(e(j),null,{default:o(()=>[d(" Total Points: "+f(h.value),1)]),_:1})]),s(e(_),{type:"button",variant:"outline",size:"sm",onClick:H,disabled:e(l).processing||e(l).questions.length>=50},{default:o(()=>[s(e(E),{class:"h-4 w-4 mr-2"}),t[27]||(t[27]=d(" Add Question "))]),_:1},8,["disabled"])])]),_:1}),s(e(U),{class:"space-y-6"},{default:o(()=>[(u(!0),c(V,null,C(e(l).questions,(i,m)=>(u(),c("div",{key:m,class:"border rounded-lg p-4 space-y-4 bg-muted/30"},[r("div",xe,[r("div",Ve,[s(e(D),{variant:"outline"},{default:o(()=>[d("Q"+f(m+1),1)]),_:2},1024),i.type!=="text"?(u(),v(e(D),{key:0,variant:"secondary"},{default:o(()=>[d(f(i.points)+" pts ",1)]),_:2},1024)):x("",!0)]),e(l).questions.length>1?(u(),v(e(_),{key:0,type:"button",variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive",onClick:a=>G(m),disabled:e(l).processing},{default:o(()=>[s(e(N),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])):x("",!0)]),r("div",he,[r("div",ke,[s(e(p),null,{default:o(()=>t[28]||(t[28]=[d("Question Text")])),_:1}),s(e(Q),{modelValue:i.question_text,"onUpdate:modelValue":a=>i.question_text=a,placeholder:"Enter your question...",rows:"2",disabled:e(l).processing},null,8,["modelValue","onUpdate:modelValue","disabled"])]),r("div",Ce,[r("div",null,[s(e(p),null,{default:o(()=>t[29]||(t[29]=[d("Type")])),_:1}),s(e(M),{modelValue:i.type,"onUpdate:modelValue":[a=>i.type=a,a=>W(m)],disabled:e(l).processing},{default:o(()=>[s(e(A),null,{default:o(()=>[s(e(T))]),_:1}),s(e(S),null,{default:o(()=>[s(e(y),{value:"radio"},{default:o(()=>t[30]||(t[30]=[d("Single Choice")])),_:1}),s(e(y),{value:"checkbox"},{default:o(()=>t[31]||(t[31]=[d("Multiple Choice")])),_:1}),s(e(y),{value:"text"},{default:o(()=>t[32]||(t[32]=[d("Text Answer")])),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),i.type!=="text"?(u(),c("div",$e,[s(e(p),null,{default:o(()=>t[33]||(t[33]=[d("Points")])),_:1}),s(e(b),{modelValue:i.points,"onUpdate:modelValue":a=>i.points=a,modelModifiers:{number:!0},type:"number",min:"0",disabled:e(l).processing},null,8,["modelValue","onUpdate:modelValue","disabled"])])):x("",!0)])]),i.type!=="text"?(u(),c("div",Ue,[r("div",ze,[s(e(p),null,{default:o(()=>t[34]||(t[34]=[d("Answer Options")])),_:1}),s(e(_),{type:"button",variant:"ghost",size:"sm",onClick:a=>J(m),disabled:e(l).processing||i.options.length>=10},{default:o(()=>[s(e(E),{class:"h-3 w-3 mr-1"}),t[35]||(t[35]=d(" Add Option "))]),_:2},1032,["onClick","disabled"])]),(u(!0),c(V,null,C(i.options,(a,w)=>(u(),c("div",{key:w,class:"flex items-center gap-2"},[r("input",{type:i.type==="radio"?"radio":"checkbox",name:`question_${m}_correct`,checked:Y(m,a),onChange:k=>X(m,a),disabled:e(l).processing||!a.trim(),class:"h-4 w-4"},null,40,Oe),s(e(b),{modelValue:i.options[w],"onUpdate:modelValue":k=>i.options[w]=k,placeholder:`Option ${w+1}`,class:"flex-1",disabled:e(l).processing},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),i.options.length>2?(u(),v(e(_),{key:0,type:"button",variant:"ghost",size:"sm",onClick:k=>K(m,w),disabled:e(l).processing},{default:o(()=>[s(e(N),{class:"h-4 w-4 text-muted-foreground"})]),_:2},1032,["onClick","disabled"])):x("",!0)]))),128)),r("p",Qe,f(i.type==="radio"?"Select one correct answer":"Select all correct answers"),1)])):(u(),c("div",Me,t[36]||(t[36]=[r("p",{class:"text-sm text-blue-700 dark:text-blue-300"}," ðŸ“ Text questions require manual grading and don't contribute to automatic scoring. ",-1)]))),r("div",null,[s(e(p),null,{default:o(()=>t[37]||(t[37]=[d("Explanation (Optional)")])),_:1}),s(e(Q),{modelValue:i.correct_answer_explanation,"onUpdate:modelValue":a=>i.correct_answer_explanation=a,placeholder:"Explain why this answer is correct...",rows:"2",disabled:e(l).processing},null,8,["modelValue","onUpdate:modelValue","disabled"])])]))),128))]),_:1})]),_:1}),r("div",Ae,[s(e(_),{"as-child":"",variant:"outline",disabled:e(l).processing},{default:o(()=>[s(e(B),{href:`/admin/course-online/${n.course.id}`},{default:o(()=>t[38]||(t[38]=[d("Cancel")])),_:1},8,["href"])]),_:1},8,["disabled"]),s(e(_),{type:"submit",disabled:e(l).processing},{default:o(()=>[e(l).processing?(u(),v(e(ae),{key:1,class:"h-4 w-4 mr-2 animate-spin"})):(u(),v(e(ne),{key:0,class:"h-4 w-4 mr-2"})),d(" "+f(e(l).processing?"Creating...":"Create Quiz"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{wt as default};
