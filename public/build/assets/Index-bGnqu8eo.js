import{P as N,z as m,g as k,o as d,w as s,e,b as l,a as p,h as w,f as i,F as j,i as A,t as c,n as q,r as C,c as Q,W as F,l as H}from"./app-De5aCyOy.js";import{M as E}from"./Modal-DIc89iOp.js";import{l as P}from"./lodash-D8CZwZrT.js";import{_ as U}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as I}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as O}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as R}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as W}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as Y}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{b as J,a as K,d as X,c as Z,_ as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as ee}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";const te={components:{AdminLayout:U,Link:N,Modal:E,Button:I,Card:O,CardContent:R,CardHeader:W,CardTitle:G,Label:Y,Select:$,SelectContent:Z,SelectItem:X,SelectTrigger:K,SelectValue:J},props:{quizzes:{type:Object,required:!0},filters:{type:Object,default:()=>({})},courses:{type:Array,default:()=>[]}},setup(_){const t=[{name:"Dashboard",route:"admin.dashboard"},{name:"Quizzes",route:null}],a=C({course_id:_.filters.course_id||"",status:_.filters.status||""}),r=C(!1),b=C(null),x=C(!1),g=Q(()=>a.value.course_id!==""||a.value.status!==""),f=()=>{const n=_.courses.find(u=>u.id==a.value.course_id);return n?n.name:""},z=()=>{const n=f(),u=a.value.status;return n&&u?`No ${u} quizzes found for "${n}" course.`:n?`No quizzes found for "${n}" course.`:u?`No ${u} quizzes found. Try selecting a different status or clearing filters.`:"Try adjusting your filter criteria or clear all filters to see available quizzes."},S=()=>{a.value={course_id:"",status:""},h()},h=P.debounce(()=>{x.value=!0;const n=Object.fromEntries(Object.entries(a.value).filter(([u,y])=>y&&y!=="all"));F.get(route("admin.quizzes.index"),n,{preserveState:!0,preserveScroll:!0,onFinish:()=>{x.value=!1}})},300);return H(a,h,{deep:!0}),{breadcrumbs:t,filters:a,applyFilters:h,goToPage:n=>{n&&!x.value&&(x.value=!0,F.get(n,{},{preserveState:!0,preserveScroll:!0,onFinish:()=>{x.value=!1}}))},showDeleteModal:r,confirmDelete:n=>{console.log("confirmDelete called with quizId:",n),b.value=n,r.value=!0},deleteQuiz:()=>{if(console.log("deleteQuiz called"),console.log("quizToDelete.value:",b.value),console.log("isLoading.value:",x.value),x.value){console.log("Already loading, returning early");return}x.value=!0;const n=route("admin.quizzes.destroy",b.value);console.log("Delete URL:",n),F.delete(n,{preserveScroll:!0,onBefore:()=>{console.log("onBefore: Request is about to be made")},onStart:()=>{console.log("onStart: Request has started")},onSuccess:u=>{console.log("onSuccess: Delete successful",u),r.value=!1,b.value=null},onError:u=>{console.error("onError: Delete error:",u),r.value=!1},onFinish:()=>{console.log("onFinish: Request finished"),x.value=!1}})},isLoading:x,hasActiveFilters:g,getFilteredEmptyMessage:z,clearFilters:S}}},se={class:"container mx-auto px-4 py-6 sm:px-6 lg:px-8"},oe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6"},le={class:"flex flex-col gap-2 sm:flex-row sm:gap-3"},re={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:gap-6"},ne={class:"space-y-2"},ie={class:"space-y-2"},ae={class:"mt-4 flex justify-end"},de={key:0,class:"overflow-x-auto"},ue={class:"w-full"},me={class:"divide-y divide-border"},ce={class:"px-4 py-4 text-sm font-medium text-foreground sm:px-6"},fe={class:"max-w-xs truncate"},pe={class:"sm:hidden text-xs text-muted-foreground mt-1"},xe={class:"hidden sm:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},_e={class:"max-w-xs truncate"},ge={class:"px-4 py-4 text-sm sm:px-6"},ve={class:"hidden md:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},he={class:"hidden md:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},ke={class:"hidden lg:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},be={class:"hidden xl:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},ye={key:0,class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"},we={key:1,class:"text-muted-foreground text-xs"},Ce={class:"px-4 py-4 text-sm font-medium sm:px-6"},ze={class:"flex items-center gap-1 sm:gap-2"},Se={key:1,class:"text-center py-12 px-4"},Le={class:"text-lg font-semibold text-foreground mb-2"},Me={class:"text-muted-foreground mb-6 max-w-sm mx-auto text-sm"},je={key:0},Ae={key:1},Fe={class:"flex flex-col gap-3 sm:flex-row sm:justify-center"},Be={key:0,class:"mt-6"},De={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Te={class:"text-sm text-muted-foreground"},Ve={class:"font-medium text-foreground"},Ne={class:"font-medium text-foreground"},qe={class:"font-medium text-foreground"},Qe={class:"flex flex-wrap gap-1 justify-center sm:justify-end"},He={class:"p-6 sm:p-8"},Ee={class:"flex flex-col gap-3 sm:flex-row sm:justify-end"},Pe={key:0,class:"flex items-center"},Ue={key:1};function Ie(_,t,a,r,b,x){const g=m("Link"),f=m("Button"),z=m("CardTitle"),S=m("CardHeader"),h=m("Label"),L=m("SelectValue"),M=m("SelectTrigger"),v=m("SelectItem"),n=m("SelectContent"),u=m("Select"),y=m("CardContent"),B=m("Card"),D=m("Modal"),T=m("AdminLayout");return d(),k(T,{breadcrumbs:r.breadcrumbs},{default:s(()=>[e("div",se,[e("div",oe,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold tracking-tight text-foreground sm:text-3xl"},"Quiz Attempts",-1)),e("div",le,[l(f,{"as-child":""},{default:s(()=>[l(g,{href:_.route("admin.quizzes.create")},{default:s(()=>t[4]||(t[4]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),i(" Create Quiz ")])),_:1},8,["href"])]),_:1}),l(f,{variant:"outline","as-child":""},{default:s(()=>[l(g,{href:_.route("admin.quiz-attempts.index")},{default:s(()=>t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),i(" Quiz-attempts ")])),_:1},8,["href"])]),_:1})])]),l(B,{class:"mb-6"},{default:s(()=>[l(S,null,{default:s(()=>[l(z,null,{default:s(()=>t[7]||(t[7]=[i("Filter Quizzes")])),_:1})]),_:1}),l(y,null,{default:s(()=>[e("div",re,[e("div",ne,[l(h,{for:"course_id"},{default:s(()=>t[8]||(t[8]=[i("Course")])),_:1}),l(u,{modelValue:r.filters.course_id,"onUpdate:modelValue":[t[0]||(t[0]=o=>r.filters.course_id=o),r.applyFilters],disabled:r.isLoading},{default:s(()=>[l(M,{id:"course_id"},{default:s(()=>[l(L,{placeholder:"All Courses"})]),_:1}),l(n,null,{default:s(()=>[l(v,{value:"all"},{default:s(()=>t[9]||(t[9]=[i("All Courses")])),_:1}),(d(!0),p(j,null,A(a.courses,o=>(d(),k(v,{key:o.id,value:o.id.toString()},{default:s(()=>[i(c(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled","onUpdate:modelValue"])]),e("div",ie,[l(h,{for:"status"},{default:s(()=>t[10]||(t[10]=[i("Status")])),_:1}),l(u,{modelValue:r.filters.status,"onUpdate:modelValue":[t[1]||(t[1]=o=>r.filters.status=o),r.applyFilters],disabled:r.isLoading},{default:s(()=>[l(M,{id:"status"},{default:s(()=>[l(L,{placeholder:"All Statuses"})]),_:1}),l(n,null,{default:s(()=>[l(v,{value:"all"},{default:s(()=>t[11]||(t[11]=[i("All Statuses")])),_:1}),l(v,{value:"draft"},{default:s(()=>t[12]||(t[12]=[i("Draft")])),_:1}),l(v,{value:"published"},{default:s(()=>t[13]||(t[13]=[i("Published")])),_:1}),l(v,{value:"archived"},{default:s(()=>t[14]||(t[14]=[i("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled","onUpdate:modelValue"])])]),e("div",ae,[r.hasActiveFilters?(d(),k(f,{key:0,onClick:r.clearFilters,variant:"outline",size:"sm",disabled:r.isLoading},{default:s(()=>t[15]||(t[15]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),i(" Clear Filters ")])),_:1},8,["onClick","disabled"])):w("",!0)])]),_:1})]),_:1}),l(B,null,{default:s(()=>[l(y,{class:"p-0"},{default:s(()=>[a.quizzes.data&&a.quizzes.data.length>0?(d(),p("div",de,[e("table",ue,[t[20]||(t[20]=e("thead",{class:"border-b bg-muted/50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Title "),e("th",{scope:"col",class:"hidden sm:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Course "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Status "),e("th",{scope:"col",class:"hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Questions "),e("th",{scope:"col",class:"hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Attempts "),e("th",{scope:"col",class:"hidden lg:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Total Points "),e("th",{scope:"col",class:"hidden xl:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Time Limit "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Actions ")])],-1)),e("tbody",me,[(d(!0),p(j,null,A(a.quizzes.data,o=>(d(),p("tr",{key:o.id,class:"hover:bg-muted/50 transition-colors duration-150"},[e("td",ce,[e("div",fe,c(o.title),1),e("div",pe,c(o.course?o.course.name:"N/A"),1)]),e("td",xe,[e("div",_e,c(o.course?o.course.name:"N/A"),1)]),e("td",ge,[e("span",{class:q(["inline-flex items-center px-2 py-1 text-xs font-medium rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":o.status==="published","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":o.status==="draft","bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":o.status==="archived"}])},c(o.status.charAt(0).toUpperCase()+o.status.slice(1)),3)]),e("td",ve,c(o.questions_count),1),e("td",he,c(o.attempts_count),1),e("td",ke,c(o.total_points),1),e("td",be,[o.time_limit_minutes?(d(),p("span",ye,[t[16]||(t[16]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i(" "+c(o.time_limit_minutes)+" min ",1)])):(d(),p("span",we,"No limit"))]),e("td",Ce,[e("div",ze,[l(f,{variant:"outline",size:"sm","as-child":""},{default:s(()=>[l(g,{href:_.route("admin.quizzes.show",o.id)},{default:s(()=>t[17]||(t[17]=[e("svg",{class:"w-4 h-4 sm:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),e("span",{class:"hidden sm:inline"},"View",-1)])),_:2},1032,["href"])]),_:2},1024),l(f,{variant:"outline",size:"sm","as-child":""},{default:s(()=>[l(g,{href:_.route("admin.quizzes.edit",o.id)},{default:s(()=>t[18]||(t[18]=[e("svg",{class:"w-4 h-4 sm:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),e("span",{class:"hidden sm:inline"},"Edit",-1)])),_:2},1032,["href"])]),_:2},1024),o.attempts_count?w("",!0):(d(),k(f,{key:0,onClick:V=>r.confirmDelete(o.id),variant:"outline",size:"sm",class:"text-destructive hover:text-destructive",disabled:r.isLoading},{default:s(()=>t[19]||(t[19]=[e("svg",{class:"w-4 h-4 sm:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",{class:"hidden sm:inline"},"Delete",-1)])),_:2},1032,["onClick","disabled"]))])])]))),128))])])])):(d(),p("div",Se,[t[23]||(t[23]=e("div",{class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-muted mb-4"},[e("svg",{class:"h-8 w-8 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("h3",Le,c(r.hasActiveFilters?"No Quizzes Match Your Filters":"No Quizzes Available"),1),e("p",Me,[r.hasActiveFilters?(d(),p("span",je,c(r.getFilteredEmptyMessage()),1)):(d(),p("span",Ae," Get started by creating your first quiz to assess student knowledge and engagement. "))]),e("div",Fe,[l(f,{"as-child":""},{default:s(()=>[l(g,{href:_.route("admin.quizzes.create")},{default:s(()=>t[21]||(t[21]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),i(" Create First Quiz ")])),_:1},8,["href"])]),_:1}),r.hasActiveFilters?(d(),k(f,{key:0,onClick:r.clearFilters,variant:"outline"},{default:s(()=>t[22]||(t[22]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),i(" Clear Filters ")])),_:1},8,["onClick"])):w("",!0)])]))]),_:1})]),_:1}),a.quizzes.data&&a.quizzes.data.length>0&&a.quizzes.meta?(d(),p("div",Be,[e("div",De,[e("div",Te,[t[24]||(t[24]=i(" Showing ")),e("span",Ve,c(a.quizzes.meta.from||0),1),t[25]||(t[25]=i(" to ")),e("span",Ne,c(a.quizzes.meta.to||0),1),t[26]||(t[26]=i(" of ")),e("span",qe,c(a.quizzes.meta.total||0),1),t[27]||(t[27]=i(" quizzes "))]),e("div",Qe,[(d(!0),p(j,null,A(a.quizzes.meta.links,o=>(d(),k(f,{key:o.label,disabled:!o.url||r.isLoading,onClick:V=>r.goToPage(o.url),variant:o.active?"default":"outline-solid",size:"sm",innerHTML:o.label},null,8,["disabled","onClick","variant","innerHTML"]))),128))])])])):w("",!0),l(D,{show:r.showDeleteModal,onClose:t[3]||(t[3]=o=>r.showDeleteModal=!1)},{default:s(()=>[e("div",He,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-foreground mb-3"},"Confirm Deletion",-1)),t[31]||(t[31]=e("p",{class:"text-sm text-muted-foreground mb-6"}," Are you sure you want to delete this quiz? This action cannot be undone. ",-1)),e("div",Ee,[l(f,{onClick:t[2]||(t[2]=o=>r.showDeleteModal=!1),variant:"outline",disabled:r.isLoading},{default:s(()=>t[28]||(t[28]=[i(" Cancel ")])),_:1},8,["disabled"]),l(f,{onClick:r.deleteQuiz,variant:"destructive",disabled:r.isLoading},{default:s(()=>[r.isLoading?(d(),p("span",Pe,t[29]||(t[29]=[e("svg",{class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),i(" Deleting... ")]))):(d(),p("span",Ue,"Delete"))]),_:1},8,["onClick","disabled"])])])]),_:1},8,["show"])])]),_:1},8,["breadcrumbs"])}const bt=ee(te,[["render",Ie],["__scopeId","data-v-7f2470a0"]]);export{bt as default};
