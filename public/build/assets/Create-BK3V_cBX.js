import{d as he,r as G,C as xe,c as z,a as p,o as c,b as s,u as e,m as ke,w as r,e as l,P as ee,f as n,t as f,j as Ce,h as _,n as b,s as V,v as N,F as M,i as j,g as k,k as we,D as te}from"./app-De5aCyOy.js";import{m as Ve,C as $e,f as Ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{c as De,_ as y}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as $}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as U}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as P}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as se}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as S}from"./Switch.vue_vue_type_script_setup_true_lang-Cp6QCENU.js";import{_ as le,a as oe}from"./index-Bl7hX8X-.js";import{_ as q}from"./index-CNloWqrH.js";import{A as Fe}from"./arrow-left-kG5YrchA.js";import{B as O}from"./book-open-pPANAQ7D.js";import{F as R}from"./file-text-BOOsEpvl.js";import{C as Me}from"./calendar-BbiMWXwU.js";import{T as K}from"./triangle-alert-QBZ4KeJk.js";import{U as H}from"./upload-BM6JiC8r.js";import{X as Pe}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import{P as J}from"./plus-BEctqVRE.js";import{C as Se}from"./chevron-up-CPyPlHCY.js";import{T as ie}from"./trash-2-cH28u5cA.js";import{V as re}from"./video-BHwv2L3O.js";import{F as de}from"./folder-open-D5fTPG2s.js";import{C as qe}from"./clock-BXDw5ZYb.js";import{S as Ae}from"./save-Cj1WR6gV.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./useForwardExpose-Cyi8rQxf.js";import"./VisuallyHidden-9kO_gd9f.js";import"./VisuallyHiddenInput-CPW02NT0.js";import"./usePrimitiveElement-B41iOtr7.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=De("CalendarClockIcon",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),Be={class:"max-w-4xl mx-auto space-y-6"},ze={class:"flex items-center gap-4"},Ne={class:"hidden sm:flex items-center gap-4 text-sm text-muted-foreground"},je={class:"flex items-center gap-2"},Re={class:"flex items-center gap-2"},Ee={class:"space-y-2"},Le={key:0,class:"text-sm text-destructive"},Ge={class:"space-y-2"},Oe={key:0,class:"text-sm text-destructive"},Ke={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},He={class:"space-y-2"},Je={key:0,class:"text-sm text-destructive"},Xe={class:"space-y-2"},Qe={key:0,class:"text-sm text-destructive"},We={class:"space-y-2"},Ye={class:"flex items-center space-x-2 pt-2"},Ze={class:"text-sm text-muted-foreground"},Ie={class:"space-y-2"},et={key:0,class:"text-sm text-destructive"},tt={key:1,class:"text-sm text-destructive"},st={class:"space-y-2"},lt={key:0,class:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg border"},ot={class:"flex items-start gap-3"},it={class:"flex-1"},rt={class:"font-medium text-blue-900 dark:text-blue-100"},dt={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},at={class:"text-xs text-muted-foreground mt-2"},nt={key:1,class:"space-y-4"},ut={class:"relative w-48 h-32 rounded-lg overflow-hidden border mx-auto"},ct=["src"],mt={class:"text-center"},pt={key:2,class:"text-sm text-destructive"},ft={class:"flex items-center justify-between"},_t={key:0,class:"text-center py-12 border-2 border-dashed border-input rounded-lg"},vt={key:1,class:"space-y-6"},gt={class:"flex items-center justify-between"},yt={class:"flex items-center gap-3"},bt={class:"w-8 h-8 bg-primary/10 text-primary rounded-full flex items-center justify-center text-sm font-semibold"},ht={class:"flex items-center gap-1"},xt={class:"space-y-4"},kt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ct={class:"space-y-2"},wt={key:0,class:"text-sm text-destructive"},Vt={class:"space-y-2"},$t={key:0,class:"text-sm text-destructive"},Ut={class:"space-y-2"},Dt={key:0,class:"text-sm text-destructive"},Ft={class:"flex items-center gap-6"},Mt={class:"flex items-center space-x-2"},Pt={class:"flex items-center space-x-2"},St={class:"border rounded-lg p-4 bg-muted/20"},qt={class:"flex items-center justify-between mb-4"},At={class:"flex items-center gap-2"},Tt={key:0,class:"text-center py-8 border-2 border-dashed border-input rounded-lg"},Bt={key:1,class:"space-y-4"},zt={class:"flex items-center justify-between"},Nt={class:"flex items-center gap-2"},jt={class:"w-6 h-6 bg-primary/10 text-primary rounded-full flex items-center justify-center text-xs font-medium"},Rt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Et={class:"space-y-2"},Lt=["onUpdate:modelValue","onChange"],Gt={class:"space-y-2"},Ot={key:0,class:"space-y-4"},Kt={key:0,class:"space-y-2"},Ht=["value","onChange"],Jt=["value"],Xt={class:"text-xs text-muted-foreground flex items-center gap-1"},Qt={class:"space-y-2"},Wt=["onUpdate:modelValue"],Yt=["value"],Zt={key:0},It={key:0,class:"text-sm text-amber-600 dark:text-amber-500 flex items-center gap-1"},es={key:1,class:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg"},ts={class:"flex items-center gap-3"},ss=["src","alt"],ls={class:"flex-1"},os={class:"font-medium text-sm"},is={class:"flex items-center gap-2 mt-1"},rs={class:"flex items-center gap-1 text-xs text-muted-foreground"},ds={key:1,class:"space-y-4"},as={class:"space-y-3"},ns={class:"flex gap-6"},us={class:"flex items-center space-x-2"},cs=["onUpdate:modelValue"],ms={class:"flex items-center space-x-2"},ps=["onUpdate:modelValue"],fs={key:0},_s=["onChange"],vs={key:1,class:"space-y-2"},gs={class:"space-y-2"},ys={class:"space-y-2"},bs={key:0,class:"text-sm text-destructive"},hs={key:1,class:"p-3 bg-purple-50 dark:bg-purple-950 rounded-lg"},xs={class:"flex items-center gap-3"},ks={class:"flex-1"},Cs={class:"font-medium text-sm"},ws={class:"text-xs text-muted-foreground"},Vs={key:0},$s={class:"flex items-center gap-6 pt-2 border-t"},Us={class:"flex items-center space-x-2"},Ds={class:"flex items-center space-x-2"},Fs={class:"flex justify-between items-center py-6"},Ms={class:"flex items-center gap-4"},Ps={key:0,class:"text-sm text-muted-foreground hidden sm:block"},fl=he({__name:"Create",props:{availableVideos:{},videoCategories:{}},setup(ae){const A=ae,ne=[{title:"Course Online",href:"/admin/course-online"},{title:"Create Course",href:"/admin/course-online/create"}],T=G(null),C=G(null),B=G({}),o=xe({name:"",description:"",image:null,difficulty_level:"",estimated_duration:null,is_active:!0,deadline:null,deadline_type:"flexible",modules:[]}),X=(a,t)=>{if(!A.availableVideos)return[];const d=`${a}-${t}`,u=B.value[d];if(u==null||u==="")return A.availableVideos;const i=parseInt(u.toString());return A.availableVideos.filter(v=>v.content_category_id===i)},ue=(a,t,d)=>{const u=`${a}-${t}`;d===""||d===null||d===void 0?B.value[u]=null:B.value[u]=parseInt(d.toString())},ce=z(()=>!o.name||!o.difficulty_level||o.modules.length===0||!o.deadline?!1:o.modules.every(a=>a.name.trim()?!a.content||a.content.length===0?!0:a.content.every(t=>{const d=t.title&&t.content_type;return t.content_type==="pdf"?d&&t.pdf_page_count&&t.pdf_page_count>0&&t.pdf_page_count<=1e3&&(t.pdf_source_type==="upload"&&t.pdf_file||t.pdf_source_type==="google_drive"&&t.google_drive_pdf_url.trim()):d}):!1)),Q=z(()=>o.modules.reduce((a,t)=>{var d;return a+(((d=t.content)==null?void 0:d.length)||0)},0)),me=z(()=>{const a=new Date;return a.setDate(a.getDate()+1),a.toISOString().slice(0,16)}),E=z(()=>{if(!o.deadline)return null;const a=new Date(o.deadline);return{formatted:a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),relative:Math.ceil((a.getTime()-new Date().getTime())/(1e3*60*60*24))}}),pe=a=>{var u;const t=a.target,d=(u=t.files)==null?void 0:u[0];if(d){if(d.size>2*1024*1024){alert("File size must be less than 2MB"),t.value="";return}o.image=d;const i=new FileReader;i.onload=v=>{var w;C.value=(w=v.target)==null?void 0:w.result},i.readAsDataURL(d)}},fe=()=>{o.image=null,C.value=null,T.value&&(T.value.value="")},W=()=>{var a;(a=T.value)==null||a.click()},Y=()=>{o.modules.push({name:"",description:"",order_number:o.modules.length+1,estimated_duration:null,is_required:!0,is_active:!0,content:[]})},_e=a=>{confirm("Are you sure you want to remove this module and all its content?")&&(o.modules.splice(a,1),o.modules.forEach((t,d)=>{t.order_number=d+1}))},Z=(a,t)=>{const d=t==="up"?a-1:a+1;if(d<0||d>=o.modules.length)return;const u=o.modules[a];o.modules[a]=o.modules[d],o.modules[d]=u,o.modules.forEach((i,v)=>{i.order_number=v+1})},I=a=>{o.modules[a].content||(o.modules[a].content=[]),o.modules[a].content.push({title:"",content_type:"video",order_number:o.modules[a].content.length+1,is_required:!0,is_active:!0,video_id:null,pdf_source_type:"upload",pdf_file:null,google_drive_pdf_url:"",pdf_name:"",pdf_page_count:null})},ve=(a,t)=>{confirm("Are you sure you want to remove this content item?")&&(o.modules[a].content.splice(t,1),o.modules[a].content.forEach((d,u)=>{d.order_number=u+1}))},ge=(a,t)=>{const d=o.modules[a].content[t];d.video_id=null,d.pdf_file=null,d.google_drive_pdf_url="",d.pdf_source_type="upload",d.pdf_name="",d.pdf_page_count=null},ye=(a,t,d)=>{var v;const i=(v=a.target.files)==null?void 0:v[0];i&&i.type==="application/pdf"&&(o.modules[t].content[d].pdf_file=i,o.modules[t].content[d].pdf_name=i.name)},x=a=>{var t;return(t=A.availableVideos)==null?void 0:t.find(d=>d.id===a)},L=a=>{if(a.content_type==="pdf"){if(!a.pdf_page_count||a.pdf_page_count<1)return"PDF page count is required and must be at least 1";if(a.pdf_page_count>1e3)return"Page count cannot exceed 1000";if(a.pdf_source_type==="upload"&&!a.pdf_file)return"Please upload a PDF file";if(a.pdf_source_type==="google_drive"&&!a.google_drive_pdf_url.trim())return"Please provide Google Drive URL"}return null},be=()=>{var a;for(let t=0;t<o.modules.length;t++){const d=o.modules[t];for(let u=0;u<(((a=d.content)==null?void 0:a.length)||0);u++){const i=d.content[u],v=L(i);if(v){alert(`Module ${t+1}, Content ${u+1}: ${v}`);return}}}o.post("/admin/course-online",{onSuccess:()=>{o.reset(),C.value=null}})};return(a,t)=>(c(),p(M,null,[s(e(ke),{title:"Create Complete Course"}),s(Ue,{breadcrumbs:ne},{default:r(()=>[l("div",Be,[l("div",ze,[s(e(y),{"as-child":"",variant:"ghost"},{default:r(()=>[s(e(ee),{href:"/admin/course-online"},{default:r(()=>[s(e(Fe),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=n(" Back to Courses "))]),_:1})]),_:1}),t[8]||(t[8]=l("div",{class:"flex-1"},[l("h1",{class:"text-3xl font-bold"},"Create Complete Course"),l("p",{class:"text-muted-foreground"},"Build course, modules, and content all in one place")],-1)),l("div",Ne,[l("div",je,[s(e(O),{class:"h-4 w-4"}),n(" "+f(e(o).modules.length)+" modules ",1)]),l("div",Re,[s(e(R),{class:"h-4 w-4"}),n(" "+f(Q.value)+" content items ",1)])])]),l("form",{onSubmit:Ce(be,["prevent"]),class:"space-y-6"},[s(e($),null,{default:r(()=>[s(e(D),null,{default:r(()=>[s(e(F),{class:"flex items-center gap-2"},{default:r(()=>[s(e(O),{class:"h-5 w-5 text-primary"}),t[9]||(t[9]=n(" Course Information "))]),_:1}),s(e(P),null,{default:r(()=>t[10]||(t[10]=[n(" Enter the basic details for your online course ")])),_:1})]),_:1}),s(e(U),{class:"space-y-6"},{default:r(()=>[l("div",Ee,[s(e(g),{for:"name"},{default:r(()=>t[11]||(t[11]=[n("Course Name")])),_:1}),s(e(h),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=d=>e(o).name=d),type:"text",placeholder:"Enter course name",class:b({"border-destructive":e(o).errors.name}),required:""},null,8,["modelValue","class"]),e(o).errors.name?(c(),p("div",Le,f(e(o).errors.name),1)):_("",!0)]),l("div",Ge,[s(e(g),{for:"description"},{default:r(()=>t[12]||(t[12]=[n("Course Description")])),_:1}),s(e(se),{id:"description",modelValue:e(o).description,"onUpdate:modelValue":t[1]||(t[1]=d=>e(o).description=d),placeholder:"Describe what students will learn in this course...",rows:4,class:b({"border-destructive":e(o).errors.description})},null,8,["modelValue","class"]),e(o).errors.description?(c(),p("div",Oe,f(e(o).errors.description),1)):_("",!0)]),l("div",Ke,[l("div",He,[s(e(g),{for:"difficulty_level"},{default:r(()=>t[13]||(t[13]=[n("Difficulty Level")])),_:1}),V(l("select",{id:"difficulty_level","onUpdate:modelValue":t[2]||(t[2]=d=>e(o).difficulty_level=d),required:"",class:b(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive":e(o).errors.difficulty_level}])},t[14]||(t[14]=[l("option",{value:""},"Select difficulty",-1),l("option",{value:"beginner"},"Beginner",-1),l("option",{value:"intermediate"},"Intermediate",-1),l("option",{value:"advanced"},"Advanced",-1)]),2),[[N,e(o).difficulty_level]]),e(o).errors.difficulty_level?(c(),p("div",Je,f(e(o).errors.difficulty_level),1)):_("",!0)]),l("div",Xe,[s(e(g),{for:"estimated_duration"},{default:r(()=>t[15]||(t[15]=[n("Duration (minutes)")])),_:1}),s(e(h),{id:"estimated_duration",modelValue:e(o).estimated_duration,"onUpdate:modelValue":t[3]||(t[3]=d=>e(o).estimated_duration=d),modelModifiers:{number:!0},type:"number",min:"1",placeholder:"e.g. 120",class:b({"border-destructive":e(o).errors.estimated_duration})},null,8,["modelValue","class"]),e(o).errors.estimated_duration?(c(),p("div",Qe,f(e(o).errors.estimated_duration),1)):_("",!0)]),l("div",We,[s(e(g),null,{default:r(()=>t[16]||(t[16]=[n("Course Status")])),_:1}),l("div",Ye,[s(e(S),{checked:e(o).is_active,"onUpdate:checked":t[4]||(t[4]=d=>e(o).is_active=d)},null,8,["checked"]),l("span",Ze,f(e(o).is_active?"Active":"Inactive"),1)])])])]),_:1})]),_:1}),s(e($),null,{default:r(()=>[s(e(D),null,{default:r(()=>[s(e(F),{class:"flex items-center gap-2"},{default:r(()=>[s(e(Me),{class:"h-5 w-5 text-primary"}),t[18]||(t[18]=n(" Course Deadline ")),s(e(q),{variant:"destructive",class:"ml-2"},{default:r(()=>t[17]||(t[17]=[n("Required")])),_:1})]),_:1}),s(e(P),null,{default:r(()=>t[19]||(t[19]=[n(" Set a completion deadline for this course - all courses must have a deadline ")])),_:1})]),_:1}),s(e(U),{class:"space-y-6"},{default:r(()=>[l("div",Ie,[s(e(g),{for:"deadline"},{default:r(()=>t[20]||(t[20]=[n("ðŸ“… Deadline Date & Time *")])),_:1}),s(e(h),{id:"deadline",modelValue:e(o).deadline,"onUpdate:modelValue":t[5]||(t[5]=d=>e(o).deadline=d),type:"datetime-local",min:me.value,class:b([{"border-destructive":e(o).errors.deadline||!e(o).deadline},"w-full"]),required:""},null,8,["modelValue","min","class"]),e(o).errors.deadline?(c(),p("div",et,f(e(o).errors.deadline),1)):_("",!0),e(o).deadline?_("",!0):(c(),p("div",tt," Course deadline is required for all courses "))]),l("div",st,[s(e(g),{for:"deadline_type"},{default:r(()=>t[21]||(t[21]=[n("âš™ï¸ Deadline Type")])),_:1}),V(l("select",{id:"deadline_type","onUpdate:modelValue":t[6]||(t[6]=d=>e(o).deadline_type=d),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},t[22]||(t[22]=[l("option",{value:"flexible"},"Flexible - Allow completion after deadline",-1),l("option",{value:"strict"},"Strict - Block access after deadline",-1)]),512),[[N,e(o).deadline_type]])]),e(o).deadline&&E.value?(c(),p("div",lt,[l("div",ot,[s(e(Te),{class:"h-5 w-5 text-blue-600 mt-0.5"}),l("div",it,[l("div",rt," ðŸ“… "+f(E.value.formatted),1),l("div",dt," â° "+f(E.value.relative)+" days from now ",1),l("div",at," Type: "+f(e(o).deadline_type==="flexible"?"Flexible (late completion allowed)":"Strict (access blocked after deadline)"),1)])])])):_("",!0),s(e(le),null,{default:r(()=>[s(e(K),{class:"h-4 w-4"}),s(e(oe),null,{default:r(()=>t[23]||(t[23]=[l("strong",null,"Required:",-1),n(" All courses must have a deadline. This ensures proper progress tracking and evaluation reporting. Students and managers will be notified about the deadline automatically. ")])),_:1})]),_:1})]),_:1})]),_:1}),s(e($),null,{default:r(()=>[s(e(D),null,{default:r(()=>[s(e(F),{class:"flex items-center gap-2"},{default:r(()=>[s(e(H),{class:"h-5 w-5 text-primary"}),t[24]||(t[24]=n(" Course Image "))]),_:1}),s(e(P),null,{default:r(()=>t[25]||(t[25]=[n(" Upload a course image to make it more attractive ")])),_:1})]),_:1}),s(e(U),{class:"space-y-4"},{default:r(()=>[l("input",{ref_key:"imageInput",ref:T,type:"file",accept:"image/*",onChange:pe,class:"hidden"},null,544),C.value?_("",!0):(c(),p("div",{key:0,onClick:W,class:b(["border-2 border-dashed border-input rounded-lg p-8 text-center cursor-pointer hover:border-primary transition-colors",{"border-destructive":e(o).errors.image}])},[s(e(H),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),t[26]||(t[26]=l("div",{class:"text-sm font-medium mb-2"},"Click to upload course image",-1)),t[27]||(t[27]=l("div",{class:"text-xs text-muted-foreground"},"PNG, JPG, GIF up to 2MB",-1))],2)),C.value?(c(),p("div",nt,[l("div",ut,[l("img",{src:C.value,alt:"Course preview",class:"w-full h-full object-cover"},null,8,ct),s(e(y),{onClick:fe,variant:"destructive",size:"sm",class:"absolute top-2 right-2 h-8 w-8 p-0 rounded-full",type:"button"},{default:r(()=>[s(e(Pe),{class:"h-4 w-4"})]),_:1})]),l("div",mt,[s(e(y),{onClick:W,variant:"outline",size:"sm",type:"button"},{default:r(()=>[s(e(H),{class:"h-4 w-4 mr-2"}),t[28]||(t[28]=n(" Change Image "))]),_:1})])])):_("",!0),e(o).errors.image?(c(),p("div",pt,f(e(o).errors.image),1)):_("",!0)]),_:1})]),_:1}),s(e($),null,{default:r(()=>[s(e(D),null,{default:r(()=>[l("div",ft,[l("div",null,[s(e(F),{class:"flex items-center gap-2"},{default:r(()=>[s(e(Ve),{class:"h-5 w-5 text-primary"}),t[29]||(t[29]=n(" Course Modules ")),s(e(q),{variant:"secondary"},{default:r(()=>[n(f(e(o).modules.length),1)]),_:1})]),_:1}),s(e(P),null,{default:r(()=>t[30]||(t[30]=[n(" Build your course structure with modules and content ")])),_:1})]),s(e(y),{type:"button",onClick:Y,class:"shrink-0"},{default:r(()=>[s(e(J),{class:"h-4 w-4 mr-2"}),t[31]||(t[31]=n(" Add Module "))]),_:1})])]),_:1}),s(e(U),null,{default:r(()=>[e(o).modules.length===0?(c(),p("div",_t,[s(e(O),{class:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),t[33]||(t[33]=l("h3",{class:"text-lg font-medium mb-2"},"No modules added yet",-1)),t[34]||(t[34]=l("p",{class:"text-muted-foreground mb-4"},"Add your first module to start building your course",-1)),s(e(y),{type:"button",onClick:Y},{default:r(()=>[s(e(J),{class:"h-4 w-4 mr-2"}),t[32]||(t[32]=n(" Add First Module "))]),_:1})])):(c(),p("div",vt,[(c(!0),p(M,null,j(e(o).modules,(d,u)=>(c(),k(e($),{key:`module-${u}`,class:"border-2"},{default:r(()=>[s(e(D),{class:"pb-4"},{default:r(()=>{var i;return[l("div",gt,[l("div",yt,[l("div",bt,f(u+1),1),l("div",null,[s(e(F),{class:"text-lg"},{default:r(()=>[n("Module "+f(u+1),1)]),_:2},1024),(i=d.content)!=null&&i.length?(c(),k(e(P),{key:0},{default:r(()=>[n(f(d.content.length)+" content items ",1)]),_:2},1024)):_("",!0)])]),l("div",ht,[u>0?(c(),k(e(y),{key:0,type:"button",variant:"ghost",size:"sm",onClick:v=>Z(u,"up")},{default:r(()=>[s(e(Se),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0),u<e(o).modules.length-1?(c(),k(e(y),{key:1,type:"button",variant:"ghost",size:"sm",onClick:v=>Z(u,"down")},{default:r(()=>[s(e($e),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0),s(e(y),{type:"button",variant:"ghost",size:"sm",onClick:v=>_e(u),class:"text-destructive hover:text-destructive"},{default:r(()=>[s(e(ie),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]}),_:2},1024),s(e(U),{class:"space-y-6"},{default:r(()=>[l("div",xt,[l("div",kt,[l("div",Ct,[s(e(g),{for:`module-name-${u}`},{default:r(()=>t[35]||(t[35]=[n("Module Name")])),_:2},1032,["for"]),s(e(h),{id:`module-name-${u}`,modelValue:d.name,"onUpdate:modelValue":i=>d.name=i,type:"text",required:"",placeholder:`Module ${u+1} name`,class:b({"border-destructive":e(o).errors[`modules.${u}.name`]})},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"]),e(o).errors[`modules.${u}.name`]?(c(),p("div",wt,f(e(o).errors[`modules.${u}.name`]),1)):_("",!0)]),l("div",Vt,[s(e(g),{for:`module-duration-${u}`},{default:r(()=>t[36]||(t[36]=[n("Duration (minutes)")])),_:2},1032,["for"]),s(e(h),{id:`module-duration-${u}`,modelValue:d.estimated_duration,"onUpdate:modelValue":i=>d.estimated_duration=i,modelModifiers:{number:!0},type:"number",min:"1",placeholder:"e.g. 30",class:b({"border-destructive":e(o).errors[`modules.${u}.estimated_duration`]})},null,8,["id","modelValue","onUpdate:modelValue","class"]),e(o).errors[`modules.${u}.estimated_duration`]?(c(),p("div",$t,f(e(o).errors[`modules.${u}.estimated_duration`]),1)):_("",!0)])]),l("div",Ut,[s(e(g),{for:`module-description-${u}`},{default:r(()=>t[37]||(t[37]=[n("Module Description")])),_:2},1032,["for"]),s(e(se),{id:`module-description-${u}`,modelValue:d.description,"onUpdate:modelValue":i=>d.description=i,rows:3,placeholder:`Describe what students will learn in module ${u+1}`,class:b({"border-destructive":e(o).errors[`modules.${u}.description`]})},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"]),e(o).errors[`modules.${u}.description`]?(c(),p("div",Dt,f(e(o).errors[`modules.${u}.description`]),1)):_("",!0)]),l("div",Ft,[l("div",Mt,[s(e(S),{checked:d.is_required,"onUpdate:checked":i=>d.is_required=i},null,8,["checked","onUpdate:checked"]),s(e(g),{class:"text-sm"},{default:r(()=>t[38]||(t[38]=[n("Required module")])),_:1})]),l("div",Pt,[s(e(S),{checked:d.is_active,"onUpdate:checked":i=>d.is_active=i},null,8,["checked","onUpdate:checked"]),s(e(g),{class:"text-sm"},{default:r(()=>t[39]||(t[39]=[n("Active module")])),_:1})])])]),l("div",St,[l("div",qt,[l("div",At,[s(e(re),{class:"h-5 w-5 text-primary"}),t[40]||(t[40]=l("h4",{class:"font-medium"},"Module Content",-1)),s(e(q),{variant:"outline"},{default:r(()=>{var i;return[n(f(((i=d.content)==null?void 0:i.length)||0)+" items",1)]}),_:2},1024)]),s(e(y),{type:"button",variant:"outline",size:"sm",onClick:i=>I(u)},{default:r(()=>[s(e(J),{class:"h-4 w-4 mr-2"}),t[41]||(t[41]=n(" Add Content "))]),_:2},1032,["onClick"])]),!d.content||d.content.length===0?(c(),p("div",Tt,[s(e(R),{class:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),t[43]||(t[43]=l("p",{class:"text-muted-foreground text-sm mb-4"},"No content added yet",-1)),s(e(y),{type:"button",variant:"outline",size:"sm",onClick:i=>I(u)},{default:r(()=>t[42]||(t[42]=[n(" Add first content item ")])),_:2},1032,["onClick"])])):(c(),p("div",Bt,[(c(!0),p(M,null,j(d.content,(i,v)=>(c(),k(e($),{key:`content-${u}-${v}`,class:"border"},{default:r(()=>[s(e(D),{class:"pb-3"},{default:r(()=>[l("div",zt,[l("div",Nt,[l("div",jt,f(v+1),1),s(e(F),{class:"text-base"},{default:r(()=>[n("Content Item "+f(v+1),1)]),_:2},1024),i.content_type?(c(),k(e(q),{key:0,class:b(i.content_type==="video"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300")},{default:r(()=>[(c(),k(we(i.content_type==="video"?e(re):e(R)),{class:"h-3 w-3 mr-1"})),n(" "+f(i.content_type),1)]),_:2},1032,["class"])):_("",!0)]),s(e(y),{type:"button",variant:"ghost",size:"sm",onClick:w=>ve(u,v),class:"text-destructive hover:text-destructive"},{default:r(()=>[s(e(ie),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024),s(e(U),{class:"space-y-4"},{default:r(()=>{var w;return[l("div",Rt,[l("div",Et,[s(e(g),null,{default:r(()=>t[44]||(t[44]=[n("Content Type")])),_:1}),V(l("select",{"onUpdate:modelValue":m=>i.content_type=m,required:"",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onChange:m=>ge(u,v)},t[45]||(t[45]=[l("option",{value:""},"Select type",-1),l("option",{value:"video"},"Video",-1),l("option",{value:"pdf"},"PDF Document",-1)]),40,Lt),[[N,i.content_type]])]),l("div",Gt,[s(e(g),null,{default:r(()=>t[46]||(t[46]=[n("Content Title")])),_:1}),s(e(h),{modelValue:i.title,"onUpdate:modelValue":m=>i.title=m,type:"text",required:"",placeholder:"Enter content title"},null,8,["modelValue","onUpdate:modelValue"])])]),i.content_type==="video"?(c(),p("div",Ot,[a.videoCategories&&a.videoCategories.length>0?(c(),p("div",Kt,[s(e(g),null,{default:r(()=>t[47]||(t[47]=[n("Filter by Category")])),_:1}),l("select",{value:B.value[`${u}-${v}`]||"",onChange:m=>ue(u,v,m.target.value?parseInt(m.target.value):null),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[48]||(t[48]=l("option",{value:""},"All Categories",-1)),(c(!0),p(M,null,j(a.videoCategories,m=>(c(),p("option",{key:m.id,value:m.id},f(m.name)+" ("+f(m.videos_count)+" videos) ",9,Jt))),128))],40,Ht),l("p",Xt,[s(e(de),{class:"h-3 w-3"}),t[49]||(t[49]=n(" Filter videos by category to find what you need faster "))])])):_("",!0),l("div",Qt,[s(e(g),null,{default:r(()=>t[50]||(t[50]=[n("Select Video")])),_:1}),V(l("select",{"onUpdate:modelValue":m=>i.video_id=m,required:"",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[51]||(t[51]=l("option",{value:""},"Choose a video",-1)),(c(!0),p(M,null,j(X(u,v),m=>(c(),p("option",{key:m.id,value:m.id},[n(f(m.name)+" ",1),m.category_name?(c(),p("span",Zt," ("+f(m.category_name)+")",1)):_("",!0),n(" - "+f(m.formatted_duration),1)],8,Yt))),128))],8,Wt),[[N,i.video_id]]),X(u,v).length===0?(c(),p("p",It,[s(e(K),{class:"h-3 w-3"}),t[52]||(t[52]=n(" No videos found in this category. Try selecting a different category. "))])):_("",!0)]),i.video_id&&x(i.video_id)?(c(),p("div",es,[l("div",ts,[(w=x(i.video_id))!=null&&w.thumbnail_url?(c(),p("img",{key:0,src:x(i.video_id).thumbnail_url,alt:x(i.video_id).name,class:"w-16 h-12 object-cover rounded"},null,8,ss)):_("",!0),l("div",ls,[l("p",os,f(x(i.video_id).name),1),l("div",is,[x(i.video_id).category_name?(c(),k(e(q),{key:0,variant:"outline",class:"text-xs"},{default:r(()=>[s(e(de),{class:"h-3 w-3 mr-1"}),n(" "+f(x(i.video_id).category_name),1)]),_:2},1024)):_("",!0),l("div",rs,[s(e(qe),{class:"h-3 w-3"}),n(" "+f(x(i.video_id).formatted_duration),1)])])])])])):_("",!0)])):_("",!0),i.content_type==="pdf"?(c(),p("div",ds,[l("div",as,[s(e(g),null,{default:r(()=>t[53]||(t[53]=[n("PDF Source")])),_:1}),l("div",ns,[l("label",us,[V(l("input",{"onUpdate:modelValue":m=>i.pdf_source_type=m,type:"radio",value:"upload",class:"text-primary"},null,8,cs),[[te,i.pdf_source_type]]),t[54]||(t[54]=l("span",{class:"text-sm"},"Upload File",-1))]),l("label",ms,[V(l("input",{"onUpdate:modelValue":m=>i.pdf_source_type=m,type:"radio",value:"google_drive",class:"text-primary"},null,8,ps),[[te,i.pdf_source_type]]),t[55]||(t[55]=l("span",{class:"text-sm"},"Google Drive URL",-1))])]),i.pdf_source_type==="upload"?(c(),p("div",fs,[l("input",{type:"file",accept:".pdf",onChange:m=>ye(m,u,v),class:"block w-full text-sm text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-primary/10 file:text-primary hover:file:bg-primary/20"},null,40,_s)])):_("",!0),i.pdf_source_type==="google_drive"?(c(),p("div",vs,[s(e(h),{modelValue:i.google_drive_pdf_url,"onUpdate:modelValue":m=>i.google_drive_pdf_url=m,type:"url",placeholder:"https://drive.google.com/..."},null,8,["modelValue","onUpdate:modelValue"]),l("div",gs,[s(e(g),null,{default:r(()=>t[56]||(t[56]=[n("PDF Name")])),_:1}),s(e(h),{modelValue:i.pdf_name,"onUpdate:modelValue":m=>i.pdf_name=m,type:"text",placeholder:"Enter PDF name"},null,8,["modelValue","onUpdate:modelValue"])])])):_("",!0)]),l("div",ys,[s(e(g),{class:"text-red-600"},{default:r(()=>t[57]||(t[57]=[n("PDF Page Count *")])),_:1}),s(e(h),{modelValue:i.pdf_page_count,"onUpdate:modelValue":m=>i.pdf_page_count=m,modelModifiers:{number:!0},type:"number",min:"1",max:"1000",placeholder:"Enter number of pages",required:"",class:b(["w-full",{"border-red-500":!i.pdf_page_count}])},null,8,["modelValue","onUpdate:modelValue","class"]),t[58]||(t[58]=l("p",{class:"text-xs text-red-600"},[l("strong",null,"Required:"),n(" Please count the pages manually and enter the exact number. This helps provide accurate reading time estimates. ")],-1))]),L(i)?(c(),p("div",bs,f(L(i)),1)):_("",!0),i.pdf_file||i.google_drive_pdf_url?(c(),p("div",hs,[l("div",xs,[s(e(R),{class:"h-8 w-8 text-purple-600"}),l("div",ks,[l("p",Cs,f(i.pdf_file?i.pdf_file.name:i.pdf_name||"Google Drive PDF"),1),l("p",ws,[t[59]||(t[59]=n(" PDF Document ")),i.pdf_page_count?(c(),p("span",Vs," â€¢ "+f(i.pdf_page_count)+" pages",1)):_("",!0)])])])])):_("",!0)])):_("",!0),l("div",$s,[l("div",Us,[s(e(S),{checked:i.is_required,"onUpdate:checked":m=>i.is_required=m},null,8,["checked","onUpdate:checked"]),s(e(g),{class:"text-sm"},{default:r(()=>t[60]||(t[60]=[n("Required content")])),_:1})]),l("div",Ds,[s(e(S),{checked:i.is_active,"onUpdate:checked":m=>i.is_active=m},null,8,["checked","onUpdate:checked"]),s(e(g),{class:"text-sm"},{default:r(()=>t[61]||(t[61]=[n("Active content")])),_:1})])])]}),_:2},1024)]),_:2},1024))),128))]))])]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1}),s(e(le),null,{default:r(()=>[s(e(K),{class:"h-4 w-4"}),s(e(oe),null,{default:r(()=>t[62]||(t[62]=[l("strong",null,"Important:",-1),n(" Make sure your videos are accessible and PDFs are properly formatted. "),l("strong",null,"PDF page count is required",-1),n(" for accurate progress tracking and reading time estimates. Students will access content sequentially based on module order. ")])),_:1})]),_:1}),l("div",Fs,[s(e(y),{"as-child":"",variant:"outline"},{default:r(()=>[s(e(ee),{href:"/admin/course-online"},{default:r(()=>t[63]||(t[63]=[n(" Cancel ")])),_:1})]),_:1}),l("div",Ms,[e(o).modules.length>0?(c(),p("div",Ps,f(e(o).modules.length)+" modules â€¢ "+f(Q.value)+" content items ",1)):_("",!0),s(e(y),{type:"submit",disabled:e(o).processing||!ce.value,class:"min-w-48"},{default:r(()=>[s(e(Ae),{class:"h-4 w-4 mr-2"}),n(" "+f(e(o).processing?"Creating Course...":"Create Complete Course"),1)]),_:1},8,["disabled"])])])],32)])]),_:1})],64))}});export{fl as default};
