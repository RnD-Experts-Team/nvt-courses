import{d as Z,r as g,c as k,a as x,o as c,b as t,u as e,m as ee,w as s,e as o,g as $,P as h,f as n,t as i,F,i as te,n as se,h as V,W as M}from"./app-De5aCyOy.js";import{_ as ae}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{c as le,_ as u}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as E}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as P}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as oe}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as re}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as T}from"./index-CNloWqrH.js";import{_ as ne,a as ie}from"./index-Bl7hX8X-.js";import{_ as de,a as ue,b as ce,c as fe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DykgtCUG.js";import{_ as me}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CQOeOJ-N.js";import{_ as _e}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BoeL_UG-.js";import{n as y,o as w,p as b}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as C}from"./TooltipProvider.vue_vue_type_script_setup_true_lang-D2Z2kpUw.js";import{A as pe}from"./arrow-left-kG5YrchA.js";import{F as z}from"./folder-open-D5fTPG2s.js";import{B as ve}from"./book-open-pPANAQ7D.js";import{C as A}from"./clock-BXDw5ZYb.js";import{P as ge}from"./play-CqouLqeA.js";import{P as B}from"./plus-BEctqVRE.js";import{V as he}from"./video-BHwv2L3O.js";import{F as xe}from"./file-text-BOOsEpvl.js";import{E as ye}from"./eye-Jbp-o3OQ.js";import{S as we}from"./square-pen-C_ROzota.js";import{T as I}from"./trash-2-cH28u5cA.js";import{T as be}from"./triangle-alert-QBZ4KeJk.js";import{_ as Ce}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./index-shR_F4Lk.js";import"./index-D3npKzxP.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=le("GripVerticalIcon",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),De={class:"flex items-center justify-between mb-8"},ke={class:"space-y-1"},$e={class:"flex items-center gap-3 mb-3"},Me={class:"text-muted-foreground"},Te={class:"flex items-center gap-6 mt-4 text-sm text-muted-foreground"},je={class:"flex items-center gap-2"},Fe={class:"flex items-center gap-2"},Ve={class:"flex items-center gap-2"},Ee={class:"flex items-center gap-2"},Pe={key:0,class:"space-y-4"},ze={class:"space-y-3"},Ae={class:"flex items-center justify-between"},Be={class:"flex items-center space-x-4 flex-1 min-w-0"},Ie={class:"flex-shrink-0 p-1 hover:bg-muted rounded cursor-grab active:cursor-grabbing"},Se={class:"flex-1 min-w-0"},Ne={class:"flex items-center gap-3 mb-2"},Le={class:"text-lg font-semibold truncate"},qe={class:"flex items-center gap-2"},Ge={key:0,class:"text-sm text-muted-foreground mb-3 line-clamp-2"},Oe={class:"flex items-center gap-6 text-sm text-muted-foreground"},Ue={class:"flex items-center gap-2"},We={class:"flex items-center gap-2"},He={class:"flex items-center gap-2"},Re={class:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},Je={class:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4"},Ke=Z({__name:"Index",props:{course:{},modules:{}},setup(N){const d=N,L=[{title:"Courses",href:"/admin/course-online"},{title:d.course.name,href:`/admin/course-online/${d.course.id}`},{title:"Modules",href:"#"}],p=g(!1),f=g(null),j=g(null),m=g(null),D=g(!1),q=k(()=>d.modules.reduce((l,a)=>l+(a.video_count||0)+(a.pdf_count||0),0)),G=k(()=>d.modules.reduce((l,a)=>l+(a.estimated_duration||0),0)),O=k(()=>d.modules.filter(l=>l.is_active).length),U=(l,a,r)=>{j.value=a,m.value=r,D.value=!0,l.dataTransfer&&(l.dataTransfer.effectAllowed="move",l.dataTransfer.setData("text/html",l.target.outerHTML)),setTimeout(()=>{l.target&&(l.target.style.opacity="0.5")},0)},W=l=>{l.preventDefault(),l.dataTransfer&&(l.dataTransfer.dropEffect="move")},H=(l,a)=>{if(l.preventDefault(),m.value!==null&&m.value!==a){const r=[...d.modules],v=r.splice(m.value,1)[0];r.splice(a,0,v);const _=r.map((X,Y)=>({id:X.id,order_number:Y+1}));M.patch(route("admin.course-modules.update-order",d.course.id),{modules:_},{onSuccess:()=>{M.reload()},onError:()=>{console.error("Failed to update module order")}})}},R=l=>{l.target&&(l.target.style.opacity="1"),j.value=null,m.value=null,D.value=!1},J=l=>{f.value=l,p.value=!0},K=()=>{f.value&&M.delete(route("admin.course-modules.destroy",[d.course.id,f.value.id]),{onSuccess:()=>{p.value=!1,f.value=null},onError:()=>{console.error("Failed to delete module")}})},Q=()=>{p.value=!1,f.value=null};return(l,a)=>(c(),x(F,null,[t(e(ee),{title:`Modules - ${l.course.name}`},null,8,["title"]),t(ae,{breadcrumbs:L},{default:s(()=>[o("div",De,[o("div",ke,[o("div",$e,[t(e(u),{variant:"ghost",size:"sm",asChild:""},{default:s(()=>[t(e(h),{href:l.route("admin.course-online.index")},{default:s(()=>[t(e(pe),{class:"h-4 w-4 mr-2"}),a[1]||(a[1]=n(" Back to Courses "))]),_:1},8,["href"])]),_:1})]),a[2]||(a[2]=o("h1",{class:"text-3xl font-bold tracking-tight"},"Course Modules",-1)),o("p",Me,i(l.course.name),1),o("div",Te,[o("div",je,[t(e(z),{class:"h-4 w-4"}),o("span",null,i(l.modules.length)+" modules",1)]),o("div",Fe,[t(e(ve),{class:"h-4 w-4"}),o("span",null,i(q.value)+" content items",1)]),o("div",Ve,[t(e(A),{class:"h-4 w-4"}),o("span",null,i(Math.ceil(G.value/60))+"h total duration",1)]),o("div",Ee,[t(e(ge),{class:"h-4 w-4"}),o("span",null,i(O.value)+" active",1)])])]),t(e(u),{asChild:""},{default:s(()=>[t(e(h),{href:l.route("admin.course-modules.create",l.course.id)},{default:s(()=>[t(e(B),{class:"h-4 w-4 mr-2"}),a[3]||(a[3]=n(" Add Module "))]),_:1},8,["href"])]),_:1})]),l.modules.length>0?(c(),x("div",Pe,[t(e(ne),null,{default:s(()=>[t(e(S),{class:"h-4 w-4"}),t(e(ie),null,{default:s(()=>a[4]||(a[4]=[n(" Drag and drop modules to reorder them. The order will be automatically saved. ")])),_:1})]),_:1}),o("div",ze,[(c(!0),x(F,null,te(l.modules,(r,v)=>(c(),$(e(E),{key:r.id,"data-module-id":r.id,class:se(["group transition-all duration-200 hover:shadow-md cursor-move",{"opacity-50":D.value&&m.value===v}]),draggable:!0,onDragstart:_=>U(_,r,v),onDragover:W,onDrop:_=>H(_,v),onDragend:R},{default:s(()=>[t(e(P),{class:"p-6"},{default:s(()=>[o("div",Ae,[o("div",Be,[t(e(C),null,{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(w),{asChild:""},{default:s(()=>[o("div",Ie,[t(e(S),{class:"h-5 w-5 text-muted-foreground"})])]),_:1}),t(e(b),null,{default:s(()=>a[5]||(a[5]=[o("p",null,"Drag to reorder",-1)])),_:1})]),_:1})]),_:1}),t(e(T),{variant:"outline",class:"w-8 h-8 rounded-full flex items-center justify-center font-medium"},{default:s(()=>[n(i(r.order_number),1)]),_:2},1024),o("div",Se,[o("div",Ne,[o("h3",Le,i(r.name),1),o("div",qe,[r.is_required?(c(),$(e(T),{key:0,variant:"destructive",class:"text-xs"},{default:s(()=>a[6]||(a[6]=[n(" Required ")])),_:1})):V("",!0),t(e(T),{variant:r.is_active?"default":"secondary",class:"text-xs"},{default:s(()=>[n(i(r.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])])]),r.description?(c(),x("p",Ge,i(r.description),1)):V("",!0),o("div",Oe,[o("div",Ue,[t(e(he),{class:"h-4 w-4 text-blue-500"}),o("span",null,i(r.video_count||0)+" videos",1)]),o("div",We,[t(e(xe),{class:"h-4 w-4 text-green-500"}),o("span",null,i(r.pdf_count||0)+" PDFs",1)]),o("div",He,[t(e(A),{class:"h-4 w-4 text-orange-500"}),o("span",null,i(r.estimated_duration||0)+"min",1)])])])]),o("div",Re,[t(e(C),null,{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(w),{asChild:""},{default:s(()=>[t(e(u),{variant:"outline",size:"sm",asChild:""},{default:s(()=>[t(e(h),{href:l.route("admin.course-modules.show",[l.course.id,r.id])},{default:s(()=>[t(e(ye),{class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),t(e(b),null,{default:s(()=>a[7]||(a[7]=[n("View Module")])),_:1})]),_:2},1024)]),_:2},1024),t(e(C),null,{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(w),{asChild:""},{default:s(()=>[t(e(u),{variant:"outline",size:"sm",asChild:""},{default:s(()=>[t(e(h),{href:l.route("admin.course-modules.edit",[l.course.id,r.id])},{default:s(()=>[t(e(we),{class:"h-4 w-4"})]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),t(e(b),null,{default:s(()=>a[8]||(a[8]=[n("Edit Module")])),_:1})]),_:2},1024)]),_:2},1024),t(e(C),null,{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(w),{asChild:""},{default:s(()=>[t(e(u),{variant:"outline",size:"sm",onClick:_=>J(r)},{default:s(()=>[t(e(I),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])]),_:2},1024),t(e(b),null,{default:s(()=>a[9]||(a[9]=[n("Delete Module")])),_:1})]),_:2},1024)]),_:2},1024)])])]),_:2},1024)]),_:2},1032,["data-module-id","class","onDragstart","onDrop"]))),128))])])):(c(),$(e(E),{key:1,class:"border-dashed"},{default:s(()=>[t(e(P),{class:"flex flex-col items-center justify-center py-16 text-center"},{default:s(()=>[o("div",Je,[t(e(z),{class:"h-8 w-8 text-muted-foreground"})]),t(e(re),{class:"mb-2"},{default:s(()=>a[10]||(a[10]=[n("No modules yet")])),_:1}),t(e(oe),{class:"mb-6 max-w-sm"},{default:s(()=>a[11]||(a[11]=[n(" Get started by creating your first course module. Modules help organize your course content into logical sections. ")])),_:1}),t(e(u),{asChild:""},{default:s(()=>[t(e(h),{href:l.route("admin.course-modules.create",l.course.id)},{default:s(()=>[t(e(B),{class:"h-4 w-4 mr-2"}),a[12]||(a[12]=n(" Create First Module "))]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})),t(e(de),{open:p.value,"onUpdate:open":a[0]||(a[0]=r=>p.value=r)},{default:s(()=>[t(e(ue),null,{default:s(()=>[t(e(ce),null,{default:s(()=>[t(e(fe),{class:"flex items-center gap-2"},{default:s(()=>[t(e(be),{class:"h-5 w-5 text-destructive"}),a[13]||(a[13]=n(" Delete Module "))]),_:1}),t(e(me),null,{default:s(()=>{var r;return[a[14]||(a[14]=n(' Are you sure you want to delete "')),o("strong",null,i((r=f.value)==null?void 0:r.name),1),a[15]||(a[15]=n('"? This action cannot be undone and will remove all content within this module. '))]}),_:1})]),_:1}),t(e(_e),null,{default:s(()=>[t(e(u),{variant:"outline",onClick:Q},{default:s(()=>a[16]||(a[16]=[n(" Cancel ")])),_:1}),t(e(u),{variant:"destructive",onClick:K},{default:s(()=>[t(e(I),{class:"h-4 w-4 mr-2"}),a[17]||(a[17]=n(" Delete Module "))]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}}),$t=Ce(Ke,[["__scopeId","data-v-9a460c69"]]);export{$t as default};
