import{d as T,r as L,a as m,o as d,b as t,u as e,m as S,w as s,e as a,P as z,f as u,t as i,g as f,h as M,F as w,i as b,W as P}from"./app-De5aCyOy.js";import{f as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as g}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as v}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as F}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as A}from"./index-CNloWqrH.js";import{_ as U,a as V,b as q,c as p,d as H,e as _}from"./TableHeader.vue_vue_type_script_setup_true_lang-CiatGxJJ.js";import{A as O}from"./arrow-left-kG5YrchA.js";import{U as R}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import{C as y}from"./circle-check-big-BYC-wlwA.js";import{C as D}from"./chart-column-CQTiunbh.js";import{T as E}from"./target-CkYXQ-0W.js";import{C as Q}from"./circle-x-qrbwyPjC.js";import{R as W}from"./rotate-ccw-D8-XKrTw.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";const j={class:"max-w-6xl mx-auto space-y-6"},I={class:"flex items-center gap-4"},X={class:"text-muted-foreground"},G={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},J={class:"flex items-center gap-3"},K={class:"text-2xl font-bold"},Y={class:"flex items-center gap-3"},Z={class:"text-2xl font-bold"},ee={class:"flex items-center gap-3"},te={class:"text-2xl font-bold"},se={class:"flex items-center gap-3"},le={class:"text-2xl font-bold"},ae={class:"font-medium"},oe={class:"text-sm text-muted-foreground"},re={class:"font-medium"},ie={class:"text-sm text-muted-foreground"},ue={class:"flex gap-2"},de={key:1,class:"text-center py-12 text-muted-foreground"},ne={key:2,class:"flex justify-center gap-2 mt-6"},me=["innerHTML"],Pe=T({__name:"Attempts",props:{quiz:{},module:{},course:{},attempts:{}},setup($){const n=$,C=[{title:"Course Online",href:"/admin/course-online"},{title:n.course.name,href:`/admin/course-online/${n.course.id}`},{title:n.quiz.title,href:"#"},{title:"Attempts",href:"#"}],x={total:n.attempts.total,passed:n.attempts.data.filter(o=>o.passed).length,avgScore:n.attempts.data.length>0?(n.attempts.data.reduce((o,l)=>o+l.score_percentage,0)/n.attempts.data.length).toFixed(1):0},c=L(null),k=(o,l)=>{confirm(`Are you sure you want to reset ALL quiz attempts for ${l}?

This will:
- Delete all their attempts
- Delete all their answers
- Allow them to retake the quiz from scratch

This action cannot be undone!`)&&(c.value=o,P.post(route("admin.module-quiz.reset-attempts",{courseOnline:n.course.id,courseModule:n.module.id,quiz:n.quiz.id}),{user_id:o},{preserveScroll:!0,onSuccess:()=>{c.value=null},onError:()=>{c.value=null,alert("Failed to reset attempts. Please try again.")}}))};return(o,l)=>(d(),m(w,null,[t(e(S),{title:`Attempts - ${o.quiz.title}`},null,8,["title"]),t(B,{breadcrumbs:C},{default:s(()=>[a("div",j,[a("div",I,[t(e(h),{"as-child":"",variant:"ghost",size:"sm"},{default:s(()=>[t(e(z),{href:o.route("admin.module-quiz.show",{courseOnline:o.course.id,courseModule:o.module.id,quiz:o.quiz.id})},{default:s(()=>[t(e(O),{class:"h-4 w-4 mr-2"}),l[0]||(l[0]=u(" Back to Quiz "))]),_:1},8,["href"])]),_:1}),a("div",null,[l[1]||(l[1]=a("h1",{class:"text-2xl font-bold"},"Quiz Attempts",-1)),a("p",X,i(o.quiz.title),1)])]),a("div",G,[t(e(g),null,{default:s(()=>[t(e(v),{class:"pt-6"},{default:s(()=>[a("div",J,[t(e(R),{class:"h-8 w-8 text-blue-500"}),a("div",null,[a("p",K,i(x.total),1),l[2]||(l[2]=a("p",{class:"text-sm text-muted-foreground"},"Total Attempts",-1))])])]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(v),{class:"pt-6"},{default:s(()=>[a("div",Y,[t(e(y),{class:"h-8 w-8 text-green-500"}),a("div",null,[a("p",Z,i(x.passed),1),l[3]||(l[3]=a("p",{class:"text-sm text-muted-foreground"},"Passed",-1))])])]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(v),{class:"pt-6"},{default:s(()=>[a("div",ee,[t(e(D),{class:"h-8 w-8 text-purple-500"}),a("div",null,[a("p",te,i(x.avgScore)+"%",1),l[4]||(l[4]=a("p",{class:"text-sm text-muted-foreground"},"Avg Score",-1))])])]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(v),{class:"pt-6"},{default:s(()=>[a("div",se,[t(e(E),{class:"h-8 w-8 text-orange-500"}),a("div",null,[a("p",le,i(o.quiz.pass_threshold)+"%",1),l[5]||(l[5]=a("p",{class:"text-sm text-muted-foreground"},"Pass Threshold",-1))])])]),_:1})]),_:1})]),t(e(g),null,{default:s(()=>[t(e(F),null,{default:s(()=>[t(e(N),null,{default:s(()=>l[6]||(l[6]=[u("All Attempts")])),_:1})]),_:1}),t(e(v),null,{default:s(()=>[o.attempts.data.length>0?(d(),f(e(U),{key:0},{default:s(()=>[t(e(V),null,{default:s(()=>[t(e(q),null,{default:s(()=>[t(e(p),null,{default:s(()=>l[7]||(l[7]=[u("User")])),_:1}),t(e(p),null,{default:s(()=>l[8]||(l[8]=[u("Attempt")])),_:1}),t(e(p),null,{default:s(()=>l[9]||(l[9]=[u("Score")])),_:1}),t(e(p),null,{default:s(()=>l[10]||(l[10]=[u("Status")])),_:1}),t(e(p),null,{default:s(()=>l[11]||(l[11]=[u("Completed")])),_:1}),t(e(p),null,{default:s(()=>l[12]||(l[12]=[u("Actions")])),_:1})]),_:1})]),_:1}),t(e(H),null,{default:s(()=>[(d(!0),m(w,null,b(o.attempts.data,r=>(d(),f(e(q),{key:r.id},{default:s(()=>[t(e(_),null,{default:s(()=>[a("div",null,[a("p",ae,i(r.user.name),1),a("p",oe,i(r.user.email),1)])]),_:2},1024),t(e(_),null,{default:s(()=>[t(e(A),{variant:"outline"},{default:s(()=>[u("#"+i(r.attempt_number),1)]),_:2},1024)]),_:2},1024),t(e(_),null,{default:s(()=>[a("div",null,[a("p",re,i(r.total_score)+" / "+i(o.quiz.total_points),1),a("p",ie,i(r.score_percentage)+"%",1)])]),_:2},1024),t(e(_),null,{default:s(()=>[t(e(A),{variant:r.passed?"default":"destructive"},{default:s(()=>[r.passed?(d(),f(e(y),{key:0,class:"h-3 w-3 mr-1"})):(d(),f(e(Q),{key:1,class:"h-3 w-3 mr-1"})),u(" "+i(r.passed?"Passed":"Failed"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(_),null,{default:s(()=>[u(i(r.completed_at||"In Progress"),1)]),_:2},1024),t(e(_),null,{default:s(()=>[a("div",ue,[t(e(h),{"as-child":"",variant:"outline",size:"sm"},{default:s(()=>[t(e(z),{href:o.route("admin.module-quiz.attempts.show",{courseOnline:o.course.id,courseModule:o.module.id,quiz:o.quiz.id,attempt:r.id})},{default:s(()=>l[13]||(l[13]=[u(" View Answers ")])),_:2},1032,["href"])]),_:2},1024),t(e(h),{variant:"destructive",size:"sm",onClick:fe=>k(r.user.id,r.user.name),disabled:c.value===r.user.id},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-1"}),u(" "+i(c.value===r.user.id?"Resetting...":"Reset Attempts"),1)]),_:2},1032,["onClick","disabled"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(d(),m("div",de," No attempts yet ")),o.attempts.last_page>1?(d(),m("div",ne,[(d(!0),m(w,null,b(o.attempts.links,r=>(d(),f(e(h),{key:r.label,"as-child":"",variant:r.active?"default":"outline",size:"sm",disabled:!r.url},{default:s(()=>[r.url?(d(),f(e(z),{key:0,href:r.url,innerHTML:r.label},null,8,["href","innerHTML"])):(d(),m("span",{key:1,innerHTML:r.label},null,8,me))]),_:2},1032,["variant","disabled"]))),128))])):M("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{Pe as default};
