import{d as us,r as C,C as H,c as ne,g as f,o as d,w as r,e as o,b as t,a as _,h as v,u as e,f as n,F as k,i as U,t as u,k as ms,j as A,n as J,s as _s,v as cs,W as Le}from"./app-De5aCyOy.js";import{_ as fs}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as g}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as L}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as M}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as Q}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as ie}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as X}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as w}from"./index-CNloWqrH.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as Me}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as Ae,a as je,b as De,c as Ee}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DykgtCUG.js";import{_ as Ne}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CQOeOJ-N.js";import{_ as Be}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BoeL_UG-.js";import{_ as de,a as ue,b as me,c as _e,d as ce,e as fe,f as pe,g as ve}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Dlh8pIcV.js";import{_ as xe}from"./Separator.vue_vue_type_script_setup_true_lang-DdEZmx_q.js";import{_ as Fe,a as ze}from"./index-Bl7hX8X-.js";import{_ as ye,a as be,b as ge,c as we,d as j}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{P as F}from"./plus-BEctqVRE.js";import{m as he}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{S as ps}from"./square-pen-C_ROzota.js";import{T as D}from"./trash-2-cH28u5cA.js";import{T as Pe}from"./tag-b4i1_NNu.js";import{F as vs}from"./file-text-BOOsEpvl.js";import{C as xs}from"./chart-column-CQTiunbh.js";import{L as Z}from"./loader-circle-DgBH8UyT.js";import{C as z}from"./circle-check-big-BYC-wlwA.js";import{D as ys}from"./dollar-sign-jqEHhyqq.js";import{L as E}from"./layers-nvop7tMI.js";import{T as ee}from"./triangle-alert-QBZ4KeJk.js";import{C as P}from"./circle-alert-Ld7mL4Bp.js";import{B as Ie}from"./book-open-pPANAQ7D.js";import{M as Oe}from"./monitor-f8CPSh0J.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";const bs={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8"},gs={class:"mb-8 flex items-center justify-between"},ws={key:0,class:"space-y-6"},hs={class:"flex items-center justify-between"},ks={key:0},Cs={class:"flex space-x-2"},$s={class:"flex items-center justify-between mb-4"},Ts={class:"flex items-center gap-2"},Vs={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},Ss={class:"flex items-center justify-between"},Us={class:"flex-1"},Ls={class:"text-sm font-medium"},Ms={class:"mt-1 flex items-center gap-2"},As={key:0,class:"text-xs text-muted-foreground mt-1"},js={class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-primary/10 mb-4"},Ds={class:"flex items-center gap-3"},Es={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-primary/10"},Ns={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Bs={class:"flex justify-end pt-4"},Fs={class:"flex items-center gap-3"},zs={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-green-100"},Ps={class:"flex-1"},Is={key:0,class:"mb-8"},Os={class:"flex items-center gap-2 mb-4"},qs={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 mb-6"},Rs={class:"space-y-3"},Gs={class:"flex items-center justify-between"},Ws={class:"flex items-center gap-1"},Ks={class:"space-y-1"},Ys={class:"flex items-center justify-between"},Hs={class:"text-sm text-muted-foreground"},Js={class:"text-lg font-bold text-green-600"},Qs={class:"text-sm mt-1"},Xs=["href"],Zs={class:"flex items-center gap-2 mb-4"},et={class:"space-y-4"},st={class:"grid grid-cols-1 lg:grid-cols-7 gap-4 items-end"},tt={class:"lg:col-span-1"},lt={class:"flex items-center gap-2"},rt={class:"lg:col-span-1"},ot={key:0,class:"px-2 py-1.5 text-sm text-muted-foreground"},at={class:"flex items-center gap-2"},nt={class:"flex items-center gap-2"},it={key:0,class:"text-xs text-muted-foreground mt-1"},dt={class:"lg:col-span-1"},ut={class:"lg:col-span-1"},mt={class:"lg:col-span-1"},_t=["id","onUpdate:modelValue","onChange"],ct=["value"],ft={class:"lg:col-span-1"},pt={class:"lg:col-span-1 flex justify-end"},vt={key:0,class:"mt-4 p-3 bg-muted/50 rounded-md"},xt={class:"flex items-center justify-between mb-2"},yt={class:"text-xs text-muted-foreground"},bt={class:"font-medium"},gt={class:"font-medium"},wt={key:1,class:"text-muted-foreground"},ht={class:"text-xs text-muted-foreground"},kt={class:"font-medium"},Ct={class:"font-semibold text-blue-600"},$t={class:"font-semibold text-green-600"},Tt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0 pt-4"},Vt={class:"mt-2 text-xs text-muted-foreground"},St={key:0,class:"flex items-center text-blue-600"},Ut={class:"flex items-center gap-3 mb-2"},Lt={class:"flex items-center justify-center h-12 w-12 rounded-full bg-primary/10"},Mt={class:"space-y-2"},At={key:0,class:"text-sm text-destructive flex items-center"},jt={class:"space-y-2"},Dt={key:0,class:"text-sm text-destructive flex items-center"},Et={class:"space-y-2"},Nt={class:"flex items-center gap-2"},Bt={class:"flex items-center gap-2"},Ft={class:"flex items-center gap-2"},zt={key:0,class:"text-sm text-destructive flex items-center"},Pt={class:"space-y-2"},It={class:"flex items-center gap-3 mb-2"},Ot={class:"flex items-center justify-center h-12 w-12 rounded-full bg-blue-100"},qt={class:"font-medium"},Rt={class:"space-y-2"},Gt={key:0,class:"text-sm text-destructive flex items-center"},Wt={class:"space-y-2"},Kt={class:"text-xs text-muted-foreground"},Yt={key:0,class:"text-sm text-destructive flex items-center"},Ht={class:"space-y-2"},Jt={class:"flex items-start gap-3"},Qt={class:"flex items-center justify-center h-12 w-12 rounded-full bg-destructive/10"},Xt={class:"flex-1"},Zt={class:"font-semibold"},el={class:"text-center"},sl={class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-destructive/10 mb-4"},tl={class:"font-semibold"},ll={class:"text-center"},rl={class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-4"},rr=us({__name:"Index",props:{configs:{},incentives:{},performanceLevels:{},userLevels:{}},setup(qe){const p=qe,I=C(!1),S=C(!1),se=C(!1),O=C(!1),q=C(!1),R=C(!1),h=C(null),N=C(null),B=C(null),G=C(null),te=C({}),Re=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"Configurations",href:null}],c=H({name:"",max_score:0,description:"",applies_to:"both"}),x=H({type_name:"",score_value:0,description:""}),$=H({total_score:0,config_scores:{}}),W=ne(()=>p.performanceLevels||[]),b=H({incentives:p.incentives&&p.incentives.length>0?p.incentives.map(a=>({user_level_id:a.user_level_id||null,user_level_tier_id:a.user_level_tier_id||null,min_score:a.min_score||0,max_score:a.max_score||0,incentive_amount:parseFloat(a.incentive_amount.toString())||0,performance_level:a.performance_level||null})):[{user_level_id:null,user_level_tier_id:null,min_score:0,max_score:0,incentive_amount:0,performance_level:null}]}),le=ne(()=>p.configs&&Array.isArray(p.configs)&&p.configs.length>0&&p.configs.every(a=>a&&typeof a=="object")),ke=ne(()=>p.userLevels&&Array.isArray(p.userLevels)&&p.userLevels.length>0);le.value&&p.configs.forEach(a=>{a&&a.id&&($.config_scores[a.id]=a.max_score||0)});const Ce=a=>{if(!a||!p.userLevels)return[];const s=p.userLevels.find(l=>l.id===a);return s?s.tiers:[]},re=a=>a?Ce(a).length:0,Ge=a=>{b.incentives[a].user_level_tier_id=null,te.value[a]=!1,re(b.incentives[a].user_level_id)>0||console.log(`Level ${oe(b.incentives[a].user_level_id)} has no tiers.`)},We=a=>{te.value[a]=!0},$e=a=>te.value[a]===!0,Te=a=>re(a)>0,oe=a=>{if(!a||!p.userLevels)return"Unknown Level";const s=p.userLevels.find(l=>l.id===a);return s?`${s.name} (${s.code})`:"Unknown Level"},Ve=a=>{if(!a||!p.userLevels)return"Unknown Tier";for(const s of p.userLevels){const l=s.tiers.find(i=>i.id===a);if(l)return`${l.tier_name} (T${l.tier_order})`}return"Unknown Tier"},K=a=>!a||!W.value?null:W.value.find(s=>s.level===a),Se=a=>{const s=K(a);if(!s)return"secondary";switch(s.color){case"green":return"default";case"blue":return"secondary";case"yellow":return"outline";case"red":return"destructive";default:return"secondary"}},Ke=a=>{const s=b.incentives[a],l=s.min_score,i=s.max_score,T=W.value.find(m=>m.min_score>=l&&m.max_score<=i);T&&(b.incentives[a].performance_level=T.level)},Ye=(a,s)=>{const l=a/s*100;return l>=90?"default":l>=75?"secondary":l>=50?"outline":"destructive"},He=a=>a==="both"?"secondary":a==="online"?"default":"outline",Je=a=>a==="online"?Oe:a==="regular"?Ie:E,Y=()=>{I.value=!1,S.value=!1,c.reset(),c.clearErrors()},ae=()=>{se.value=!1,x.reset(),x.clearErrors(),h.value=null},Qe=()=>{c.post(route("admin.evaluations.store"),{onSuccess:()=>{Y()}})},Xe=a=>{a&&(c.name=a.name||"",c.max_score=a.max_score||0,c.description=a.description||"",c.applies_to=a.applies_to||"both",h.value=a,S.value=!0)},Ze=()=>{var a;(a=h.value)!=null&&a.id&&c.put(route("admin.evaluations.update",h.value.id),{onSuccess:()=>{Y(),h.value=null}})},es=a=>{N.value=a,O.value=!0},ss=()=>{var a;(a=N.value)!=null&&a.id&&Le.delete(route("admin.evaluations.destroy",N.value.id),{onSuccess:()=>{O.value=!1,N.value=null}})},Ue=a=>{a&&(h.value=a,x.reset(),x.clearErrors(),se.value=!0)},ts=()=>{var a;(a=h.value)!=null&&a.id&&x.post(route("admin.evaluations.types.store",h.value.id),{onSuccess:()=>{ae()}})},ls=a=>{B.value=a,q.value=!0},rs=()=>{var a;(a=B.value)!=null&&a.id&&Le.delete(route("admin.evaluations.types.destroy",B.value.id),{onSuccess:()=>{q.value=!1,B.value=null},onError:s=>{console.error("Delete failed:",s)}})},os=()=>{$.post(route("admin.evaluations.set-total-score"))},as=()=>{b.post(route("admin.evaluations.set-incentives"),{onSuccess:()=>{},onError:a=>{console.error("Incentive save errors:",a)}})},ns=()=>{b.incentives.push({user_level_id:null,user_level_tier_id:null,min_score:0,max_score:0,incentive_amount:0,performance_level:null})},is=a=>{b.incentives.length<=1||(G.value=a,R.value=!0)},ds=()=>{G.value!==null&&b.incentives.length>1&&b.incentives.splice(G.value,1),R.value=!1,G.value=null};return(a,s)=>(d(),f(fs,{breadcrumbs:Re},{default:r(()=>[o("div",bs,[o("div",gs,[s[15]||(s[15]=o("div",null,[o("h1",{class:"text-3xl font-bold"},"Evaluation Configurations"),o("p",{class:"mt-2 text-sm text-muted-foreground"}," Manage evaluation categories, types, scoring, and level + tier based incentive structures ")],-1)),t(e(g),{onClick:s[0]||(s[0]=l=>I.value=!0)},{default:r(()=>[t(e(F),{class:"mr-2 h-4 w-4"}),s[14]||(s[14]=n(" Add Category "))]),_:1})]),le.value?(d(),_("div",ws,[(d(!0),_(k,null,U(a.configs,l=>(d(),f(e(L),{key:(l==null?void 0:l.id)||Math.random(),class:"hover:shadow-md transition-shadow duration-200"},{default:r(()=>[t(e(ie),null,{default:r(()=>[o("div",hs,[o("div",null,[t(e(X),{class:"flex items-center gap-2"},{default:r(()=>[t(e(he),{class:"h-5 w-5"}),n(" "+u((l==null?void 0:l.name)||"Unnamed Category")+" ",1),l!=null&&l.applies_to?(d(),f(e(w),{key:0,variant:He(l.applies_to),class:"text-xs"},{default:r(()=>[(d(),f(ms(Je(l.applies_to)),{class:"mr-1 h-3 w-3"})),n(" "+u(l.applies_to==="regular"?"Regular Only":l.applies_to==="online"?"Online Only":"Both Types"),1)]),_:2},1032,["variant"])):v("",!0)]),_:2},1024),t(e(Q),{class:"mt-1"},{default:r(()=>[n(" Max Score: "+u((l==null?void 0:l.max_score)||0)+" points ",1),l!=null&&l.description?(d(),_("span",ks," â€¢ "+u(l.description),1)):v("",!0)]),_:2},1024)]),o("div",Cs,[t(e(g),{onClick:i=>Xe(l),variant:"outline",size:"sm"},{default:r(()=>[t(e(ps),{class:"mr-1 h-4 w-4"}),s[16]||(s[16]=n(" Edit "))]),_:2},1032,["onClick"]),t(e(g),{onClick:i=>es(l),variant:"outline",size:"sm",class:"text-destructive hover:text-destructive"},{default:r(()=>[t(e(D),{class:"mr-1 h-4 w-4"}),s[17]||(s[17]=n(" Delete "))]),_:2},1032,["onClick"])])])]),_:2},1024),t(e(M),null,{default:r(()=>[o("div",null,[o("div",$s,[o("div",Ts,[t(e(Pe),{class:"h-4 w-4"}),t(e(y),{class:"text-sm font-medium"},{default:r(()=>s[18]||(s[18]=[n("Evaluation Types")])),_:1})]),t(e(g),{onClick:i=>Ue(l),variant:"outline",size:"sm"},{default:r(()=>[t(e(F),{class:"mr-1 h-4 w-4"}),s[19]||(s[19]=n(" Add Type "))]),_:2},1032,["onClick"])]),l!=null&&l.types&&l.types.length>0?(d(),_("div",Vs,[(d(!0),_(k,null,U(l.types,i=>(d(),f(e(L),{key:(i==null?void 0:i.id)||Math.random(),class:"relative hover:shadow-sm transition-shadow duration-200"},{default:r(()=>[t(e(M),{class:"p-4"},{default:r(()=>[o("div",Ss,[o("div",Us,[o("p",Ls,u((i==null?void 0:i.type_name)||"Unnamed Type"),1),o("div",Ms,[t(e(w),{variant:Ye((i==null?void 0:i.score_value)||0,(l==null?void 0:l.max_score)||100),class:"text-xs"},{default:r(()=>[n(u((i==null?void 0:i.score_value)||0)+" pts ",1)]),_:2},1032,["variant"])]),i!=null&&i.description?(d(),_("p",As,u(i.description),1)):v("",!0)]),t(e(g),{onClick:T=>ls(i),variant:"ghost",size:"sm",class:"h-8 w-8 p-0 text-destructive hover:text-destructive"},{default:r(()=>[t(e(D),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])):(d(),f(e(L),{key:1,class:"border-dashed"},{default:r(()=>[t(e(M),{class:"flex flex-col items-center justify-center py-8 text-center"},{default:r(()=>[t(e(vs),{class:"h-8 w-8 text-muted-foreground mb-2"}),s[21]||(s[21]=o("p",{class:"text-sm text-muted-foreground mb-4"}," No evaluation types configured ",-1)),t(e(g),{onClick:i=>Ue(l),variant:"outline",size:"sm"},{default:r(()=>s[20]||(s[20]=[n(" Add your first type ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))])]),_:2},1024)]),_:2},1024))),128))])):(d(),f(e(L),{key:1,class:"border-dashed"},{default:r(()=>[t(e(M),{class:"flex flex-col items-center justify-center py-12 text-center"},{default:r(()=>[o("div",js,[t(e(he),{class:"h-8 w-8 text-primary"})]),t(e(X),{class:"mb-2"},{default:r(()=>s[22]||(s[22]=[n("No evaluation configurations")])),_:1}),t(e(Q),{class:"mb-6 max-w-sm"},{default:r(()=>s[23]||(s[23]=[n(" Get started by creating your first evaluation category to organize your assessment criteria. ")])),_:1}),t(e(g),{onClick:s[1]||(s[1]=l=>I.value=!0)},{default:r(()=>[t(e(F),{class:"mr-2 h-4 w-4"}),s[24]||(s[24]=n(" Create First Category "))]),_:1})]),_:1})]),_:1})),le.value?(d(),f(e(L),{key:2,class:"mt-8"},{default:r(()=>[t(e(ie),null,{default:r(()=>[o("div",Ds,[o("div",Es,[t(e(xs),{class:"h-6 w-6 text-primary"})]),o("div",null,[t(e(X),null,{default:r(()=>s[25]||(s[25]=[n("Total Score Configuration")])),_:1}),t(e(Q),null,{default:r(()=>s[26]||(s[26]=[n(" Set the overall scoring distribution across categories ")])),_:1})])])]),_:1}),t(e(M),null,{default:r(()=>[o("form",{onSubmit:A(os,["prevent"]),class:"space-y-4"},[o("div",Ns,[o("div",null,[t(e(y),{for:"total_score"},{default:r(()=>s[27]||(s[27]=[n("Total Score")])),_:1}),t(e(V),{id:"total_score",modelValue:e($).total_score,"onUpdate:modelValue":s[2]||(s[2]=l=>e($).total_score=l),modelModifiers:{number:!0},type:"number",min:"1",placeholder:"Enter total score"},null,8,["modelValue"])]),(d(!0),_(k,null,U(a.configs,l=>(d(),_("div",{key:`total_${l==null?void 0:l.id}`,class:"space-y-1"},[t(e(y),{for:`config_score_${l==null?void 0:l.id}`},{default:r(()=>[n(u((l==null?void 0:l.name)||"Unnamed"),1)]),_:2},1032,["for"]),t(e(V),{id:`config_score_${l==null?void 0:l.id}`,modelValue:e($).config_scores[l==null?void 0:l.id],"onUpdate:modelValue":i=>e($).config_scores[l==null?void 0:l.id]=i,modelModifiers:{number:!0},type:"number",min:"0",max:(l==null?void 0:l.max_score)||0,placeholder:`Max: ${(l==null?void 0:l.max_score)||0}`},null,8,["id","modelValue","onUpdate:modelValue","max","placeholder"])]))),128))]),t(e(xe)),o("div",Bs,[t(e(g),{type:"submit",disabled:e($).processing},{default:r(()=>[e($).processing?(d(),f(e(Z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(d(),f(e(z),{key:1,class:"mr-2 h-4 w-4"})),n(" "+u(e($).processing?"Saving...":"Save Total Score"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})):v("",!0),t(e(L),{class:"mt-8"},{default:r(()=>[t(e(ie),null,{default:r(()=>[o("div",Fs,[o("div",zs,[t(e(ys),{class:"h-6 w-6 text-green-600"})]),o("div",Ps,[t(e(X),{class:"flex items-center gap-2"},{default:r(()=>[s[29]||(s[29]=n(" Level + Tier Based Incentives ")),t(e(w),{variant:"secondary",class:"text-xs"},{default:r(()=>s[28]||(s[28]=[n("Enhanced")])),_:1})]),_:1}),t(e(Q),null,{default:r(()=>s[30]||(s[30]=[n(" Define reward tiers based on user level, tier, and performance scores ")])),_:1})])])]),_:1}),t(e(M),null,{default:r(()=>[p.incentives&&p.incentives.length>0?(d(),_("div",Is,[o("div",Os,[t(e(E),{class:"h-5 w-5 text-muted-foreground"}),t(e(y),{class:"text-base font-semibold"},{default:r(()=>s[31]||(s[31]=[n("Current Incentive Structure")])),_:1}),t(e(w),{variant:"outline",class:"text-xs"},{default:r(()=>[n(u(p.incentives.length)+" rules",1)]),_:1})]),o("div",qs,[(d(!0),_(k,null,U(p.incentives,l=>(d(),f(e(L),{key:l.id,class:J(["border-l-4 hover:shadow-md transition-shadow",[{"border-l-green-500":!l.performance_level||l.performance_level===1,"border-l-blue-500":l.performance_level===2,"border-l-yellow-500":l.performance_level===3,"border-l-red-500":l.performance_level===4},l.user_level_tier_id?"border-t-4 border-t-blue-500":""]])},{default:r(()=>[t(e(M),{class:"p-4"},{default:r(()=>[o("div",Rs,[o("div",Gs,[t(e(w),{variant:"secondary",class:"text-xs"},{default:r(()=>{var i;return[n(u(((i=l.user_level)==null?void 0:i.name)||"Unknown Level"),1)]}),_:2},1024),o("div",Ws,[l.user_level_tier_id?(d(),f(e(w),{key:0,variant:"default",class:"text-xs bg-blue-500 hover:bg-blue-600"},{default:r(()=>{var i;return[t(e(E),{class:"mr-1 h-3 w-3"}),n(" "+u(((i=l.user_level_tier)==null?void 0:i.tier_name)||"Unknown Tier"),1)]}),_:2},1024)):(d(),f(e(w),{key:1,variant:"outline",class:"text-xs"},{default:r(()=>[t(e(E),{class:"mr-1 h-3 w-3 opacity-70"}),s[32]||(s[32]=n(" All Tiers "))]),_:1}))])]),o("div",Ks,[o("div",Ys,[o("div",Hs," Score Range: "+u(l.min_score)+"-"+u(l.max_score),1),l.performance_level?(d(),f(e(w),{key:0,variant:Se(l.performance_level),class:"text-xs"},{default:r(()=>{var i;return[n(u((i=K(l.performance_level))==null?void 0:i.label),1)]}),_:2},1032,["variant"])):v("",!0)]),o("div",Js," $"+u(Number(l.incentive_amount).toFixed(2)),1)])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),t(e(xe))])):v("",!0),ke.value?v("",!0):(d(),f(e(Fe),{key:1,variant:"destructive",class:"mb-6"},{default:r(()=>[t(e(ee),{class:"h-4 w-4"}),t(e(ze),null,{default:r(()=>[s[34]||(s[34]=o("div",{class:"font-medium"},"No User Levels Found",-1)),o("p",Qs,[s[33]||(s[33]=n(" You need to create user levels and tiers before configuring incentives. ")),o("a",{href:a.route("admin.organizational.index"),class:"underline hover:no-underline"}," Go to Organizational Management ",8,Xs)])]),_:1})]),_:1})),ke.value?(d(),_("form",{key:2,onSubmit:A(as,["prevent"]),class:"space-y-6"},[o("div",Zs,[t(e(F),{class:"h-5 w-5 text-muted-foreground"}),t(e(y),{class:"text-base font-semibold"},{default:r(()=>s[35]||(s[35]=[n("Configure New Incentives")])),_:1})]),o("div",et,[(d(!0),_(k,null,U(e(b).incentives,(l,i)=>(d(),f(e(L),{key:i,class:J(["relative hover:shadow-sm transition-all duration-200",[{"border-l-4 border-l-green-500":l.performance_level===1,"border-l-4 border-l-blue-500":l.performance_level===2,"border-l-4 border-l-yellow-500":l.performance_level===3,"border-l-4 border-l-red-500":l.performance_level===4},l.user_level_tier_id?"border-t-4 border-t-blue-500":""]])},{default:r(()=>[t(e(M),{class:"p-6"},{default:r(()=>{var T;return[o("div",st,[o("div",tt,[t(e(y),{for:`level_${i}`,class:"text-sm font-medium"},{default:r(()=>s[36]||(s[36]=[n("User Level")])),_:2},1032,["for"]),t(e(ye),{modelValue:l.user_level_id,"onUpdate:modelValue":[m=>l.user_level_id=m,m=>Ge(i)]},{default:r(()=>[t(e(be),{id:`level_${i}`},{default:r(()=>[t(e(ge),{placeholder:"Select level..."})]),_:2},1032,["id"]),t(e(we),null,{default:r(()=>[(d(!0),_(k,null,U(p.userLevels,m=>(d(),f(e(j),{key:m.id,value:m.id},{default:r(()=>[o("div",lt,[o("span",null,u(m.name),1),t(e(w),{variant:"outline",class:"h-5 px-1.5 text-xs"},{default:r(()=>[n(u(m.code),1)]),_:2},1024)])]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),o("div",rt,[t(e(y),{for:`tier_${i}`,class:"text-sm font-medium flex items-center gap-1"},{default:r(()=>[s[38]||(s[38]=n(" Tier Selection ")),$e(i)?v("",!0):(d(),_(k,{key:0},[t(e(w),{variant:"outline",class:"ml-1 h-5 px-1.5 text-xs"},{default:r(()=>s[37]||(s[37]=[n(" Key Selection ")])),_:1}),Te(l.user_level_id)?(d(),f(e(w),{key:0,variant:"default",class:"ml-auto text-xs bg-blue-500 hover:bg-blue-600"},{default:r(()=>[n(u(re(l.user_level_id))+" tiers available ",1)]),_:2},1024)):v("",!0)],64))]),_:2},1032,["for"]),t(e(ye),{disabled:!l.user_level_id,modelValue:l.user_level_tier_id,"onUpdate:modelValue":[m=>l.user_level_tier_id=m,m=>We(i)]},{default:r(()=>[t(e(be),{id:`tier_${i}`,class:J(["border-primary/20",l.user_level_tier_id?"border-blue-500 ring-1 ring-blue-500":""])},{default:r(()=>[t(e(ge),{placeholder:"Select tier..."})]),_:2},1032,["id","class"]),t(e(we),null,{default:r(()=>[!Te(l.user_level_id)&&l.user_level_id?(d(),_("div",ot," No tiers available for this level ")):v("",!0),t(e(j),{value:null},{default:r(()=>[o("div",at,[t(e(E),{class:"h-4 w-4 opacity-70"}),s[39]||(s[39]=o("span",null,"All Tiers",-1))])]),_:1}),(d(!0),_(k,null,U(Ce(l.user_level_id),m=>(d(),f(e(j),{key:m.id,value:m.id},{default:r(()=>[o("div",nt,[t(e(w),{variant:"outline",class:"h-5 px-1.5 text-xs"},{default:r(()=>[n("T"+u(m.tier_order),1)]),_:2},1024),o("span",null,u(m.tier_name),1)])]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["disabled","modelValue","onUpdate:modelValue"]),$e(i)?v("",!0):(d(),_("p",it," Tier-specific incentives override general level incentives "))]),o("div",dt,[t(e(y),{for:`min_score_${i}`,class:"text-sm font-medium"},{default:r(()=>s[40]||(s[40]=[n("Min Score")])),_:2},1032,["for"]),t(e(V),{id:`min_score_${i}`,modelValue:l.min_score,"onUpdate:modelValue":m=>l.min_score=m,modelModifiers:{number:!0},type:"number",min:"0",placeholder:"0",required:"",class:"mt-1"},null,8,["id","modelValue","onUpdate:modelValue"])]),o("div",ut,[t(e(y),{for:`max_score_${i}`,class:"text-sm font-medium"},{default:r(()=>s[41]||(s[41]=[n("Max Score")])),_:2},1032,["for"]),t(e(V),{id:`max_score_${i}`,modelValue:l.max_score,"onUpdate:modelValue":m=>l.max_score=m,modelModifiers:{number:!0},type:"number",min:l.min_score||0,placeholder:"100",required:"",class:"mt-1"},null,8,["id","modelValue","onUpdate:modelValue","min"])]),o("div",mt,[t(e(y),{for:`performance_level_${i}`,class:"text-sm font-medium"},{default:r(()=>s[42]||(s[42]=[n("Performance Level")])),_:2},1032,["for"]),_s(o("select",{id:`performance_level_${i}`,"onUpdate:modelValue":m=>l.performance_level=m,class:"mt-1 block w-full border-input bg-background px-3 py-2 text-sm ring-offset-background border rounded-md focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onChange:m=>Ke(i)},[s[43]||(s[43]=o("option",{value:""},"Select Level",-1)),(d(!0),_(k,null,U(W.value,m=>(d(),_("option",{key:m.level,value:m.level},u(m.label)+" ("+u(m.min_score)+"-"+u(m.max_score)+") ",9,ct))),128))],40,_t),[[cs,l.performance_level]])]),o("div",ft,[t(e(y),{for:`incentive_amount_${i}`,class:"text-sm font-medium"},{default:r(()=>s[44]||(s[44]=[n("Amount ($)")])),_:2},1032,["for"]),t(e(V),{id:`incentive_amount_${i}`,modelValue:l.incentive_amount,"onUpdate:modelValue":m=>l.incentive_amount=m,modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",placeholder:"0.00",required:"",class:"mt-1"},null,8,["id","modelValue","onUpdate:modelValue"])]),o("div",pt,[t(e(g),{onClick:A(m=>is(i),["prevent"]),type:"button",variant:"outline",size:"sm",disabled:e(b).incentives.length<=1,class:"text-destructive hover:text-destructive"},{default:r(()=>[t(e(D),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])])]),l.user_level_id?(d(),_("div",vt,[o("div",xt,[o("div",yt,[o("span",bt,u(oe(l.user_level_id)),1),l.user_level_tier_id?(d(),_(k,{key:0},[s[45]||(s[45]=n(" + ")),o("span",gt,u(Ve(l.user_level_tier_id)),1)],64)):(d(),_("span",wt,"(All tiers)"))]),l.performance_level?(d(),f(e(w),{key:0,variant:Se(l.performance_level),class:"text-xs"},{default:r(()=>{var m;return[n(u((m=K(l.performance_level))==null?void 0:m.label),1)]}),_:2},1032,["variant"])):v("",!0)]),o("div",ht,[s[47]||(s[47]=n(" Preview: Users in ")),o("span",kt,u(oe(l.user_level_id)),1),l.user_level_tier_id?(d(),_(k,{key:0},[s[46]||(s[46]=n(" at ")),o("span",Ct,u(Ve(l.user_level_tier_id)),1)],64)):(d(),_(k,{key:1},[n(" (all tiers) ")],64)),n(" with scores "+u(l.min_score)+"-"+u(l.max_score)+" will receive ",1),o("span",$t,"$"+u(l.incentive_amount||0),1),s[48]||(s[48]=n(" and be rated as ")),o("span",{class:J(["font-medium",{"text-green-600":l.performance_level===1,"text-blue-600":l.performance_level===2,"text-yellow-600":l.performance_level===3,"text-red-600":l.performance_level===4}])},u(((T=K(l.performance_level))==null?void 0:T.label)||"Not specified"),3)])])):v("",!0)]}),_:2},1024)]),_:2},1032,["class"]))),128))]),t(e(xe)),o("div",Tt,[t(e(g),{onClick:A(ns,["prevent"]),type:"button",variant:"outline"},{default:r(()=>[t(e(F),{class:"mr-2 h-4 w-4"}),s[49]||(s[49]=n(" Add Level Incentive "))]),_:1}),o("div",null,[t(e(g),{type:"submit",disabled:e(b).processing},{default:r(()=>[e(b).processing?(d(),f(e(Z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(d(),f(e(z),{key:1,class:"mr-2 h-4 w-4"})),n(" "+u(e(b).processing?"Saving...":"Save Incentives"),1)]),_:1},8,["disabled"]),o("div",Vt,[e(b).incentives.some(l=>l.user_level_tier_id)?(d(),_("span",St,[t(e(z),{class:"h-3 w-3 mr-1"}),s[50]||(s[50]=n(" Tier-specific incentives included "))])):v("",!0)])])])],32)):v("",!0)]),_:1})]),_:1})]),t(e(Ae),{open:I.value||S.value,"onUpdate:open":Y},{default:r(()=>[t(e(je),{class:"sm:max-w-md"},{default:r(()=>[t(e(De),null,{default:r(()=>[o("div",Ut,[o("div",Lt,[t(e(he),{class:"h-6 w-6 text-primary"})]),o("div",null,[t(e(Ee),null,{default:r(()=>[n(u(S.value?"Edit Category":"Create New Category"),1)]),_:1}),t(e(Ne),null,{default:r(()=>[n(u(S.value?"Update the category information below":"Add a new evaluation category to organize your assessments"),1)]),_:1})])])]),_:1}),o("form",{onSubmit:s[7]||(s[7]=A(l=>S.value?Ze():Qe(),["prevent"])),class:"space-y-4"},[o("div",Mt,[t(e(y),{for:"category_name"},{default:r(()=>s[51]||(s[51]=[n("Category Name")])),_:1}),t(e(V),{id:"category_name",modelValue:e(c).name,"onUpdate:modelValue":s[3]||(s[3]=l=>e(c).name=l),placeholder:"Enter a descriptive category name",required:""},null,8,["modelValue"]),e(c).errors.name?(d(),_("span",At,[t(e(P),{class:"mr-1 h-4 w-4"}),n(" "+u(e(c).errors.name),1)])):v("",!0)]),o("div",jt,[t(e(y),{for:"max_score"},{default:r(()=>s[52]||(s[52]=[n("Maximum Score")])),_:1}),t(e(V),{id:"max_score",modelValue:e(c).max_score,"onUpdate:modelValue":s[4]||(s[4]=l=>e(c).max_score=l),modelModifiers:{number:!0},type:"number",min:"1",max:"1000",placeholder:"Enter the maximum possible score",required:""},null,8,["modelValue"]),s[53]||(s[53]=o("p",{class:"text-xs text-muted-foreground"}," The highest score that can be assigned in this category ",-1)),e(c).errors.max_score?(d(),_("span",Dt,[t(e(P),{class:"mr-1 h-4 w-4"}),n(" "+u(e(c).errors.max_score),1)])):v("",!0)]),o("div",Et,[t(e(y),{for:"applies_to"},{default:r(()=>s[54]||(s[54]=[n("Applies To")])),_:1}),t(e(ye),{modelValue:e(c).applies_to,"onUpdate:modelValue":s[5]||(s[5]=l=>e(c).applies_to=l),disabled:e(c).processing},{default:r(()=>[t(e(be),{id:"applies_to"},{default:r(()=>[t(e(ge),{placeholder:"Select course type..."})]),_:1}),t(e(we),null,{default:r(()=>[t(e(j),{value:"regular"},{default:r(()=>[o("div",Nt,[t(e(Ie),{class:"h-4 w-4"}),s[55]||(s[55]=o("span",null,"Regular Courses Only",-1))])]),_:1}),t(e(j),{value:"online"},{default:r(()=>[o("div",Bt,[t(e(Oe),{class:"h-4 w-4"}),s[56]||(s[56]=o("span",null,"Online Courses Only",-1))])]),_:1}),t(e(j),{value:"both"},{default:r(()=>[o("div",Ft,[t(e(E),{class:"h-4 w-4"}),s[57]||(s[57]=o("span",null,"Both Course Types",-1))])]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),s[58]||(s[58]=o("p",{class:"text-xs text-muted-foreground"}," Specify where this evaluation category can be used ",-1)),e(c).errors.applies_to?(d(),_("span",zt,[t(e(P),{class:"mr-1 h-4 w-4"}),n(" "+u(e(c).errors.applies_to),1)])):v("",!0)]),o("div",Pt,[t(e(y),{for:"category_description"},{default:r(()=>s[59]||(s[59]=[n("Description (Optional)")])),_:1}),t(e(Me),{id:"category_description",modelValue:e(c).description,"onUpdate:modelValue":s[6]||(s[6]=l=>e(c).description=l),placeholder:"Provide additional details about this category...",rows:"3"},null,8,["modelValue"])]),t(e(Be),null,{default:r(()=>[t(e(g),{type:"button",variant:"outline",onClick:Y,disabled:e(c).processing},{default:r(()=>s[60]||(s[60]=[n(" Cancel ")])),_:1},8,["disabled"]),t(e(g),{type:"submit",disabled:e(c).processing},{default:r(()=>[e(c).processing?(d(),f(e(Z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(d(),f(e(z),{key:1,class:"mr-2 h-4 w-4"})),n(" "+u(e(c).processing?S.value?"Updating...":"Creating...":S.value?"Update Category":"Create Category"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),t(e(Ae),{open:se.value,"onUpdate:open":ae},{default:r(()=>[t(e(je),{class:"sm:max-w-md"},{default:r(()=>{var l,i,T;return[t(e(De),null,{default:r(()=>[o("div",It,[o("div",Ot,[t(e(Pe),{class:"h-6 w-6 text-blue-600"})]),o("div",null,[t(e(Ee),null,{default:r(()=>s[61]||(s[61]=[n("Add Evaluation Type")])),_:1}),t(e(Ne),null,{default:r(()=>{var m;return[s[62]||(s[62]=n(" Create a new evaluation type for ")),o("span",qt,u(((m=h.value)==null?void 0:m.name)||"this category"),1)]}),_:1})])])]),_:1}),o("form",{onSubmit:A(ts,["prevent"]),class:"space-y-4"},[o("div",Rt,[t(e(y),{for:"type_name"},{default:r(()=>s[63]||(s[63]=[n("Type Name")])),_:1}),t(e(V),{id:"type_name",modelValue:e(x).type_name,"onUpdate:modelValue":s[8]||(s[8]=m=>e(x).type_name=m),placeholder:"e.g., Excellent, Good, Fair, Poor",required:""},null,8,["modelValue"]),e(x).errors.type_name?(d(),_("span",Gt,[t(e(P),{class:"mr-1 h-4 w-4"}),n(" "+u(e(x).errors.type_name),1)])):v("",!0)]),o("div",Wt,[t(e(y),{for:"score_value"},{default:r(()=>s[64]||(s[64]=[n("Score Value")])),_:1}),t(e(V),{id:"score_value",modelValue:e(x).score_value,"onUpdate:modelValue":s[9]||(s[9]=m=>e(x).score_value=m),modelModifiers:{number:!0},type:"number",min:"0",max:((l=h.value)==null?void 0:l.max_score)||0,placeholder:`Enter score (0 - ${((i=h.value)==null?void 0:i.max_score)||0})`,required:""},null,8,["modelValue","max","placeholder"]),o("p",Kt," Maximum allowed: "+u(((T=h.value)==null?void 0:T.max_score)||0)+" points ",1),e(x).errors.score_value?(d(),_("span",Yt,[t(e(P),{class:"mr-1 h-4 w-4"}),n(" "+u(e(x).errors.score_value),1)])):v("",!0)]),o("div",Ht,[t(e(y),{for:"type_description"},{default:r(()=>s[65]||(s[65]=[n("Description (Optional)")])),_:1}),t(e(Me),{id:"type_description",modelValue:e(x).description,"onUpdate:modelValue":s[10]||(s[10]=m=>e(x).description=m),placeholder:"Describe this evaluation type...",rows:"2"},null,8,["modelValue"])]),t(e(Be),null,{default:r(()=>[t(e(g),{type:"button",variant:"outline",onClick:ae,disabled:e(x).processing},{default:r(()=>s[66]||(s[66]=[n(" Cancel ")])),_:1},8,["disabled"]),t(e(g),{type:"submit",disabled:e(x).processing},{default:r(()=>[e(x).processing?(d(),f(e(Z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(d(),f(e(z),{key:1,class:"mr-2 h-4 w-4"})),n(" "+u(e(x).processing?"Adding...":"Add Type"),1)]),_:1},8,["disabled"])]),_:1})],32)]}),_:1})]),_:1},8,["open"]),t(e(de),{open:O.value,"onUpdate:open":s[11]||(s[11]=l=>O.value=l)},{default:r(()=>[t(e(ue),null,{default:r(()=>[t(e(me),null,{default:r(()=>[o("div",Jt,[o("div",Qt,[t(e(ee),{class:"h-6 w-6 text-destructive"})]),o("div",Xt,[t(e(_e),null,{default:r(()=>s[67]||(s[67]=[n("Delete Evaluation Category")])),_:1}),t(e(ce),{class:"mt-2"},{default:r(()=>{var l;return[s[68]||(s[68]=n(" Are you sure you want to delete ")),o("span",Zt,u(((l=N.value)==null?void 0:l.name)||"this category"),1),s[69]||(s[69]=n("? "))]}),_:1})])])]),_:1}),t(e(Fe),{variant:"destructive",class:"my-4"},{default:r(()=>[t(e(ee),{class:"h-4 w-4"}),t(e(ze),null,{default:r(()=>s[70]||(s[70]=[o("p",{class:"font-medium mb-1"},"This action cannot be undone.",-1),o("p",null,"This will permanently delete:",-1),o("ul",{class:"list-disc list-inside mt-2 space-y-1 text-sm"},[o("li",null,"The evaluation category"),o("li",null,"All associated evaluation types"),o("li",null,"Any related scoring configurations")],-1)])),_:1})]),_:1}),t(e(fe),null,{default:r(()=>[t(e(pe),null,{default:r(()=>s[71]||(s[71]=[n("Cancel")])),_:1}),t(e(ve),{onClick:ss,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:r(()=>[t(e(D),{class:"mr-2 h-4 w-4"}),s[72]||(s[72]=n(" Delete Category "))]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(de),{open:q.value,"onUpdate:open":s[12]||(s[12]=l=>q.value=l)},{default:r(()=>[t(e(ue),null,{default:r(()=>[t(e(me),null,{default:r(()=>[o("div",el,[o("div",sl,[t(e(D),{class:"h-8 w-8 text-destructive"})]),t(e(_e),null,{default:r(()=>s[73]||(s[73]=[n("Delete Evaluation Type")])),_:1}),t(e(ce),null,{default:r(()=>{var l;return[s[74]||(s[74]=n(" Are you sure you want to delete the evaluation type ")),o("span",tl,u(((l=B.value)==null?void 0:l.type_name)||"this type"),1),s[75]||(s[75]=n("? This action cannot be undone. "))]}),_:1})])]),_:1}),t(e(fe),null,{default:r(()=>[t(e(pe),null,{default:r(()=>s[76]||(s[76]=[n("Cancel")])),_:1}),t(e(ve),{onClick:rs,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:r(()=>[t(e(D),{class:"mr-2 h-4 w-4"}),s[77]||(s[77]=n(" Delete Type "))]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(de),{open:R.value,"onUpdate:open":s[13]||(s[13]=l=>R.value=l)},{default:r(()=>[t(e(ue),null,{default:r(()=>[t(e(me),null,{default:r(()=>[o("div",ll,[o("div",rl,[t(e(ee),{class:"h-8 w-8 text-yellow-600"})]),t(e(_e),null,{default:r(()=>s[78]||(s[78]=[n("Remove Incentive Tier")])),_:1}),t(e(ce),null,{default:r(()=>s[79]||(s[79]=[n(" Are you sure you want to remove this incentive tier? This action cannot be undone. ")])),_:1})])]),_:1}),t(e(fe),null,{default:r(()=>[t(e(pe),null,{default:r(()=>s[80]||(s[80]=[n("Cancel")])),_:1}),t(e(ve),{onClick:ds,class:"bg-yellow-600 text-white hover:bg-yellow-700"},{default:r(()=>s[81]||(s[81]=[n(" Remove Tier ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{rr as default};
