import{r as k,C as F,c as w,B as D,l as N,a as s,o as l,b as h,e,u as o,m as U,w as _,f as C,P as V,t as a,s as c,v as S,n as m,j as L,h as b,E as v,F as M,i as H,H as P}from"./app-De5aCyOy.js";const O={class:"py-6"},T={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},E={class:"mb-8"},$={class:"text-3xl font-bold text-gray-900 dark:text-foreground"},I={class:"text-gray-600 dark:text-muted-foreground mt-2"},R={class:"mb-8"},G={class:"sm:hidden"},J={class:"hidden sm:block"},K={class:"flex space-x-8","aria-label":"Tabs"},Q={class:"bg-white dark:bg-card shadow rounded-lg border dark:border-border"},W={key:0},X={class:"mb-4"},Y={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto"},Z=["onClick"],ee={class:"flex items-center space-x-3"},re={class:"flex-1 min-w-0"},te={class:"text-sm font-medium text-gray-900 dark:text-foreground"},oe={class:"text-sm text-gray-500 dark:text-muted-foreground"},de={key:0,class:"text-xs text-gray-400 dark:text-muted-foreground mt-1 truncate"},se={key:0,class:"flex-shrink-0"},le={key:1,class:"text-center py-8"},ae={key:2,class:"text-center py-8"},ne={key:3,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ie={key:1},ue={class:"flex items-center space-x-6"},be={class:"shrink-0"},ce={key:0,class:"h-20 w-20 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center border dark:border-border"},me={key:1,class:"h-20 w-20 bg-gray-200 dark:bg-muted rounded-lg flex items-center justify-center border dark:border-border"},fe={class:"flex-1"},xe={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ge={class:"mt-6"},ke={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ve={class:"space-y-6"},pe=["placeholder"],he={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ye={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},we={class:"space-y-4"},_e={class:"flex items-start"},Ce={class:"flex items-center h-5"},Ve={class:"ml-3 text-sm"},Me={class:"text-gray-500 dark:text-muted-foreground"},Pe={class:"flex items-start"},Be={class:"flex items-center h-5"},je={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},Ae={class:"flex"},qe={class:"ml-3"},ze={class:"text-sm font-medium text-blue-800 dark:text-blue-200"},Fe={class:"mt-2 text-sm text-blue-700 dark:text-blue-300"},De={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-border"},Ne=["disabled"],Ue={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},He={__name:"Create",props:{course:{type:Object,required:!0},module:{type:Object,required:!0},nextOrderNumber:{type:Number,required:!0},availableVideos:{type:Array,default:()=>[]}},setup(u){const f=u,B=new URLSearchParams(window.location.search),n=k(B.get("type")||"video"),p=k(null),g=k(null),x=k(""),t=F({content_type:"video",title:"",order_number:1,is_required:!0,is_active:!0,video_id:null,pdf_file:null,pdf_name:""}),y=w(()=>x.value?f.availableVideos.filter(i=>i.name.toLowerCase().includes(x.value.toLowerCase())||i.description&&i.description.toLowerCase().includes(x.value.toLowerCase())):f.availableVideos),j=w(()=>n.value==="video"?t.video_id&&t.title:t.pdf_file&&t.pdf_name&&t.title);D(()=>{t.order_number=f.nextOrderNumber,t.content_type=n.value}),N(n,i=>{t.content_type=i,i==="video"?(t.pdf_file=null,t.pdf_name="",g.value=null):t.video_id=null});const A=i=>{t.video_id=i.id,t.title||(t.title=i.name)},q=i=>{const r=i.target.files[0];if(r){t.pdf_file=r,g.value=r.name;const d=r.name.replace(".pdf","");t.pdf_name||(t.pdf_name=d),t.title||(t.title=d)}},z=()=>{t.post(route("admin.module-content.store",[f.course.id,f.module.id]),{onSuccess:()=>{t.reset(),t.order_number=f.nextOrderNumber+1,g.value=null,p.value&&(p.value.value="")}})};return(i,r)=>(l(),s(M,null,[h(o(U),{title:"Add Content"}),e("div",O,[e("div",T,[e("div",E,[h(o(V),{href:i.route("admin.module-content.index",[u.course.id,u.module.id]),class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center mb-4"},{default:_(()=>r[9]||(r[9]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),C(" Back to Module Content ")])),_:1},8,["href"]),e("h1",$,a(n.value==="video"?"Add Video":"Upload PDF"),1),e("p",I,a(u.module.name)+" - "+a(u.course.name),1)]),e("div",R,[e("div",G,[r[11]||(r[11]=e("label",{for:"content-type",class:"sr-only"},"Select content type",-1)),c(e("select",{id:"content-type","onUpdate:modelValue":r[0]||(r[0]=d=>n.value=d),class:"block w-full border-gray-300 dark:border-border rounded-md bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400"},r[10]||(r[10]=[e("option",{value:"video"},"Add Video",-1),e("option",{value:"pdf"},"Upload PDF",-1)]),512),[[S,n.value]])]),e("div",J,[e("nav",K,[e("button",{onClick:r[1]||(r[1]=d=>n.value="video"),class:m([n.value==="video"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 dark:text-muted-foreground hover:text-gray-700 dark:hover:text-foreground hover:border-gray-300 dark:hover:border-border","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])},r[12]||(r[12]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]),e("span",null,"Add Video")],-1)]),2),e("button",{onClick:r[2]||(r[2]=d=>n.value="pdf"),class:m([n.value==="pdf"?"border-red-500 text-red-600 dark:text-red-400":"border-transparent text-gray-500 dark:text-muted-foreground hover:text-gray-700 dark:hover:text-foreground hover:border-gray-300 dark:hover:border-border","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])},r[13]||(r[13]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("span",null,"Upload PDF")],-1)]),2)])])]),e("div",Q,[e("form",{onSubmit:L(z,["prevent"]),class:"space-y-8 p-6"},[n.value==="video"?(l(),s("div",W,[r[18]||(r[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-4"}," Select Video * ",-1)),e("div",X,[c(e("input",{"onUpdate:modelValue":r[3]||(r[3]=d=>x.value=d),type:"text",placeholder:"Search videos...",class:"w-full border border-gray-300 dark:border-border rounded-md px-4 py-2 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent placeholder:text-gray-500 dark:placeholder:text-muted-foreground"},null,512),[[v,x.value]])]),y.value.length>0?(l(),s("div",Y,[(l(!0),s(M,null,H(y.value,d=>(l(),s("div",{key:d.id,onClick:Se=>A(d),class:m(["relative p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",o(t).video_id===d.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-border hover:border-green-300 dark:hover:border-green-700 hover:bg-gray-50 dark:hover:bg-muted/50"])},[e("div",ee,[r[15]||(r[15]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])])],-1)),e("div",re,[e("h4",te,a(d.name),1),e("p",oe,a(d.formatted_duration),1),d.description?(l(),s("p",de,a(d.description),1)):b("",!0)]),o(t).video_id===d.id?(l(),s("div",se,r[14]||(r[14]=[e("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):b("",!0)])],10,Z))),128))])):u.availableVideos.length===0?(l(),s("div",le,r[16]||(r[16]=[e("svg",{class:"w-16 h-16 text-gray-400 dark:text-muted-foreground mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-foreground mb-2"},"No videos available",-1),e("p",{class:"text-gray-600 dark:text-muted-foreground"},"All videos are already assigned to this module or no videos exist in your library.",-1)]))):(l(),s("div",ae,r[17]||(r[17]=[e("svg",{class:"w-16 h-16 text-gray-400 dark:text-muted-foreground mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-foreground mb-2"},"No videos found",-1),e("p",{class:"text-gray-600 dark:text-muted-foreground"},"Try adjusting your search terms.",-1)]))),o(t).errors.video_id?(l(),s("div",ne,a(o(t).errors.video_id),1)):b("",!0)])):b("",!0),n.value==="pdf"?(l(),s("div",ie,[r[23]||(r[23]=e("label",{for:"pdf_file",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," PDF File * ",-1)),e("div",ue,[e("div",be,[g.value?(l(),s("div",ce,r[19]||(r[19]=[e("svg",{class:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))):(l(),s("div",me,r[20]||(r[20]=[e("svg",{class:"w-8 h-8 text-gray-400 dark:text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)])))]),e("div",fe,[e("input",{id:"pdf_file",ref_key:"pdfInput",ref:p,type:"file",accept:".pdf",onChange:q,class:m(["block w-full text-sm text-gray-500 dark:text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-red-50 dark:file:bg-red-900/20 file:text-red-700 dark:file:text-red-400 hover:file:bg-red-100 dark:hover:file:bg-red-900/30",{"border-red-500 dark:border-red-400":o(t).errors.pdf_file}])},null,34),r[21]||(r[21]=e("p",{class:"text-xs text-gray-500 dark:text-muted-foreground mt-1"}," Maximum file size: 10MB ",-1)),o(t).errors.pdf_file?(l(),s("div",xe,a(o(t).errors.pdf_file),1)):b("",!0)])]),e("div",ge,[r[22]||(r[22]=e("label",{for:"pdf_name",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," PDF Name * ",-1)),c(e("input",{id:"pdf_name","onUpdate:modelValue":r[4]||(r[4]=d=>o(t).pdf_name=d),type:"text",required:"",class:m(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent placeholder:text-gray-500 dark:placeholder:text-muted-foreground",{"border-red-500 dark:border-red-400":o(t).errors.pdf_name}]),placeholder:"Enter a descriptive name for the PDF"},null,2),[[v,o(t).pdf_name]]),o(t).errors.pdf_name?(l(),s("div",ke,a(o(t).errors.pdf_name),1)):b("",!0)])])):b("",!0),e("div",ve,[e("div",null,[r[24]||(r[24]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Content Title * ",-1)),c(e("input",{id:"title","onUpdate:modelValue":r[5]||(r[5]=d=>o(t).title=d),type:"text",required:"",class:m(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent placeholder:text-gray-500 dark:placeholder:text-muted-foreground",{"border-red-500 dark:border-red-400":o(t).errors.title}]),placeholder:n.value==="video"?"How this content will appear in the module":"How students will see this PDF"},null,10,pe),[[v,o(t).title]]),o(t).errors.title?(l(),s("div",he,a(o(t).errors.title),1)):b("",!0)]),e("div",null,[r[25]||(r[25]=e("label",{for:"order_number",class:"block text-sm font-medium text-gray-700 dark:text-foreground mb-2"}," Order Number * ",-1)),c(e("input",{id:"order_number","onUpdate:modelValue":r[6]||(r[6]=d=>o(t).order_number=d),type:"number",min:"1",required:"",class:m(["w-full border border-gray-300 dark:border-border rounded-md px-4 py-3 bg-white dark:bg-background text-gray-900 dark:text-foreground focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent placeholder:text-gray-500 dark:placeholder:text-muted-foreground",{"border-red-500 dark:border-red-400":o(t).errors.order_number}]),placeholder:"Position in module sequence"},null,2),[[v,o(t).order_number,void 0,{number:!0}]]),r[26]||(r[26]=e("p",{class:"text-xs text-gray-500 dark:text-muted-foreground mt-1"}," Position of this content in the module sequence ",-1)),o(t).errors.order_number?(l(),s("div",ye,a(o(t).errors.order_number),1)):b("",!0)]),e("div",we,[r[29]||(r[29]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-foreground"},"Content Settings",-1)),e("div",_e,[e("div",Ce,[c(e("input",{id:"is_required","onUpdate:modelValue":r[7]||(r[7]=d=>o(t).is_required=d),type:"checkbox",class:"h-4 w-4 text-blue-600 dark:text-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 border-gray-300 dark:border-border rounded bg-white dark:bg-background"},null,512),[[P,o(t).is_required]])]),e("div",Ve,[r[27]||(r[27]=e("label",{for:"is_required",class:"font-medium text-gray-700 dark:text-foreground"}," Required Content ",-1)),e("p",Me," Students must "+a(n.value==="video"?"watch this video":"view this PDF")+" to progress ",1)])]),e("div",Pe,[e("div",Be,[c(e("input",{id:"is_active","onUpdate:modelValue":r[8]||(r[8]=d=>o(t).is_active=d),type:"checkbox",class:"h-4 w-4 text-blue-600 dark:text-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 border-gray-300 dark:border-border rounded bg-white dark:bg-background"},null,512),[[P,o(t).is_active]])]),r[28]||(r[28]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"is_active",class:"font-medium text-gray-700 dark:text-foreground"}," Active Content "),e("p",{class:"text-gray-500 dark:text-muted-foreground"}," Content is visible and accessible to students ")],-1))])])]),e("div",je,[e("div",Ae,[r[30]||(r[30]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-blue-400 dark:text-blue-300",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),e("div",qe,[e("h3",ze," Adding "+a(n.value==="video"?"Video":"PDF")+" to "+a(u.module.name),1),e("div",Fe,[e("p",null,'This content will be added to the "'+a(u.module.name)+'" module in the "'+a(u.course.name)+'" course.',1)])])])]),e("div",De,[h(o(V),{href:i.route("admin.module-content.index",[u.course.id,u.module.id]),class:"px-6 py-3 border border-gray-300 dark:border-border rounded-md text-gray-700 dark:text-foreground bg-white dark:bg-background hover:bg-gray-50 dark:hover:bg-muted transition-colors duration-200"},{default:_(()=>r[31]||(r[31]=[C(" Cancel ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:o(t).processing||!j.value,class:"px-6 py-3 border border-transparent rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-600 hover:bg-blue-700 dark:hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-white dark:focus:ring-offset-background transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[o(t).processing?(l(),s("svg",Ue,r[32]||(r[32]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):b("",!0),e("span",null,a(o(t).processing?"Adding...":n.value==="video"?"Add Video":"Upload PDF"),1)],8,Ne)])],32)])])])],64))}};export{He as default};
