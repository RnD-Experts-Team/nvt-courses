import{d as G,a as f,o as c,K,n as z,u as O,P as Y,z as l,g,w as n,e as t,b as o,f as u,t as i,h as b,F as J,i as Z,k as $,r as tt,c as C,W as et}from"./app-De5aCyOy.js";import{f as st}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as ot}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as rt}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as nt}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{b as at,_ as it}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as dt}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as lt}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as ct}from"./index-CNloWqrH.js";import{_ as mt}from"./_plugin-vue_export-helper-DsuA5ZjC.js";import{F as ut}from"./file-text-BOOsEpvl.js";import{T as ft}from"./triangle-alert-QBZ4KeJk.js";import{A as _t}from"./arrow-left-kG5YrchA.js";import{R as xt}from"./rotate-ccw-D8-XKrTw.js";import{C as M}from"./clock-BXDw5ZYb.js";import{T as gt}from"./trending-up-C922m79C.js";import{C as pt}from"./chart-column-CQTiunbh.js";import{C as V}from"./circle-x-qrbwyPjC.js";import{C as E}from"./circle-check-big-BYC-wlwA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";const ht=G({__name:"CardFooter",props:{class:{}},setup(m){const e=m;return(d,r)=>(c(),f("div",{class:z(O(at)("flex items-center p-6 pt-0",e.class))},[K(d.$slots,"default")],2))}}),wt={components:{AppLayout:st,Link:Y,Card:ot,CardContent:rt,CardDescription:nt,CardFooter:ht,CardHeader:dt,CardTitle:lt,Badge:ct,Button:it,CheckCircle:E,XCircle:V,BarChart3:pt,TrendingUp:gt,Clock:M,RotateCcw:xt,ArrowLeft:_t,AlertTriangle:ft,FileText:ut},props:{attempt:{type:Object,required:!0},userAttempts:{type:Array,default:()=>[]}},setup(m){const e=tt(!1),d=2*Math.PI*56,r=C(()=>{var s;return[{name:"Quizzes",route:"quizzes.index"},{name:((s=m.attempt.quiz)==null?void 0:s.title)||"Quiz",route:null},{name:"Results",route:null}]}),B=C(()=>{var s;return!((s=m.attempt.quiz)!=null&&s.total_points)||m.attempt.quiz.total_points===0?0:m.attempt.total_score/m.attempt.quiz.total_points*100}),q=C(()=>Math.max(0,3-m.userAttempts.length)),v=C(()=>!m.attempt.passed&&q.value>0&&(m.attempt.attempt_number||0)<3),T=C(()=>{const s=m.attempt.attempt_number>=3||m.userAttempts.length>=3;return m.attempt.passed||s});return{breadcrumbs:r,showAnswers:e,circumference:d,scorePercentage:B,attemptsLeft:q,canRetry:v,showCorrectAnswersAllowed:T,formatDate:s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,formatAnswer:s=>s?Array.isArray(s)?s.join(", "):String(s):null,formatCorrectAnswer:s=>Array.isArray(s)?s.join(", "):s,getStatusText:s=>{var k;return((k=s.question)==null?void 0:k.type)==="text"?s.is_correct!==null?"Manually Graded":"Pending Review":s.is_correct?"Correct":"Incorrect"},getStatusColor:s=>s.is_correct===!0?"bg-primary":s.is_correct===!1?"bg-destructive":"bg-accent",getStatusBadgeVariant:s=>s.is_correct===!0?"default":s.is_correct===!1?"destructive":"secondary",getStatusIcon:s=>s.is_correct===!0?E:s.is_correct===!1?V:M,toggleCorrectAnswers:()=>{e.value=!e.value},retryQuiz:()=>{et.visit(route("quizzes.show",m.attempt.quiz.id))}}}},bt={class:"min-h-screen bg-gradient-to-br from-background to-muted/20"},Ct={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},vt={class:"text-center mb-8"},yt={class:"text-lg text-muted-foreground"},At={class:"font-semibold text-foreground"},kt={class:"text-center mb-6"},zt={class:"relative inline-flex items-center justify-center w-32 h-32 mb-4"},qt={class:"transform -rotate-90 w-32 h-32"},Tt=["stroke-dasharray","stroke-dashoffset"],St={class:"absolute inset-0 flex flex-col items-center justify-center"},Bt={class:"text-3xl font-bold text-foreground"},Lt={class:"mb-4"},Pt={class:"text-muted-foreground"},Qt={class:"font-bold text-foreground"},Rt={class:"font-bold text-foreground"},jt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Dt={class:"flex items-center"},Ft={class:"p-3 rounded-full bg-primary/10 text-primary"},Nt={class:"ml-4"},It={class:"text-xl font-bold text-foreground"},Mt={class:"flex items-center"},Vt={class:"ml-4"},Et={class:"text-xl font-bold text-foreground"},Ht={class:"flex items-center"},Ut={class:"p-3 rounded-full bg-secondary text-secondary-foreground"},Xt={class:"ml-4"},Wt={class:"text-xl font-bold text-foreground"},Gt={class:"flex items-center"},Kt={class:"p-3 rounded-full bg-accent text-accent-foreground"},Ot={class:"ml-4"},Yt={class:"text-xl font-bold text-foreground"},Jt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Zt={class:"text-center md:text-left"},$t={class:"text-sm font-medium text-foreground"},te={class:"text-center md:text-left"},ee={class:"text-sm font-medium text-foreground"},se={class:"text-center md:text-left"},oe={class:"text-sm font-medium text-foreground"},re={class:"flex flex-col sm:flex-row justify-center gap-4 mb-8"},ne={class:"flex items-center justify-between"},ae={class:"flex items-center space-x-2"},ie={key:0,class:"mt-2 text-sm text-muted-foreground"},de={class:"flex items-center"},le={key:1,class:"mt-2 text-sm text-muted-foreground"},ce={class:"flex items-center"},me={key:0,class:"space-y-6"},ue={class:"flex items-center justify-between"},fe={class:"flex items-center"},_e={class:"w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold mr-3"},xe={class:"font-medium text-foreground"},ge={class:"flex items-center space-x-2"},pe={class:"bg-muted rounded-lg p-3"},he={class:"text-foreground font-medium"},we={class:"bg-primary/5 border border-primary/20 rounded-lg p-3"},be={class:"text-primary-foreground/90"},Ce={key:0},ve={class:"bg-primary/10 border border-primary/30 rounded-lg p-3"},ye={class:"text-primary"},Ae={key:1},ke={class:"bg-accent/50 border border-accent rounded-lg p-3"},ze={class:"text-accent-foreground"},qe={class:"flex items-center justify-between pt-2 border-t border-border"},Te={class:"flex items-center"},Se={key:0,class:"text-sm text-muted-foreground"},Be={key:1,class:"text-center py-12"},Le={class:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4"};function Pe(m,e,d,r,B,q){const v=l("CheckCircle"),T=l("XCircle"),h=l("Badge"),_=l("CardContent"),x=l("Card"),L=l("BarChart3"),P=l("TrendingUp"),Q=l("Clock"),S=l("RotateCcw"),y=l("CardTitle"),A=l("CardHeader"),s=l("Button"),k=l("ArrowLeft"),H=l("Link"),U=l("AlertTriangle"),X=l("FileText"),W=l("AppLayout");return c(),g(W,{breadcrumbs:r.breadcrumbs},{default:n(()=>{var R;return[t("div",bt,[t("div",Ct,[t("div",vt,[e[1]||(e[1]=t("h1",{class:"text-4xl font-bold text-foreground mb-2"},"Quiz Results",-1)),t("p",yt,[e[0]||(e[0]=u(" Performance review for ")),t("span",At,'"'+i(((R=d.attempt.quiz)==null?void 0:R.title)||"Quiz")+'"',1)])]),o(x,{class:"mb-8"},{default:n(()=>[o(_,{class:"p-8"},{default:n(()=>{var a,p;return[t("div",kt,[t("div",zt,[(c(),f("svg",qt,[e[2]||(e[2]=t("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor","stroke-width":"8",fill:"none",class:"text-border"},null,-1)),t("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor","stroke-width":"8",fill:"none","stroke-dasharray":r.circumference,"stroke-dashoffset":r.circumference-r.scorePercentage/100*r.circumference,class:z([r.scorePercentage>=(((a=d.attempt.quiz)==null?void 0:a.pass_threshold)||70)?"text-primary":"text-destructive","transition-all duration-1000 ease-out"])},null,10,Tt)])),t("div",St,[t("span",Bt,i(Math.round(r.scorePercentage))+"%",1),e[3]||(e[3]=t("span",{class:"text-sm text-muted-foreground"},"Score",-1))])]),t("div",Lt,[o(h,{variant:d.attempt.passed?"default":"destructive",class:"px-6 py-3 text-lg font-semibold border-2"},{default:n(()=>[d.attempt.passed?(c(),g(v,{key:0,class:"w-6 h-6 mr-2"})):(c(),g(T,{key:1,class:"w-6 h-6 mr-2"})),u(" "+i(d.attempt.passed?"PASSED":"FAILED"),1)]),_:1},8,["variant"])]),t("p",Pt,[e[4]||(e[4]=u(" You scored ")),t("span",Qt,i(d.attempt.total_score||0),1),e[5]||(e[5]=u(" out of ")),t("span",Rt,i(((p=d.attempt.quiz)==null?void 0:p.total_points)||0),1),e[6]||(e[6]=u(" points "))])])]}),_:1})]),_:1}),t("div",jt,[o(x,null,{default:n(()=>[o(_,{class:"p-6"},{default:n(()=>{var a;return[t("div",Dt,[t("div",Ft,[o(L,{class:"w-6 h-6"})]),t("div",Nt,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Final Score",-1)),t("p",It,i(d.attempt.total_score||0)+"/"+i(((a=d.attempt.quiz)==null?void 0:a.total_points)||0),1)])])]}),_:1})]),_:1}),o(x,null,{default:n(()=>[o(_,{class:"p-6"},{default:n(()=>{var a;return[t("div",Mt,[t("div",{class:z(["p-3 rounded-full",r.scorePercentage>=(((a=d.attempt.quiz)==null?void 0:a.pass_threshold)||70)?"bg-primary/10 text-primary":"bg-destructive/10 text-destructive"])},[o(P,{class:"w-6 h-6"})],2),t("div",Vt,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Percentage",-1)),t("p",Et,i(Math.round(r.scorePercentage))+"%",1)])])]}),_:1})]),_:1}),o(x,null,{default:n(()=>[o(_,{class:"p-6"},{default:n(()=>[t("div",Ht,[t("div",Ut,[o(Q,{class:"w-6 h-6"})]),t("div",Xt,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Attempt",-1)),t("p",Wt,i(d.attempt.attempt_number||d.userAttempts.length)+"/3",1)])])]),_:1})]),_:1}),o(x,null,{default:n(()=>[o(_,{class:"p-6"},{default:n(()=>[t("div",Gt,[t("div",Kt,[o(S,{class:"w-6 h-6"})]),t("div",Ot,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Attempts Left",-1)),t("p",Yt,i(r.attemptsLeft),1)])])]),_:1})]),_:1})]),o(x,{class:"mb-8"},{default:n(()=>[o(A,null,{default:n(()=>[o(y,null,{default:n(()=>e[11]||(e[11]=[u("Attempt Details")])),_:1})]),_:1}),o(_,null,{default:n(()=>{var a;return[t("div",Jt,[t("div",Zt,[e[12]||(e[12]=t("p",{class:"text-sm text-muted-foreground mb-1"},"Completed At",-1)),t("p",$t,i(r.formatDate(d.attempt.completed_at)||"Not completed"),1)]),t("div",te,[e[13]||(e[13]=t("p",{class:"text-sm text-muted-foreground mb-1"},"Pass Threshold",-1)),t("p",ee,i(((a=d.attempt.quiz)==null?void 0:a.pass_threshold)||70)+"%",1)]),t("div",se,[e[14]||(e[14]=t("p",{class:"text-sm text-muted-foreground mb-1"},"Time Taken",-1)),t("p",oe,i(d.attempt.time_taken||"N/A"),1)])])]}),_:1})]),_:1}),t("div",re,[r.canRetry?(c(),g(s,{key:0,onClick:r.retryQuiz,class:"shadow-lg hover:shadow-xl",size:"lg"},{default:n(()=>[o(S,{class:"w-5 h-5 mr-2"}),e[15]||(e[15]=u(" Retry Quiz "))]),_:1},8,["onClick"])):b("",!0),o(s,{asChild:"",variant:"outline",size:"lg"},{default:n(()=>[o(H,{href:m.route("quizzes.index")},{default:n(()=>[o(k,{class:"w-5 h-5 mr-2"}),e[16]||(e[16]=u(" Back to Quizzes "))]),_:1},8,["href"])]),_:1})]),o(x,null,{default:n(()=>[o(A,{class:"bg-muted/50 border-b"},{default:n(()=>[t("div",ne,[o(y,{class:"text-xl"},{default:n(()=>e[17]||(e[17]=[u("Question Review")])),_:1}),t("div",ae,[r.showCorrectAnswersAllowed?(c(),g(s,{key:0,onClick:r.toggleCorrectAnswers,variant:"secondary",size:"sm"},{default:n(()=>[u(i(r.showAnswers?"Hide":"Show")+" Correct Answers ",1)]),_:1},8,["onClick"])):b("",!0),o(h,{variant:r.showCorrectAnswersAllowed?"default":"secondary"},{default:n(()=>[u(i(r.showCorrectAnswersAllowed?"Answers Available":"Answers Locked"),1)]),_:1},8,["variant"])])]),r.showCorrectAnswersAllowed?(c(),f("div",ie,[t("p",de,[o(v,{class:"w-4 h-4 mr-1 text-primary"}),u(" Correct answers unlocked - "+i(d.attempt.passed?"Quiz passed!":"Maximum attempts reached"),1)])])):(c(),f("div",le,[t("p",ce,[o(U,{class:"w-4 h-4 mr-1 text-accent-foreground"}),e[18]||(e[18]=u(" Correct answers will be shown after passing or reaching maximum attempts "))])]))]),_:1}),o(_,{class:"p-6"},{default:n(()=>[d.attempt.responses&&d.attempt.responses.length?(c(),f("div",me,[(c(!0),f(J,null,Z(d.attempt.responses,(a,p)=>(c(),g(x,{key:a.id||p},{default:n(()=>[o(A,{class:"bg-muted/30 border-b"},{default:n(()=>[t("div",ue,[t("div",fe,[t("div",_e,i(p+1),1),t("span",xe," Question "+i(p+1),1)]),t("div",ge,[o(h,{variant:"outline"},{default:n(()=>{var w;return[u(i(((w=a.question)==null?void 0:w.points)||0)+" pts ",1)]}),_:2},1024),t("div",{class:z(["w-3 h-3 rounded-full",r.getStatusColor(a)])},null,2)])])]),_:2},1024),o(_,{class:"p-4 space-y-4"},{default:n(()=>{var w,j,D,F,N,I;return[t("div",pe,[t("p",he,i(((w=a.question)==null?void 0:w.question_text)||"Question not available"),1)]),t("div",we,[t("p",be,i(r.formatAnswer(a.answer)||"No answer provided"),1)]),r.showCorrectAnswersAllowed&&r.showAnswers&&((j=a.question)!=null&&j.correct_answer)?(c(),f("div",Ce,[e[19]||(e[19]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Correct Answer(s):",-1)),t("div",ve,[t("p",ye,i(r.formatCorrectAnswer((D=a.question)==null?void 0:D.correct_answer)),1)])])):b("",!0),r.showCorrectAnswersAllowed&&r.showAnswers&&((F=a.question)!=null&&F.correct_answer_explanation)?(c(),f("div",Ae,[e[20]||(e[20]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Explanation:",-1)),t("div",ke,[t("p",ze,i((N=a.question)==null?void 0:N.correct_answer_explanation),1)])])):b("",!0),t("div",qe,[t("div",Te,[o(h,{variant:r.getStatusBadgeVariant(a)},{default:n(()=>[(c(),g($(r.getStatusIcon(a)),{class:"w-3 h-3 mr-1"})),u(" "+i(r.getStatusText(a)),1)]),_:2},1032,["variant"])]),a.points_earned!==void 0?(c(),f("div",Se," Points: "+i(a.points_earned)+"/"+i(((I=a.question)==null?void 0:I.points)||0),1)):b("",!0)])]}),_:2},1024)]),_:2},1024))),128))])):(c(),f("div",Be,[t("div",Le,[o(X,{class:"w-12 h-12 text-muted-foreground"})]),o(y,{class:"text-lg font-medium text-foreground mb-2"},{default:n(()=>e[21]||(e[21]=[u("No responses found")])),_:1}),e[22]||(e[22]=t("p",{class:"text-muted-foreground"},"This attempt has no recorded responses.",-1))]))]),_:1})]),_:1})])])]}),_:1},8,["breadcrumbs"])}const es=mt(wt,[["render",Pe],["__scopeId","data-v-3955c747"]]);export{es as default};
