import{d as K,r as Y,W as Q,l as Z,g as _,o as m,w as a,e as l,b as e,u as t,f as r,a as g,F as b,i as w,t as n,n as tt,k as et,h as T}from"./app-De5aCyOy.js";import{_ as st}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{l as at}from"./lodash-D8CZwZrT.js";import{_ as lt}from"./Pagination.vue_vue_type_script_setup_true_lang-z2bGEaEC.js";import{_ as R}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as j}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as B}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as ot}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as rt}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as it}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as dt}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as z,a as C,b as $,c as k,d as f}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as nt,a as ut,b as S,c as p,d as mt,e as c}from"./TableHeader.vue_vue_type_script_setup_true_lang-CiatGxJJ.js";import{_ as q}from"./index-CNloWqrH.js";import{_ as ft}from"./Progress.vue_vue_type_script_setup_true_lang-XKk6VJsB.js";import{D as _t}from"./download-ziV5naxV.js";import{F as ct}from"./filter-Ihqwk31P.js";import{R as pt}from"./rotate-ccw-D8-XKrTw.js";import{U as vt}from"./user-D0HtPb4E.js";import{F as N}from"./file-text-BOOsEpvl.js";import{T as xt}from"./target-CkYXQ-0W.js";import{T as gt}from"./trophy-B-lSYcu6.js";import{C as ht}from"./calendar-BbiMWXwU.js";import{C as yt}from"./clock-BXDw5ZYb.js";import{C as bt}from"./circle-check-big-BYC-wlwA.js";import{C as wt}from"./circle-x-qrbwyPjC.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";const zt={class:"px-4 sm:px-0 space-y-6"},Ct={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},$t={class:"flex items-center"},kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},St={class:"space-y-2"},qt={class:"space-y-2"},Vt={class:"space-y-2"},At={class:"space-y-2"},Dt={class:"space-y-2"},Ft={class:"flex justify-end mt-4"},Ut={class:"overflow-x-auto"},Pt={class:"flex items-center"},Qt={class:"flex items-center"},Tt={class:"flex items-center"},Rt={class:"flex items-center"},jt={class:"flex items-center"},Bt={class:"flex flex-col items-center"},Nt={class:"space-y-1"},Et={class:"font-medium text-foreground"},Lt={class:"text-xs text-muted-foreground hidden sm:block"},It={class:"text-xs text-muted-foreground sm:hidden"},Ot={class:"space-y-2"},Wt={class:"flex items-center justify-between text-sm"},Mt={class:"font-mono"},Xt={class:"text-sm text-foreground"},Gt={class:"px-4 sm:px-6 py-3 border-t"},Ht={key:1,class:"text-sm text-muted-foreground mt-2"},Le=K({__name:"QuizAttemptsReport",props:{attempts:Object,quizzes:Array,departments:Array,filters:Object},setup(u){var A,D,F,U,P;const v=u,E=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Quiz Attempts",href:route("admin.reports.quiz-attempts")}],d=Y({quiz_id:((A=v.filters)==null?void 0:A.quiz_id)||"",department_id:((D=v.filters)==null?void 0:D.department_id)||"",status:((F=v.filters)==null?void 0:F.status)||"",date_from:((U=v.filters)==null?void 0:U.date_from)||"",date_to:((P=v.filters)==null?void 0:P.date_to)||""}),L=o=>{d.value.quiz_id=o==="all"?"":o},I=o=>{d.value.department_id=o==="all"?"":o},O=o=>{d.value.status=o==="all"?"":o},V=at.debounce(()=>{Q.get(route("admin.reports.quiz-attempts"),d.value,{preserveState:!0,replace:!0})},500);Z(d,()=>{V()},{deep:!0});const W=()=>{d.value={quiz_id:"",department_id:"",status:"",date_from:"",date_to:""},V()},M=()=>{const o=new URLSearchParams(d.value).toString();window.location.href=route("admin.reports.export.quiz-attempts")+"?"+o},X=o=>o?new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”",G=o=>{Q.get(route("admin.reports.quiz-attempts"),{...d.value,page:o},{preserveState:!0,replace:!0,preserveScroll:!0,onSuccess:()=>{var s;(s=document.querySelector(".bg-white.rounded-lg.shadow"))==null||s.scrollIntoView({behavior:"smooth",block:"start"})}})},h=o=>o.completed_at?o.passed?{variant:"default",icon:bt,label:"Passed"}:{variant:"destructive",icon:wt,label:"Failed"}:{variant:"secondary",icon:yt,label:"Pending"},y=o=>!o.quiz_total_points||o.quiz_total_points===0?0:Math.round(o.total_score/o.quiz_total_points*100),H=o=>o>=80?"text-green-600":o>=60?"text-yellow-600":"text-red-600";return(o,s)=>(m(),_(st,{breadcrumbs:E},{default:a(()=>[l("div",zt,[l("div",Ct,[s[3]||(s[3]=l("div",null,[l("h1",{class:"text-xl sm:text-2xl font-bold text-foreground"},"Quiz Attempts Report"),l("p",{class:"text-sm text-muted-foreground mt-1"},"Comprehensive reporting interface for tracking quiz attempts, scores, and performance analytics")],-1)),e(t(R),{onClick:M,class:"w-full sm:w-auto"},{default:a(()=>[e(t(_t),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=r(" Export to CSV "))]),_:1})]),e(t(B),null,{default:a(()=>[e(t(it),null,{default:a(()=>[l("div",$t,[e(t(ct),{class:"mr-2 h-5 w-5 text-primary"}),l("div",null,[e(t(dt),null,{default:a(()=>s[4]||(s[4]=[r("Filter Attempts")])),_:1}),e(t(rt),null,{default:a(()=>s[5]||(s[5]=[r("Use the filters below to narrow down the quiz attempt records")])),_:1})])])]),_:1}),e(t(ot),null,{default:a(()=>[l("div",kt,[l("div",St,[e(t(x),{for:"quiz_filter"},{default:a(()=>s[6]||(s[6]=[r("Quiz")])),_:1}),e(t(z),{"model-value":d.value.quiz_id||"all","onUpdate:modelValue":L},{default:a(()=>[e(t(C),{id:"quiz_filter"},{default:a(()=>[e(t($),{placeholder:"All Quizzes"})]),_:1}),e(t(k),null,{default:a(()=>[e(t(f),{value:"all"},{default:a(()=>s[7]||(s[7]=[r("All Quizzes")])),_:1}),(m(!0),g(b,null,w(u.quizzes,i=>(m(),_(t(f),{key:i.id,value:i.id.toString()},{default:a(()=>[r(n(i.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),l("div",qt,[e(t(x),{for:"department_filter"},{default:a(()=>s[8]||(s[8]=[r("Department")])),_:1}),e(t(z),{"model-value":d.value.department_id||"all","onUpdate:modelValue":I},{default:a(()=>[e(t(C),{id:"department_filter"},{default:a(()=>[e(t($),{placeholder:"All Departments"})]),_:1}),e(t(k),null,{default:a(()=>[e(t(f),{value:"all"},{default:a(()=>s[9]||(s[9]=[r("All Departments")])),_:1}),(m(!0),g(b,null,w(u.departments,i=>(m(),_(t(f),{key:i.id,value:i.id.toString()},{default:a(()=>[r(n(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),l("div",Vt,[e(t(x),{for:"status_filter"},{default:a(()=>s[10]||(s[10]=[r("Status")])),_:1}),e(t(z),{"model-value":d.value.status||"all","onUpdate:modelValue":O},{default:a(()=>[e(t(C),{id:"status_filter"},{default:a(()=>[e(t($),{placeholder:"All Statuses"})]),_:1}),e(t(k),null,{default:a(()=>[e(t(f),{value:"all"},{default:a(()=>s[11]||(s[11]=[r("All Statuses")])),_:1}),e(t(f),{value:"passed"},{default:a(()=>s[12]||(s[12]=[r("Passed")])),_:1}),e(t(f),{value:"failed"},{default:a(()=>s[13]||(s[13]=[r("Failed")])),_:1}),e(t(f),{value:"pending"},{default:a(()=>s[14]||(s[14]=[r("Pending")])),_:1})]),_:1})]),_:1},8,["model-value"])]),l("div",At,[e(t(x),{for:"date_from"},{default:a(()=>s[15]||(s[15]=[r("Date From")])),_:1}),e(t(j),{id:"date_from",type:"date",modelValue:d.value.date_from,"onUpdate:modelValue":s[0]||(s[0]=i=>d.value.date_from=i)},null,8,["modelValue"])]),l("div",Dt,[e(t(x),{for:"date_to"},{default:a(()=>s[16]||(s[16]=[r("Date To")])),_:1}),e(t(j),{id:"date_to",type:"date",modelValue:d.value.date_to,"onUpdate:modelValue":s[1]||(s[1]=i=>d.value.date_to=i)},null,8,["modelValue"])])]),l("div",Ft,[e(t(R),{onClick:W,variant:"outline"},{default:a(()=>[e(t(pt),{class:"mr-2 h-4 w-4"}),s[17]||(s[17]=r(" Reset Filters "))]),_:1})])]),_:1})]),_:1}),e(t(B),null,{default:a(()=>[l("div",Ut,[e(t(nt),null,{default:a(()=>[e(t(ut),null,{default:a(()=>[e(t(S),null,{default:a(()=>[e(t(p),null,{default:a(()=>[l("div",Pt,[e(t(vt),{class:"mr-2 h-4 w-4"}),s[18]||(s[18]=r(" User "))])]),_:1}),e(t(p),{class:"hidden sm:table-cell"},{default:a(()=>[l("div",Qt,[e(t(N),{class:"mr-2 h-4 w-4"}),s[19]||(s[19]=r(" Quiz "))])]),_:1}),e(t(p),{class:"hidden md:table-cell"},{default:a(()=>[l("div",Tt,[e(t(xt),{class:"mr-2 h-4 w-4"}),s[20]||(s[20]=r(" Score "))])]),_:1}),e(t(p),null,{default:a(()=>s[21]||(s[21]=[r("Status")])),_:1}),e(t(p),{class:"hidden md:table-cell"},{default:a(()=>[l("div",Rt,[e(t(gt),{class:"mr-2 h-4 w-4"}),s[22]||(s[22]=r(" Attempt "))])]),_:1}),e(t(p),null,{default:a(()=>[l("div",jt,[e(t(ht),{class:"mr-2 h-4 w-4"}),s[23]||(s[23]=r(" Completed "))])]),_:1})]),_:1})]),_:1}),e(t(mt),null,{default:a(()=>[u.attempts.data.length===0?(m(),_(t(S),{key:0},{default:a(()=>[e(t(c),{colspan:"6",class:"text-center text-muted-foreground py-8"},{default:a(()=>[l("div",Bt,[e(t(N),{class:"h-12 w-12 text-muted-foreground mb-2"}),s[24]||(s[24]=r(" No attempt records found "))])]),_:1})]),_:1})):(m(!0),g(b,{key:1},w(u.attempts.data,(i,J)=>(m(),_(t(S),{key:J,class:"hover:bg-muted/50"},{default:a(()=>[e(t(c),null,{default:a(()=>[l("div",Nt,[l("div",Et,n(i.user_name),1),l("div",Lt,n(i.user_email),1),l("div",It,n(i.quiz_title),1)])]),_:2},1024),e(t(c),{class:"hidden sm:table-cell"},{default:a(()=>[e(t(q),{variant:"outline"},{default:a(()=>[r(n(i.quiz_title),1)]),_:2},1024)]),_:2},1024),e(t(c),{class:"hidden md:table-cell"},{default:a(()=>[l("div",Ot,[l("div",Wt,[l("span",Mt,n(i.total_score)+"/"+n(i.quiz_total_points),1),l("span",{class:tt(["font-semibold",H(y(i))])},n(y(i))+"% ",3)]),e(t(ft),{value:y(i),class:"h-2"},null,8,["value"])])]),_:2},1024),e(t(c),null,{default:a(()=>[e(t(q),{variant:h(i).variant,class:"flex items-center w-fit"},{default:a(()=>[(m(),_(et(h(i).icon),{class:"mr-1 h-3 w-3"})),r(" "+n(h(i).label),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(c),{class:"hidden md:table-cell"},{default:a(()=>[e(t(q),{variant:"secondary",class:"font-mono"},{default:a(()=>[r(" #"+n(i.attempt_number),1)]),_:2},1024)]),_:2},1024),e(t(c),null,{default:a(()=>[l("div",Xt,n(X(i.completed_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",Gt,[u.attempts.data&&u.attempts.data.length>0&&u.attempts.last_page>1?(m(),_(lt,{key:0,links:u.attempts.links,onPageChanged:G,class:"mt-4"},null,8,["links"])):T("",!0),u.attempts.data&&u.attempts.data.length>0?(m(),g("div",Ht," Showing "+n(u.attempts.from)+" to "+n(u.attempts.to)+" of "+n(u.attempts.total)+" results ",1)):T("",!0)])]),_:1})])]),_:1}))}});export{Le as default};
