import{d as Ee,c as h,r as O,C as Pe,l as te,bU as _e,p as Ce,g as b,o as u,w as r,e as s,b as a,u as t,f as _,P as ve,j as Oe,a as v,h as p,F as B,i as q,t as i,n as z}from"./app-De5aCyOy.js";import{_ as Fe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dj8HCjtT.js";import{_ as I}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as je}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as ce}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as E}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as G}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as H}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as se}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as le}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as oe,a as re,b as ne,c as ie,d as M}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{_ as Ne,a as Re}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-DEgpz9bD.js";import{_ as S}from"./index-CNloWqrH.js";import{_ as Ie,a as Me,b as Ae,c as Be}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DykgtCUG.js";import{_ as qe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CQOeOJ-N.js";import{_ as ze}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BoeL_UG-.js";import{_ as Q,a as W}from"./index-Bl7hX8X-.js";import{_ as Ge}from"./Progress.vue_vue_type_script_setup_true_lang-XKk6VJsB.js";import{M as He}from"./monitor-f8CPSh0J.js";import{R as fe}from"./rotate-ccw-D8-XKrTw.js";import{U as Je}from"./user-D0HtPb4E.js";import{L as X}from"./loader-circle-DgBH8UyT.js";import{C as ue}from"./circle-check-big-BYC-wlwA.js";import{T as Ke}from"./target-CkYXQ-0W.js";import{T as pe}from"./trending-up-C922m79C.js";import{A as ge}from"./award-CCJqRf4Z.js";import{S as Qe}from"./send-fhPUJJ3W.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./useForwardExpose-Cyi8rQxf.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./usePrimitiveElement-B41iOtr7.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-9kO_gd9f.js";import"./RovingFocusItem-B6yBawHL.js";import"./VisuallyHiddenInput-CPW02NT0.js";import"./circle-PDixcOb7.js";const We={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8 space-y-8"},Xe={class:"flex items-center justify-between"},Ye={class:"flex items-center gap-3"},Ze={class:"flex gap-2"},et={class:"flex items-center"},tt={class:"shrink-0 mr-4"},st={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-primary/10"},lt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},at={class:"space-y-2"},ot={class:"space-y-2"},rt={class:"relative"},nt={key:0,class:"absolute right-8 top-2.5"},it={key:0,class:"text-xs text-muted-foreground"},ut={key:1,class:"text-xs text-destructive"},dt={key:2,class:"text-sm text-destructive"},mt={class:"space-y-2"},_t={class:"relative"},vt={key:1,class:"ml-2 text-xs text-muted-foreground"},ct={key:0,class:"absolute right-8 top-2.5"},ft={key:0,class:"text-xs text-muted-foreground"},pt={key:1,class:"text-xs text-destructive"},gt={key:2,class:"text-sm text-destructive"},xt={class:"space-y-2"},yt={key:0,class:"text-sm text-destructive"},bt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 text-sm"},ht={key:0},kt={key:1},wt={key:2},$t={key:3},St={key:4},Lt={key:5},Dt={key:6},Ut={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},Vt={class:"flex items-center"},Tt={class:"text-yellow-800 text-sm"},Et={key:0,class:"space-y-6"},Pt={class:"flex items-center justify-between"},Ct={class:"grid gap-6"},Ot={class:"flex items-start justify-between"},Ft={class:"flex-1"},jt={class:"flex items-center space-x-3 mb-2"},Nt={key:0,class:"text-right"},Rt={class:"text-2xl font-bold text-foreground"},It={class:"text-xs text-muted-foreground"},Mt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},At={class:"space-y-4"},Bt={class:"flex-1 flex items-center justify-between"},qt={class:"text-sm text-muted-foreground"},zt={key:0,class:"text-sm text-destructive"},Gt={key:0,class:"space-y-4"},Ht={class:"space-y-3"},Jt={class:"flex items-center justify-between"},Kt={class:"flex items-center justify-between"},Qt={class:"text-sm font-bold"},Wt={class:"mt-6 space-y-2"},Xt={key:0,class:"text-sm text-destructive"},Yt={class:"flex items-center"},Zt={class:"shrink-0 mr-4"},es={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-green-100"},ts={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},ss={class:"flex items-center"},ls={class:"flex items-center"},as={key:1,class:"text-xl font-bold text-gray-600"},os={class:"grid grid-cols-2 gap-4 text-sm text-blue-700"},rs={class:"col-span-2"},ns={class:"space-y-2"},is={key:0,class:"text-sm text-destructive"},us={key:2,class:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4"},ds={key:2},ms={key:3},_s={class:"flex items-start"},vs={class:"shrink-0 mr-4"},cs={class:"flex items-center justify-center h-12 w-12 rounded-full bg-green-100"},fs={class:"flex-1"},ps={class:"font-semibold"},gs={class:"grid grid-cols-2 gap-4 text-sm"},xs={class:"font-medium"},ys={class:"font-medium"},bs={class:"font-medium"},hs={class:"font-medium"},ks={class:"font-medium"},ws={key:0},$s={class:"font-medium"},Ss={key:1},Ls={key:2},$l=Ee({__name:"OnlineCourseEvaluation",props:{users:{},categories:{},departments:{},courses:{},incentives:{},performanceLevels:{},userLevels:{}},setup(xe){const V=xe,J=h(()=>V.users||[]),k=h(()=>V.categories||[]),ye=h(()=>V.departments||[]),A=h(()=>V.courses||[]),F=h(()=>V.incentives||[]);h(()=>V.userLevels||[]);const Y=h(()=>V.performanceLevels||[]),j=O(!1),Z=O(!1),L=O(J.value),D=O(A.value),P=O(!1),C=O(!1),U=O(!0),n=Pe({user_id:null,course_online_id:null,department_id:null,evaluation_date:new Date().toISOString().split("T")[0],notes:"",categories:[]}),ee=()=>{n.categories=k.value.map(o=>({category_id:o.id,evaluation_type_id:null,comments:""}))};te(()=>V.categories,()=>{ee()},{immediate:!0});const be=o=>{U.value&&(n.department_id=o==="none"?null:parseInt(o))},he=o=>{U.value&&(n.user_id=o==="none"?null:parseInt(o))},ke=o=>{U.value&&(n.course_online_id=o==="none"?null:parseInt(o))};te(()=>n.department_id,async o=>{if(U.value){if(o){P.value=!0;try{const e=route("admin.evaluations.online.users-by-department"),l={department_id:o},m=await _e.get(e,{params:l});L.value=m.data.users||[]}catch(e){console.error("Error fetching users by department:",e),L.value=[]}finally{P.value=!1}}else L.value=J.value;n.user_id=null,n.course_online_id=null,D.value=A.value}}),te(()=>n.user_id,async o=>{if(U.value){if(o){C.value=!0;try{const e=route("admin.evaluations.online.user-courses"),l={user_id:o},m=await _e.get(e,{params:l});D.value=m.data.courses||[]}catch(e){console.error("Error fetching user online courses:",e);const l=L.value.find(m=>m.id===o);D.value=(l==null?void 0:l.completed_courses)||[]}finally{C.value=!1}}else D.value=A.value;n.course_online_id=null}});const g=h(()=>n.user_id&&L.value.find(o=>o.id===n.user_id)||null),w=h(()=>n.course_online_id&&D.value.find(o=>o.id===n.course_online_id)||null),T=(o,e)=>{if(!e)return null;const l=k.value.find(m=>m.id===o);return l&&l.types.find(m=>m.id===e)||null},c=h(()=>n.categories.reduce((o,e)=>{const l=T(e.category_id,e.evaluation_type_id);return o+((l==null?void 0:l.score_value)||0)},0)),x=h(()=>{if(!c.value||c.value===0)return null;const o=N(c.value);if(Y.value.length>0){const e=Y.value.find(l=>l.level===o);if(e)return e}if(o){let e,l,m,y,d,f;switch(o){case 1:e="Outstanding",l="green",m="badge-success",y=13,d=15,f="Consistently exceeds expectations";break;case 2:e="Reliable",l="blue",m="badge-info",y=10,d=12,f="Meets expectations consistently";break;case 3:e="Developing",l="yellow",m="badge-warning",y=7,d=9,f="Meets some expectations, needs improvement";break;case 4:e="Underperforming",l="red",m="badge-danger",y=0,d=6,f="Does not meet expectations";break}return{level:o,label:e,color:l,badge_class:m,min_score:y,max_score:d,description:f}}return null});h(()=>{if(c.value===0||!g.value)return 0;const o=g.value;if(o.user_level&&o.user_level_tier){const l=F.value.find(m=>m.user_level_id===o.user_level.id&&m.user_level_tier_id===o.user_level_tier.id&&c.value>=m.min_score&&c.value<=m.max_score);if(l)return parseFloat(l.incentive_amount.toString())}if(o.user_level){const l=F.value.find(m=>m.user_level_id===o.user_level.id&&!m.user_level_tier_id&&c.value>=m.min_score&&c.value<=m.max_score);if(l)return parseFloat(l.incentive_amount.toString())}const e=F.value.find(l=>!l.user_level_id&&!l.user_level_tier_id&&c.value>=l.min_score&&c.value<=l.max_score);return e?parseFloat(e.incentive_amount.toString()):0}),h(()=>{if(c.value===0||!g.value)return null;const o=g.value;let e=null;return o.user_level&&o.user_level_tier&&(e=F.value.find(l=>l.user_level_id===o.user_level.id&&l.user_level_tier_id===o.user_level_tier.id&&c.value>=l.min_score&&c.value<=l.max_score)),!e&&o.user_level&&(e=F.value.find(l=>l.user_level_id===o.user_level.id&&!l.user_level_tier_id&&c.value>=l.min_score&&c.value<=l.max_score)),e||(e=F.value.find(l=>!l.user_level_id&&!l.user_level_tier_id&&c.value>=l.min_score&&c.value<=l.max_score)),e?{range:`${e.min_score}-${e.max_score}`,amount:parseFloat(e.incentive_amount.toString()),tier:we(e),level_info:e.user_level?e.user_level.name:"Global",tier_info:e.user_level_tier?e.user_level_tier.tier_name:null}:null});const we=(o,e)=>o.user_level&&o.user_level_tier?`${o.user_level.code} - ${o.user_level_tier.tier_name}`:o.user_level?`${o.user_level.name} Level`:"Global Tier",N=o=>o>=13&&o<=15?1:o>=10&&o<=12?2:o>=7&&o<=9?3:o<7?4:null,$e=o=>{const e=N(o),l=Y.value.find(m=>m.level===e);return l?{label:l.label,variant:l.badge_class.replace("badge-","")||"default",color:l.color}:o>=13?{label:"Outstanding",variant:"success",color:"green"}:o>=10?{label:"Reliable",variant:"info",color:"blue"}:o>=7?{label:"Developing",variant:"warning",color:"yellow"}:o<7?{label:"Underperforming",variant:"destructive",color:"red"}:{label:"No Score",variant:"secondary",color:"gray"}},Se=(o,e)=>{const l=o/e*100;return l>=90?"default":l>=80?"secondary":l>=70?"outline":l>=60?"secondary":"destructive"},Le=(o,e)=>{if(!U.value)return;const l=n.categories.findIndex(m=>m.category_id===o);l!==-1&&(n.categories[l].evaluation_type_id=parseInt(e),de())},de=()=>{Z.value=!!(n.user_id&&n.course_online_id&&n.evaluation_date&&n.categories.length>0&&n.categories.every(o=>o.evaluation_type_id!==null))};function De(){de(),Z.value&&(j.value=!0)}function Ue(){U.value&&n.post(route("admin.evaluations.online.store"),{onSuccess:()=>{j.value=!1,n.reset(),L.value=J.value,D.value=A.value,ee()},onError:o=>{j.value=!1,console.error("Validation errors:",o)}})}function Ve(){U.value&&(n.reset(),L.value=J.value,D.value=A.value,ee())}const Te=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"Online Course Evaluation",href:null}];return Ce(()=>{U.value=!1}),(o,e)=>(u(),b(Fe,{breadcrumbs:Te},{default:r(()=>[s("div",We,[s("div",null,[s("div",Xe,[s("div",null,[s("div",Ye,[e[5]||(e[5]=s("h1",{class:"text-3xl font-bold text-foreground"},"Online Course Evaluation",-1)),a(t(S),{variant:"secondary",class:"text-xs"},{default:r(()=>[a(t(He),{class:"mr-1 h-3 w-3"}),e[4]||(e[4]=_(" Online Courses "))]),_:1})]),e[6]||(e[6]=s("p",{class:"mt-2 text-sm text-muted-foreground"},"Assess employee performance on online courses with Level + Tier based incentive calculations.",-1))]),s("div",Ze,[a(t(I),{as:t(ve),href:o.route("admin.evaluations.user-evaluation"),variant:"outline"},{default:r(()=>e[7]||(e[7]=[_(" Regular Courses ")])),_:1},8,["as","href"]),a(t(I),{as:t(ve),href:o.route("admin.evaluations.index"),variant:"outline"},{default:r(()=>[a(t(fe),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=_(" Back "))]),_:1},8,["as","href"])])])]),s("form",{onSubmit:Oe(De,["prevent"]),class:"space-y-8"},[a(t(G),null,{default:r(()=>[a(t(le),null,{default:r(()=>[s("div",et,[s("div",tt,[s("div",st,[a(t(Je),{class:"h-6 w-6 text-primary"})])]),s("div",null,[a(t(ae),null,{default:r(()=>e[9]||(e[9]=[_("Select Department, Employee & Online Course")])),_:1}),a(t(se),null,{default:r(()=>e[10]||(e[10]=[_("Choose department first, then employee, and finally their assigned online course")])),_:1})])])]),_:1}),a(t(H),null,{default:r(()=>{var l,m,y;return[s("div",lt,[s("div",at,[a(t(E),{for:"department"},{default:r(()=>e[11]||(e[11]=[_("Select Department")])),_:1}),a(t(oe),{"model-value":((l=t(n).department_id)==null?void 0:l.toString())||"none","onUpdate:modelValue":be,disabled:t(n).processing},{default:r(()=>[a(t(re),{id:"department"},{default:r(()=>[a(t(ne),{placeholder:"All Departments"})]),_:1}),a(t(ie),null,{default:r(()=>[a(t(M),{value:"none"},{default:r(()=>e[12]||(e[12]=[_("All Departments")])),_:1}),(u(!0),v(B,null,q(ye.value,d=>(u(),b(t(M),{key:d.id,value:d.id.toString()},{default:r(()=>[_(i(d.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),e[13]||(e[13]=s("p",{class:"text-xs text-muted-foreground"},"Filter employees by department",-1))]),s("div",ot,[a(t(E),{for:"user"},{default:r(()=>e[14]||(e[14]=[_("Select Employee *")])),_:1}),s("div",rt,[a(t(oe),{"model-value":((m=t(n).user_id)==null?void 0:m.toString())||"none","onUpdate:modelValue":he,disabled:t(n).processing||P.value},{default:r(()=>[a(t(re),{id:"user"},{default:r(()=>[a(t(ne),{placeholder:P.value?"Loading users...":"Choose an employee..."},null,8,["placeholder"])]),_:1}),a(t(ie),null,{default:r(()=>[a(t(M),{value:"none"},{default:r(()=>[_(i(P.value?"Loading users...":"Choose an employee..."),1)]),_:1}),(u(!0),v(B,null,q(L.value,d=>(u(),b(t(M),{key:d.id,value:d.id.toString()},{default:r(()=>[_(i(d.name)+" "+i(d.department?`(${d.department.name})`:""),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),P.value?(u(),v("div",nt,[a(t(X),{class:"h-4 w-4 animate-spin text-primary"})])):p("",!0)]),t(n).department_id?L.value.length===0&&!P.value?(u(),v("p",ut,"No employees found in this department")):p("",!0):(u(),v("p",it,"Showing all employees")),t(n).errors.user_id?(u(),v("span",dt,i(t(n).errors.user_id),1)):p("",!0)]),s("div",mt,[a(t(E),{for:"course"},{default:r(()=>e[15]||(e[15]=[_("Select Assigned Online Course *")])),_:1}),s("div",_t,[a(t(oe),{"model-value":((y=t(n).course_online_id)==null?void 0:y.toString())||"none","onUpdate:modelValue":ke,disabled:t(n).processing||!t(n).user_id||C.value},{default:r(()=>[a(t(re),{id:"course"},{default:r(()=>[a(t(ne),{placeholder:t(n).user_id?C.value?"Loading courses...":"Choose an assigned online course...":"Select employee first..."},null,8,["placeholder"])]),_:1}),a(t(ie),null,{default:r(()=>[a(t(M),{value:"none"},{default:r(()=>[_(i(t(n).user_id?C.value?"Loading courses...":"Choose an assigned online course...":"Select employee first..."),1)]),_:1}),(u(!0),v(B,null,q(D.value,d=>(u(),b(t(M),{key:d.id,value:d.id.toString()},{default:r(()=>[_(i(d.title)+" ",1),d.status?(u(),b(t(S),{key:0,variant:d.status==="completed"?"default":"secondary",class:"ml-2 text-xs"},{default:r(()=>[_(i(d.status),1)]),_:2},1032,["variant"])):p("",!0),d.progress!==void 0?(u(),v("span",vt," ("+i(Math.round(d.progress))+"%) ",1)):p("",!0)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),C.value?(u(),v("div",ct,[a(t(X),{class:"h-4 w-4 animate-spin text-primary"})])):p("",!0)]),t(n).user_id?D.value.length===0&&!C.value?(u(),v("p",pt,"This employee has no assigned online courses yet")):p("",!0):(u(),v("p",ft,"Select an employee to see their assigned online courses")),t(n).errors.course_online_id?(u(),v("span",gt,i(t(n).errors.course_online_id),1)):p("",!0)]),s("div",xt,[a(t(E),{for:"date"},{default:r(()=>e[16]||(e[16]=[_("Evaluation Date *")])),_:1}),a(t(je),{id:"date",type:"date",modelValue:t(n).evaluation_date,"onUpdate:modelValue":e[0]||(e[0]=d=>t(n).evaluation_date=d),disabled:t(n).processing,required:""},null,8,["modelValue","disabled"]),t(n).errors.evaluation_date?(u(),v("span",yt,i(t(n).errors.evaluation_date),1)):p("",!0)])]),g.value&&w.value?(u(),b(t(Q),{key:0,class:"mt-6"},{default:r(()=>[a(t(ue),{class:"h-4 w-4"}),a(t(W),null,{default:r(()=>[s("div",bt,[s("div",null,[e[17]||(e[17]=s("span",{class:"font-medium"},"Employee:",-1)),s("p",null,i(g.value.name),1)]),s("div",null,[e[18]||(e[18]=s("span",{class:"font-medium"},"Online Course:",-1)),s("p",null,i(w.value.title),1)]),w.value.status?(u(),v("div",ht,[e[19]||(e[19]=s("span",{class:"font-medium"},"Status:",-1)),s("p",null,[a(t(S),{variant:w.value.status==="completed"?"default":"secondary",class:"text-xs"},{default:r(()=>[_(i(w.value.status),1)]),_:1},8,["variant"])])])):p("",!0),w.value.progress!==void 0?(u(),v("div",kt,[e[20]||(e[20]=s("span",{class:"font-medium"},"Progress:",-1)),s("p",null,i(Math.round(w.value.progress))+"%",1)])):p("",!0),w.value.assigned_at?(u(),v("div",wt,[e[21]||(e[21]=s("span",{class:"font-medium"},"Assigned:",-1)),s("p",null,i(new Date(w.value.assigned_at).toLocaleDateString()),1)])):p("",!0),w.value.completed_at?(u(),v("div",$t,[e[22]||(e[22]=s("span",{class:"font-medium"},"Completed:",-1)),s("p",null,i(new Date(w.value.completed_at).toLocaleDateString()),1)])):p("",!0),g.value.department?(u(),v("div",St,[e[23]||(e[23]=s("span",{class:"font-medium"},"Department:",-1)),s("p",null,i(g.value.department.name),1)])):p("",!0),g.value.user_level?(u(),v("div",Lt,[e[24]||(e[24]=s("span",{class:"font-medium"},"Level:",-1)),s("p",null,[a(t(S),{variant:"secondary",class:"text-xs"},{default:r(()=>[_(i(g.value.user_level.code)+" - "+i(g.value.user_level.name),1)]),_:1})])])):p("",!0),g.value.user_level_tier?(u(),v("div",Dt,[e[25]||(e[25]=s("span",{class:"font-medium"},"Tier:",-1)),s("p",null,[a(t(S),{variant:"outline",class:"text-xs"},{default:r(()=>[_(i(g.value.user_level_tier.tier_name)+" (T"+i(g.value.user_level_tier.tier_order)+") ",1)]),_:1})])])):p("",!0)]),!g.value.user_level||!g.value.user_level_tier?(u(),v("div",Ut,[s("div",Vt,[a(t(Ke),{class:"h-4 w-4 text-yellow-600 mr-2"}),s("div",Tt,[e[26]||(e[26]=s("p",{class:"font-medium"},"Incomplete Assignment",-1)),s("p",null," This employee is missing "+i(g.value.user_level?"":"level assignment")+" "+i(!g.value.user_level&&!g.value.user_level_tier?" and ":"")+" "+i(g.value.user_level_tier?"":"tier assignment")+". Performance level calculation may fall back to default values. ",1)])])])):p("",!0)]),_:1})]),_:1})):p("",!0)]}),_:1})]),_:1}),t(n).user_id&&t(n).course_online_id&&k.value.length>0?(u(),v("div",Et,[s("div",Pt,[e[27]||(e[27]=s("h2",{class:"text-xl font-semibold text-foreground"},"Evaluation Categories",-1)),a(t(S),{variant:"secondary"},{default:r(()=>[_(i(k.value.length)+" categories",1)]),_:1})]),s("div",Ct,[(u(!0),v(B,null,q(t(n).categories,(l,m)=>(u(),b(t(G),{key:l.category_id,class:"hover:shadow-md transition-shadow duration-200"},{default:r(()=>[a(t(le),null,{default:r(()=>{var y,d;return[s("div",Ot,[s("div",Ft,[s("div",jt,[a(t(ae),{class:"text-lg"},{default:r(()=>{var f;return[_(i(((f=k.value.find($=>$.id===l.category_id))==null?void 0:f.name)||"Category"),1)]}),_:2},1024),a(t(S),{variant:"outline"},{default:r(()=>{var f;return[_(i(((f=k.value.find($=>$.id===l.category_id))==null?void 0:f.weight)||0)+"% weight ",1)]}),_:2},1024)]),a(t(se),null,{default:r(()=>{var f;return[_(i(((f=k.value.find($=>$.id===l.category_id))==null?void 0:f.description)||"No description available"),1)]}),_:2},1024)]),T(l.category_id,l.evaluation_type_id)?(u(),v("div",Nt,[s("div",Rt,i((y=T(l.category_id,l.evaluation_type_id))==null?void 0:y.score_value),1),s("div",It," out of "+i((d=k.value.find(f=>f.id===l.category_id))==null?void 0:d.max_score),1)])):p("",!0)])]}),_:2},1024),a(t(H),null,{default:r(()=>{var y;return[s("div",Mt,[s("div",At,[a(t(E),{class:"text-sm font-medium"},{default:r(()=>e[28]||(e[28]=[_("Select Performance Level")])),_:1}),a(t(Ne),{"model-value":((y=l.evaluation_type_id)==null?void 0:y.toString())||"","onUpdate:modelValue":d=>Le(l.category_id,d),class:"space-y-2"},{default:r(()=>{var d;return[(u(!0),v(B,null,q(((d=k.value.find(f=>f.id===l.category_id))==null?void 0:d.types)||[],f=>{var $;return u(),v("div",{key:f.id,class:z(["flex items-center space-x-3 p-4 border rounded-lg hover:bg-accent/50 transition-colors",{"border-primary bg-primary/5":l.evaluation_type_id===f.id}])},[a(t(Re),{value:f.id.toString(),id:`type_${l.category_id}_${f.id}`},null,8,["value","id"]),s("div",Bt,[s("div",null,[a(t(E),{for:`type_${l.category_id}_${f.id}`,class:"font-medium cursor-pointer"},{default:r(()=>[_(i(f.type_name),1)]),_:2},1032,["for"]),s("p",qt,i(f.description),1)]),a(t(S),{variant:Se(f.score_value,(($=k.value.find(K=>K.id===l.category_id))==null?void 0:$.max_score)||100)},{default:r(()=>[_(i(f.score_value)+" pts ",1)]),_:2},1032,["variant"])])],2)}),128))]}),_:2},1032,["model-value","onUpdate:modelValue"]),t(n).errors[`categories.${m}.evaluation_type_id`]?(u(),v("span",zt,i(t(n).errors[`categories.${m}.evaluation_type_id`]),1)):p("",!0)]),T(l.category_id,l.evaluation_type_id)?(u(),v("div",Gt,[a(t(Q),null,{default:r(()=>[a(t(pe),{class:"h-4 w-4"}),a(t(W),null,{default:r(()=>{var d,f,$,K,me;return[e[31]||(e[31]=s("h4",{class:"font-medium mb-3"},"Selected Performance Level",-1)),s("div",Ht,[s("div",Jt,[e[29]||(e[29]=s("span",{class:"text-sm font-medium"},"Performance:",-1)),a(t(S),{variant:$e(((d=T(l.category_id,l.evaluation_type_id))==null?void 0:d.score_value)||0).variant},{default:r(()=>{var R;return[_(i((R=T(l.category_id,l.evaluation_type_id))==null?void 0:R.type_name),1)]}),_:2},1032,["variant"])]),s("div",Kt,[e[30]||(e[30]=s("span",{class:"text-sm font-medium"},"Score:",-1)),s("span",Qt,i((f=T(l.category_id,l.evaluation_type_id))==null?void 0:f.score_value)+" / "+i(($=k.value.find(R=>R.id===l.category_id))==null?void 0:$.max_score),1)]),a(t(Ge),{value:Math.round((((K=T(l.category_id,l.evaluation_type_id))==null?void 0:K.score_value)||0)/(((me=k.value.find(R=>R.id===l.category_id))==null?void 0:me.max_score)||100)*100),class:"h-2"},null,8,["value"])])]}),_:2},1024)]),_:2},1024)])):p("",!0)]),s("div",Wt,[a(t(E),{for:`comments_${l.category_id}`},{default:r(()=>e[32]||(e[32]=[_("Detailed Comments & Feedback")])),_:2},1032,["for"]),a(t(ce),{id:`comments_${l.category_id}`,modelValue:l.comments,"onUpdate:modelValue":d=>l.comments=d,rows:"3",disabled:t(n).processing,placeholder:"Provide specific feedback, strengths, areas for improvement, and recommendations..."},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),t(n).errors[`categories.${m}.comments`]?(u(),v("span",Xt,i(t(n).errors[`categories.${m}.comments`]),1)):p("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):p("",!0),t(n).user_id&&t(n).course_online_id&&t(n).categories.some(l=>l.evaluation_type_id!==null)?(u(),b(t(G),{key:1},{default:r(()=>[a(t(le),null,{default:r(()=>[s("div",Yt,[s("div",Zt,[s("div",es,[a(t(ue),{class:"h-6 w-6 text-green-600"})])]),s("div",null,[a(t(ae),null,{default:r(()=>e[33]||(e[33]=[_("Overall Assessment")])),_:1}),a(t(se),null,{default:r(()=>e[34]||(e[34]=[_("Summary with Level + Tier based incentive calculation")])),_:1})])])]),_:1}),a(t(H),null,{default:r(()=>[s("div",ts,[a(t(G),{class:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"},{default:r(()=>[a(t(H),{class:"p-4"},{default:r(()=>[s("div",ss,[a(t(pe),{class:"h-8 w-8 text-blue-600 mr-4"}),s("div",null,[e[35]||(e[35]=s("p",{class:"text-sm font-medium text-blue-900"},"Total Score",-1)),s("p",{class:z(["text-2xl font-bold",{"text-emerald-600":c.value>=13,"text-green-600":c.value>=10&&c.value<13,"text-blue-600":c.value>=7&&c.value<10,"text-yellow-600":c.value>=4&&c.value<7,"text-red-600":c.value<4}])},i(c.value),3)])])]),_:1})]),_:1}),a(t(G),{class:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200"},{default:r(()=>[a(t(H),{class:"p-4"},{default:r(()=>[s("div",ls,[a(t(ge),{class:"h-8 w-8 text-green-600 mr-4"}),s("div",null,[e[36]||(e[36]=s("p",{class:"text-sm font-medium text-green-900"},"Performance Level",-1)),x.value?(u(),v("p",{key:0,class:z(["text-xl font-bold",`text-${x.value.color}-600`])},i(x.value.label),3)):(u(),v("p",as," Not Rated "))])])]),_:1})]),_:1})]),x.value?(u(),b(t(Q),{key:0,class:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"},{default:r(()=>[a(t(ge),{class:"h-4 w-4"}),a(t(W),null,{default:r(()=>[e[40]||(e[40]=s("h4",{class:"font-semibold text-blue-900 mb-2"},"Performance Level Details",-1)),s("div",os,[s("div",null,[e[37]||(e[37]=s("span",{class:"font-medium"},"Level:",-1)),s("p",{class:z(["font-bold",`text-${x.value.color}-600`])},i(x.value.label),3)]),s("div",null,[e[38]||(e[38]=s("span",{class:"font-medium"},"Score Range:",-1)),s("p",null,i(x.value.min_score)+"-"+i(x.value.max_score)+" points",1)]),s("div",rs,[e[39]||(e[39]=s("span",{class:"font-medium"},"Description:",-1)),s("p",null,i(x.value.description),1)])])]),_:1})]),_:1})):p("",!0),s("div",ns,[a(t(E),{for:"notes"},{default:r(()=>e[41]||(e[41]=[_("Overall Notes & Recommendations")])),_:1}),a(t(ce),{id:"notes",modelValue:t(n).notes,"onUpdate:modelValue":e[1]||(e[1]=l=>t(n).notes=l),rows:"4",disabled:t(n).processing,placeholder:"Provide overall assessment, key achievements, development areas, goals for improvement, and recommendations for career development..."},null,8,["modelValue","disabled"]),t(n).errors.notes?(u(),v("span",is,i(t(n).errors.notes),1)):p("",!0)])]),_:1})]),_:1})):p("",!0),t(n).user_id&&t(n).course_online_id?(u(),v("div",us,[a(t(I),{type:"button",onClick:Ve,variant:"outline",disabled:t(n).processing},{default:r(()=>[a(t(fe),{class:"mr-2 h-4 w-4"}),e[42]||(e[42]=_(" Reset Form "))]),_:1},8,["disabled"]),a(t(I),{type:"submit",disabled:t(n).processing||!Z.value||c.value===0},{default:r(()=>[t(n).processing?(u(),b(t(X),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(u(),b(t(Qe),{key:1,class:"mr-2 h-4 w-4"})),t(n).processing?(u(),v("span",ds,"Submitting Evaluation...")):(u(),v("span",ms,"Submit Evaluation"))]),_:1},8,["disabled"])])):p("",!0)],32)]),a(t(Ie),{open:j.value,"onUpdate:open":e[3]||(e[3]=l=>j.value=l)},{default:r(()=>[a(t(Me),{class:"sm:max-w-lg"},{default:r(()=>[a(t(Ae),null,{default:r(()=>[s("div",_s,[s("div",vs,[s("div",cs,[a(t(ue),{class:"h-6 w-6 text-green-600"})])]),s("div",fs,[a(t(Be),null,{default:r(()=>e[43]||(e[43]=[_("Confirm Online Course Evaluation")])),_:1}),a(t(qe),null,{default:r(()=>{var l;return[e[44]||(e[44]=_(" Please review the evaluation details before submitting. This action will record the online course performance evaluation for ")),s("span",ps,i((l=g.value)==null?void 0:l.name),1),e[45]||(e[45]=_(". "))]}),_:1})])])]),_:1}),a(t(Q),{class:"my-4"},{default:r(()=>[a(t(W),null,{default:r(()=>{var l,m,y,d;return[e[53]||(e[53]=s("h4",{class:"font-medium mb-2"},"Evaluation Summary",-1)),s("div",gs,[s("div",null,[e[46]||(e[46]=s("span",{class:"text-muted-foreground"},"Employee:",-1)),s("p",xs,i((l=g.value)==null?void 0:l.name),1)]),s("div",null,[e[47]||(e[47]=s("span",{class:"text-muted-foreground"},"Online Course:",-1)),s("p",ys,i((m=w.value)==null?void 0:m.title),1)]),s("div",null,[e[48]||(e[48]=s("span",{class:"text-muted-foreground"},"Date:",-1)),s("p",bs,i(t(n).evaluation_date),1)]),s("div",null,[e[49]||(e[49]=s("span",{class:"text-muted-foreground"},"Total Score:",-1)),s("p",hs,i(c.value),1)]),s("div",null,[e[51]||(e[51]=s("span",{class:"text-muted-foreground"},"Performance Level:",-1)),s("p",ks,[c.value>0?(u(),b(t(S),{key:0,class:z(`bg-${x.value?x.value.color:"green"}-100 text-${x.value?x.value.color:"green"}-800 border-${x.value?x.value.color:"green"}-200`)},{default:r(()=>[_(i(x.value?x.value.label:N(c.value)===1?"Outstanding":N(c.value)===2?"Reliable":N(c.value)===3?"Developing":N(c.value)===4?"Underperforming":"Not Rated"),1)]),_:1},8,["class"])):(u(),b(t(S),{key:1,variant:"secondary"},{default:r(()=>e[50]||(e[50]=[_(" Not Rated ")])),_:1}))])]),(y=g.value)!=null&&y.user_level&&((d=g.value)!=null&&d.user_level_tier)?(u(),v("div",ws,[e[52]||(e[52]=s("span",{class:"text-muted-foreground"},"Level + Tier:",-1)),s("p",$s,i(g.value.user_level.code)+" - "+i(g.value.user_level_tier.tier_name),1)])):p("",!0)])]}),_:1})]),_:1}),a(t(ze),null,{default:r(()=>[a(t(I),{onClick:e[2]||(e[2]=l=>j.value=!1),variant:"outline"},{default:r(()=>e[54]||(e[54]=[_(" Cancel ")])),_:1}),a(t(I),{onClick:Ue,disabled:t(n).processing},{default:r(()=>[t(n).processing?(u(),b(t(X),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):p("",!0),t(n).processing?(u(),v("span",Ss,"Submitting...")):(u(),v("span",Ls,"Confirm & Submit"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{$l as default};
