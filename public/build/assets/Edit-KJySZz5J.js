import{d as Z,C as I,c as P,a as c,o as u,b as s,u as e,m as ee,w as i,e as d,P as E,f as r,t as _,j as te,h as w,F as x,i as $,g as b}from"./app-De5aCyOy.js";import{f as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrTEAkGA.js";import{_ as g}from"./Button.vue_vue_type_script_setup_true_lang-C1ptny9S.js";import{_ as z}from"./Card.vue_vue_type_script_setup_true_lang-D592-r3Y.js";import{_ as C}from"./CardContent.vue_vue_type_script_setup_true_lang-BnfRKYb9.js";import{_ as le}from"./CardDescription.vue_vue_type_script_setup_true_lang-7y99tksC.js";import{_ as U}from"./CardHeader.vue_vue_type_script_setup_true_lang-B9pSfhlq.js";import{_ as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3o6pLjC.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-XEyr05A5.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-BhPM2rb2.js";import{_ as Q}from"./Textarea.vue_vue_type_script_setup_true_lang-B6XbqApa.js";import{_ as M}from"./index-CNloWqrH.js";import{_ as ie}from"./Switch.vue_vue_type_script_setup_true_lang-Cp6QCENU.js";import{_ as O,a as T,b as A,c as S,d as y}from"./SelectValue.vue_vue_type_script_setup_true_lang-D84q5NJt.js";import{A as oe}from"./arrow-left-kG5YrchA.js";import{T as re}from"./target-CkYXQ-0W.js";import{C as de}from"./circle-help-BeDrtfy1.js";import{P as D}from"./plus-BEctqVRE.js";import{T as j}from"./trash-2-cH28u5cA.js";import{S as ne}from"./save-Cj1WR6gV.js";import{R as ae}from"./refresh-cw-BJXsbrVc.js";import"./index-D3npKzxP.js";import"./index-shR_F4Lk.js";import"./_plugin-vue_export-helper-DsuA5ZjC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UOeKMcHs.js";import"./clock-BXDw5ZYb.js";import"./useForwardPropsEmits-Cp6q3zLn.js";import"./useForwardExpose-Cyi8rQxf.js";import"./VisuallyHidden-9kO_gd9f.js";import"./VisuallyHiddenInput-CPW02NT0.js";import"./usePrimitiveElement-B41iOtr7.js";import"./Presence-DbAr2sRl.js";import"./ConfigProvider-B6_1veax.js";import"./Teleport-swefm16Y.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-CPyPlHCY.js";import"./Collection-BDp_B7Ge.js";import"./check-DTkWFW74.js";import"./useSize-CHi05SbU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";const ue={class:"max-w-5xl mx-auto space-y-6 pb-12"},me={class:"flex items-center gap-4"},pe={class:"text-muted-foreground"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_e={class:"md:col-span-2"},ce={key:0,class:"text-sm text-destructive mt-1"},be={class:"md:col-span-2"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ve={class:"text-xs text-muted-foreground mt-1"},ye={class:"flex items-center gap-3 pt-4 border-t"},we={class:"flex items-center justify-between"},Ve={class:"flex items-start justify-between gap-4"},xe={class:"flex items-center gap-2"},he={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ke={class:"md:col-span-3"},$e={class:"space-y-4"},ze={key:0},Ce={key:0,class:"space-y-3"},Ue={class:"flex items-center justify-between"},qe=["type","name","checked","onChange","disabled"],Qe={key:1,class:"bg-blue-50 dark:bg-blue-950 p-3 rounded-lg"},Me={class:"flex items-center justify-end gap-3"},yt=Z({__name:"Edit",props:{quiz:{},module:{},course:{},showCorrectAnswersOptions:{}},setup(B){const m=B,N=[{title:"Course Online",href:"/admin/course-online"},{title:m.course.name,href:`/admin/course-online/${m.course.id}`},{title:`Module ${m.module.order_number}`,href:"#"},{title:"Edit Quiz",href:"#"}],l=I({title:m.quiz.title,description:m.quiz.description||"",status:m.quiz.status,pass_threshold:m.quiz.pass_threshold,required_to_proceed:m.quiz.required_to_proceed,max_attempts:m.quiz.max_attempts,retry_delay_hours:m.quiz.retry_delay_hours,show_correct_answers:m.quiz.show_correct_answers,time_limit_minutes:m.quiz.time_limit_minutes,questions:m.quiz.questions.map(n=>({id:n.id,question_text:n.question_text,type:n.type,points:n.points||0,options:n.options||["",""],correct_answer:n.correct_answer||[],correct_answer_explanation:n.correct_answer_explanation||""}))}),h=P(()=>l.questions.filter(n=>n.type!=="text").reduce((n,t)=>n+(t.points||0),0)),R=P(()=>Math.ceil(l.pass_threshold/100*h.value));function F(){return{question_text:"",type:"radio",points:1,options:["",""],correct_answer:[],correct_answer_explanation:""}}function L(){l.questions.length<50&&l.questions.push(F())}function H(n){l.questions.length>1&&l.questions.splice(n,1)}function G(n){l.questions[n].options.length<10&&l.questions[n].options.push("")}function J(n,t){const o=l.questions[n];if(o.options.length>2){const p=o.options[t];o.options.splice(t,1);const a=o.correct_answer.indexOf(p);a>-1&&o.correct_answer.splice(a,1)}}function K(n){const t=l.questions[n];t.type==="text"?(t.options=[],t.correct_answer=[],t.points=0):(t.options.length<2&&(t.options=["",""]),t.correct_answer=[],t.points===0&&(t.points=1))}function W(n,t){const o=l.questions[n];if(o.type==="radio")o.correct_answer=[t];else if(o.type==="checkbox"){const p=o.correct_answer.indexOf(t);p>-1?o.correct_answer.splice(p,1):o.correct_answer.push(t)}}function X(n,t){return l.questions[n].correct_answer.includes(t)}function Y(){l.put(route("admin.module-quiz.update",{courseOnline:m.course.id,courseModule:m.module.id,quiz:m.quiz.id}))}return(n,t)=>(u(),c(x,null,[s(e(ee),{title:`Edit Quiz - ${n.quiz.title}`},null,8,["title"]),s(se,{breadcrumbs:N},{default:i(()=>[d("div",ue,[d("div",me,[s(e(g),{"as-child":"",variant:"ghost",size:"sm"},{default:i(()=>[s(e(E),{href:`/admin/course-online/${n.course.id}`},{default:i(()=>[s(e(oe),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=r(" Back "))]),_:1},8,["href"])]),_:1}),d("div",null,[t[10]||(t[10]=d("h1",{class:"text-2xl font-bold"},"Edit Module Quiz",-1)),d("p",pe,_(n.module.name),1)])]),d("form",{onSubmit:te(Y,["prevent"]),class:"space-y-6"},[s(e(z),null,{default:i(()=>[s(e(U),null,{default:i(()=>[s(e(q),null,{default:i(()=>t[11]||(t[11]=[r("Quiz Details")])),_:1})]),_:1}),s(e(C),{class:"space-y-4"},{default:i(()=>[d("div",fe,[d("div",_e,[s(e(f),{for:"title"},{default:i(()=>t[12]||(t[12]=[r("Quiz Title")])),_:1}),s(e(v),{id:"title",modelValue:e(l).title,"onUpdate:modelValue":t[0]||(t[0]=o=>e(l).title=o),disabled:e(l).processing},null,8,["modelValue","disabled"]),e(l).errors.title?(u(),c("p",ce,_(e(l).errors.title),1)):w("",!0)]),d("div",be,[s(e(f),{for:"description"},{default:i(()=>t[13]||(t[13]=[r("Description")])),_:1}),s(e(Q),{id:"description",modelValue:e(l).description,"onUpdate:modelValue":t[1]||(t[1]=o=>e(l).description=o),rows:"3",disabled:e(l).processing},null,8,["modelValue","disabled"])]),d("div",null,[s(e(f),{for:"status"},{default:i(()=>t[14]||(t[14]=[r("Status")])),_:1}),s(e(O),{modelValue:e(l).status,"onUpdate:modelValue":t[2]||(t[2]=o=>e(l).status=o),disabled:e(l).processing},{default:i(()=>[s(e(T),null,{default:i(()=>[s(e(A))]),_:1}),s(e(S),null,{default:i(()=>[s(e(y),{value:"draft"},{default:i(()=>t[15]||(t[15]=[r("Draft")])),_:1}),s(e(y),{value:"published"},{default:i(()=>t[16]||(t[16]=[r("Published")])),_:1}),s(e(y),{value:"archived"},{default:i(()=>t[17]||(t[17]=[r("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"])])])]),_:1})]),_:1}),s(e(z),null,{default:i(()=>[s(e(U),null,{default:i(()=>[s(e(q),{class:"flex items-center gap-2"},{default:i(()=>[s(e(re),{class:"h-5 w-5"}),t[18]||(t[18]=r(" Quiz Settings "))]),_:1})]),_:1}),s(e(C),{class:"space-y-6"},{default:i(()=>[d("div",ge,[d("div",null,[s(e(f),null,{default:i(()=>t[19]||(t[19]=[r("Pass Threshold (%)")])),_:1}),s(e(v),{modelValue:e(l).pass_threshold,"onUpdate:modelValue":t[3]||(t[3]=o=>e(l).pass_threshold=o),modelModifiers:{number:!0},type:"number",min:"0",max:"100",disabled:e(l).processing},null,8,["modelValue","disabled"]),d("p",ve,"Passing: "+_(R.value)+"/"+_(h.value)+" pts",1)]),d("div",null,[s(e(f),null,{default:i(()=>t[20]||(t[20]=[r("Max Attempts")])),_:1}),s(e(v),{modelValue:e(l).max_attempts,"onUpdate:modelValue":t[4]||(t[4]=o=>e(l).max_attempts=o),modelModifiers:{number:!0},type:"number",min:"1",max:"100",disabled:e(l).processing},null,8,["modelValue","disabled"])]),d("div",null,[s(e(f),null,{default:i(()=>t[21]||(t[21]=[r("Time Limit (min)")])),_:1}),s(e(v),{modelValue:e(l).time_limit_minutes,"onUpdate:modelValue":t[5]||(t[5]=o=>e(l).time_limit_minutes=o),modelModifiers:{number:!0},type:"number",min:"1",placeholder:"No limit",disabled:e(l).processing},null,8,["modelValue","disabled"])]),d("div",null,[s(e(f),null,{default:i(()=>t[22]||(t[22]=[r("Retry Delay (hours)")])),_:1}),s(e(v),{modelValue:e(l).retry_delay_hours,"onUpdate:modelValue":t[6]||(t[6]=o=>e(l).retry_delay_hours=o),modelModifiers:{number:!0},type:"number",min:"0",disabled:e(l).processing},null,8,["modelValue","disabled"])]),d("div",null,[s(e(f),null,{default:i(()=>t[23]||(t[23]=[r("Show Correct Answers")])),_:1}),s(e(O),{modelValue:e(l).show_correct_answers,"onUpdate:modelValue":t[7]||(t[7]=o=>e(l).show_correct_answers=o),disabled:e(l).processing},{default:i(()=>[s(e(T),null,{default:i(()=>[s(e(A))]),_:1}),s(e(S),null,{default:i(()=>[(u(!0),c(x,null,$(n.showCorrectAnswersOptions,o=>(u(),b(e(y),{key:o.value,value:o.value},{default:i(()=>[r(_(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),d("div",ye,[s(e(ie),{id:"required",checked:e(l).required_to_proceed,"onUpdate:checked":t[8]||(t[8]=o=>e(l).required_to_proceed=o),disabled:e(l).processing},null,8,["checked","disabled"]),s(e(f),{for:"required",class:"cursor-pointer"},{default:i(()=>t[24]||(t[24]=[r("Required to Proceed")])),_:1})])]),_:1})]),_:1}),s(e(z),null,{default:i(()=>[s(e(U),null,{default:i(()=>[d("div",we,[d("div",null,[s(e(q),{class:"flex items-center gap-2"},{default:i(()=>[s(e(de),{class:"h-5 w-5"}),r(" Questions ("+_(e(l).questions.length)+") ",1)]),_:1}),s(e(le),null,{default:i(()=>[r("Total: "+_(h.value)+" points",1)]),_:1})]),s(e(g),{type:"button",variant:"outline",size:"sm",onClick:L,disabled:e(l).processing||e(l).questions.length>=50},{default:i(()=>[s(e(D),{class:"h-4 w-4 mr-2"}),t[25]||(t[25]=r(" Add "))]),_:1},8,["disabled"])])]),_:1}),s(e(C),{class:"space-y-6"},{default:i(()=>[(u(!0),c(x,null,$(e(l).questions,(o,p)=>(u(),c("div",{key:p,class:"border rounded-lg p-4 space-y-4 bg-muted/30"},[d("div",Ve,[d("div",xe,[s(e(M),{variant:"outline"},{default:i(()=>[r("Q"+_(p+1),1)]),_:2},1024),o.type!=="text"?(u(),b(e(M),{key:0,variant:"secondary"},{default:i(()=>[r(_(o.points)+" pts",1)]),_:2},1024)):w("",!0),o.id?(u(),b(e(M),{key:1,variant:"outline",class:"text-xs"},{default:i(()=>[r("ID: "+_(o.id),1)]),_:2},1024)):w("",!0)]),e(l).questions.length>1?(u(),b(e(g),{key:0,type:"button",variant:"ghost",size:"sm",class:"text-destructive",onClick:a=>H(p),disabled:e(l).processing},{default:i(()=>[s(e(j),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])):w("",!0)]),d("div",he,[d("div",ke,[s(e(f),null,{default:i(()=>t[26]||(t[26]=[r("Question")])),_:1}),s(e(Q),{modelValue:o.question_text,"onUpdate:modelValue":a=>o.question_text=a,rows:"2",disabled:e(l).processing},null,8,["modelValue","onUpdate:modelValue","disabled"])]),d("div",$e,[d("div",null,[s(e(f),null,{default:i(()=>t[27]||(t[27]=[r("Type")])),_:1}),s(e(O),{modelValue:o.type,"onUpdate:modelValue":[a=>o.type=a,a=>K(p)],disabled:e(l).processing},{default:i(()=>[s(e(T),null,{default:i(()=>[s(e(A))]),_:1}),s(e(S),null,{default:i(()=>[s(e(y),{value:"radio"},{default:i(()=>t[28]||(t[28]=[r("Single Choice")])),_:1}),s(e(y),{value:"checkbox"},{default:i(()=>t[29]||(t[29]=[r("Multiple Choice")])),_:1}),s(e(y),{value:"text"},{default:i(()=>t[30]||(t[30]=[r("Text")])),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),o.type!=="text"?(u(),c("div",ze,[s(e(f),null,{default:i(()=>t[31]||(t[31]=[r("Points")])),_:1}),s(e(v),{modelValue:o.points,"onUpdate:modelValue":a=>o.points=a,modelModifiers:{number:!0},type:"number",min:"0",disabled:e(l).processing},null,8,["modelValue","onUpdate:modelValue","disabled"])])):w("",!0)])]),o.type!=="text"?(u(),c("div",Ce,[d("div",Ue,[s(e(f),null,{default:i(()=>t[32]||(t[32]=[r("Options")])),_:1}),s(e(g),{type:"button",variant:"ghost",size:"sm",onClick:a=>G(p),disabled:e(l).processing||o.options.length>=10},{default:i(()=>[s(e(D),{class:"h-3 w-3 mr-1"}),t[33]||(t[33]=r(" Add "))]),_:2},1032,["onClick","disabled"])]),(u(!0),c(x,null,$(o.options,(a,V)=>(u(),c("div",{key:V,class:"flex items-center gap-2"},[d("input",{type:o.type==="radio"?"radio":"checkbox",name:`q_${p}`,checked:X(p,a),onChange:k=>W(p,a),disabled:e(l).processing||!a.trim(),class:"h-4 w-4"},null,40,qe),s(e(v),{modelValue:o.options[V],"onUpdate:modelValue":k=>o.options[V]=k,placeholder:`Option ${V+1}`,class:"flex-1",disabled:e(l).processing},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),o.options.length>2?(u(),b(e(g),{key:0,type:"button",variant:"ghost",size:"sm",onClick:k=>J(p,V),disabled:e(l).processing},{default:i(()=>[s(e(j),{class:"h-4 w-4 text-muted-foreground"})]),_:2},1032,["onClick","disabled"])):w("",!0)]))),128))])):(u(),c("div",Qe,t[34]||(t[34]=[d("p",{class:"text-sm text-blue-700 dark:text-blue-300"},"ðŸ“ Text questions require manual grading.",-1)]))),d("div",null,[s(e(f),null,{default:i(()=>t[35]||(t[35]=[r("Explanation")])),_:1}),s(e(Q),{modelValue:o.correct_answer_explanation,"onUpdate:modelValue":a=>o.correct_answer_explanation=a,rows:"2",disabled:e(l).processing},null,8,["modelValue","onUpdate:modelValue","disabled"])])]))),128))]),_:1})]),_:1}),d("div",Me,[s(e(g),{"as-child":"",variant:"outline",disabled:e(l).processing},{default:i(()=>[s(e(E),{href:`/admin/course-online/${n.course.id}`},{default:i(()=>t[36]||(t[36]=[r("Cancel")])),_:1},8,["href"])]),_:1},8,["disabled"]),s(e(g),{type:"submit",disabled:e(l).processing},{default:i(()=>[e(l).processing?(u(),b(e(ae),{key:1,class:"h-4 w-4 mr-2 animate-spin"})):(u(),b(e(ne),{key:0,class:"h-4 w-4 mr-2"})),r(" "+_(e(l).processing?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{yt as default};
