import{d as j,C as I,r as E,a,o as l,e as s,s as p,h as i,E as g,u as r,t as n,b as h,v as C,w as P,f as T,P as B,j as A}from"./app-De5aCyOy.js";import{E as L}from"./Editor-DtLv62E6.js";const M={key:0,class:"text-red-500 text-sm mt-1"},R={class:"mt-1"},F={key:0,class:"text-red-500 text-sm mt-1"},O={class:"mt-1 flex flex-col sm:flex-row items-start sm:items-center sm:space-x-4 space-y-3 sm:space-y-0"},q=["src"],K={key:1,class:"h-32 w-full sm:w-48 flex items-center justify-center bg-gray-100 rounded-md"},$={class:"flex items-center"},z={key:0,class:"text-red-500 text-sm mt-1"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6"},H={key:0,class:"text-red-500 text-sm mt-1"},J={key:0,class:"text-red-500 text-sm mt-1"},Q={key:0,class:"text-red-500 text-sm mt-1"},W={key:0,class:"text-red-500 text-sm mt-1"},X={key:0,class:"text-red-500 text-sm mt-1"},Y={class:"flex flex-col sm:flex-row sm:justify-end space-y-2 sm:space-y-0 sm:space-x-3"},Z=["disabled"],se=j({__name:"Form",props:{course:Object,mode:{type:String,default:"create"}},setup(V){var f,b,y,v,x,k,w,_;const d=V,c=m=>{if(!m)return"";const t=m.split("T")[0].split("-");if(t.length!==3){const o=new Date(m);return isNaN(o.getTime())?"":o.toISOString().split("T")[0]}return t.join("-")},e=I({name:((f=d.course)==null?void 0:f.name)||"",description:((b=d.course)==null?void 0:b.description)||"",image:null,image_path:((y=d.course)==null?void 0:y.image_path)||null,start_date:c((v=d.course)==null?void 0:v.start_date)||"",end_date:c((x=d.course)==null?void 0:x.end_date)||"",status:((k=d.course)==null?void 0:k.status)||"pending",level:((w=d.course)==null?void 0:w.level)||"",duration:((_=d.course)==null?void 0:_.duration)||""}),u=E(null);function S(m){const t=m.target.files[0];if(t){e.image=t;const o=new FileReader;o.onload=N=>{u.value=N.target.result},o.readAsDataURL(t)}}function D(){e.image=null,e.image_path=null,u.value=null}function U(){e.start_date&&(e.start_date=c(e.start_date)),e.end_date&&(e.end_date=c(e.end_date)),d.mode==="edit"?e.post(route("admin.courses.update",d.course.id),{onSuccess:()=>{e.reset(),u.value=null}}):e.post(route("admin.courses.store"),{onSuccess:()=>{e.reset(),u.value=null}})}return(m,t)=>(l(),a("form",{onSubmit:A(U,["prevent"]),class:"space-y-4 sm:space-y-6 px-2 sm:px-0"},[s("div",null,[t[7]||(t[7]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Course Name",-1)),p(s("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>r(e).name=o),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:""},null,512),[[g,r(e).name]]),r(e).errors.name?(l(),a("div",M,n(r(e).errors.name),1)):i("",!0)]),s("div",null,[t[8]||(t[8]=s("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),s("div",R,[h(r(L),{modelValue:r(e).description,"onUpdate:modelValue":t[1]||(t[1]=o=>r(e).description=o),"api-key":m.tinymceApiKey,init:{height:300,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |               alignleft aligncenter alignright alignjustify |               bullist numlist outdent indent | removeformat | help",mobile:{menubar:!1,toolbar:"undo redo | bold italic | link | bullist numlist",toolbar_mode:"scrolling"}}},null,8,["modelValue","api-key"])]),r(e).errors.description?(l(),a("div",F,n(r(e).errors.description),1)):i("",!0)]),s("div",null,[t[11]||(t[11]=s("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Course Image",-1)),s("div",O,[u.value||r(e).image_path?(l(),a("img",{key:0,src:u.value||`/storage/${r(e).image_path}`,alt:"Course image preview",class:"h-32 w-full sm:w-auto object-cover rounded-md"},null,8,q)):(l(),a("div",K,t[9]||(t[9]=[s("span",{class:"text-gray-400"},"No image",-1)]))),s("div",$,[t[10]||(t[10]=s("label",{for:"image-upload",class:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50"}," Change Image ",-1)),s("input",{id:"image-upload",type:"file",class:"hidden",onChange:S,accept:"image/*"},null,32),u.value||r(e).image_path?(l(),a("button",{key:0,type:"button",onClick:D,class:"ml-2 text-sm text-red-600 hover:text-red-800"}," Remove ")):i("",!0)])]),r(e).errors.image?(l(),a("div",z,n(r(e).errors.image),1)):i("",!0)]),s("div",G,[s("div",null,[t[12]||(t[12]=s("label",{for:"start_date",class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),p(s("input",{id:"start_date","onUpdate:modelValue":t[2]||(t[2]=o=>r(e).start_date=o),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"},null,512),[[g,r(e).start_date]]),r(e).errors.start_date?(l(),a("div",H,n(r(e).errors.start_date),1)):i("",!0)]),s("div",null,[t[13]||(t[13]=s("label",{for:"end_date",class:"block text-sm font-medium text-gray-700"},"End Date",-1)),p(s("input",{id:"end_date","onUpdate:modelValue":t[3]||(t[3]=o=>r(e).end_date=o),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"},null,512),[[g,r(e).end_date]]),r(e).errors.end_date?(l(),a("div",J,n(r(e).errors.end_date),1)):i("",!0)]),s("div",null,[t[15]||(t[15]=s("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),p(s("select",{id:"status","onUpdate:modelValue":t[4]||(t[4]=o=>r(e).status=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"},t[14]||(t[14]=[s("option",{value:"pending"},"Pending",-1),s("option",{value:"in_progress"},"In Progress",-1),s("option",{value:"completed"},"Completed",-1)]),512),[[C,r(e).status]]),r(e).errors.status?(l(),a("div",Q,n(r(e).errors.status),1)):i("",!0)]),s("div",null,[t[17]||(t[17]=s("label",{for:"level",class:"block text-sm font-medium text-gray-700"},"Level",-1)),p(s("select",{id:"level","onUpdate:modelValue":t[5]||(t[5]=o=>r(e).level=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"},t[16]||(t[16]=[s("option",{value:""},"Select Level",-1),s("option",{value:"beginner"},"Beginner",-1),s("option",{value:"intermediate"},"Intermediate",-1),s("option",{value:"advanced"},"Advanced",-1)]),512),[[C,r(e).level]]),r(e).errors.level?(l(),a("div",W,n(r(e).errors.level),1)):i("",!0)]),s("div",null,[t[18]||(t[18]=s("label",{for:"duration",class:"block text-sm font-medium text-gray-700"},"Duration (hours)",-1)),p(s("input",{id:"duration","onUpdate:modelValue":t[6]||(t[6]=o=>r(e).duration=o),type:"number",min:"1",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"},null,512),[[g,r(e).duration]]),r(e).errors.duration?(l(),a("div",X,n(r(e).errors.duration),1)):i("",!0)])]),s("div",Y,[h(r(B),{href:m.route("admin.courses.index"),class:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 text-center"},{default:P(()=>t[19]||(t[19]=[T(" Cancel ")])),_:1},8,["href"]),s("button",{type:"submit",class:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90",disabled:r(e).processing},n(r(e).processing?"Saving...":"Save Course"),9,Z)])],32))}});export{se as default};
